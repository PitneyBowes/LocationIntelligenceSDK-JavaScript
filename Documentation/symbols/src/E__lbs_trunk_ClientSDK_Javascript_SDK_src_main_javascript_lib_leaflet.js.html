<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"> <style>
	.KEYW {color: #933;}
	.COMM {color: #bbb; font-style: italic;}
	.NUMB {color: #393;}
	.STRN {color: #393;}
	.REGX {color: #339;}
	.line {border-right: 1px dotted #666; color: #666; font-style: normal;}
	</style></head><body><pre><span class='line'>  1</span> <span class="COMM">/*
<span class='line'>  2</span>  Leaflet 1.0.0-rc.1 (a626826), a JS library for interactive maps. http://leafletjs.com
<span class='line'>  3</span>  (c) 2010-2015 Vladimir Agafonkin, (c) 2010-2011 CloudMade
<span class='line'>  4</span> */</span><span class="WHIT">
<span class='line'>  5</span> </span><span class="PUNC">!</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">function</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">t.L</span><span class="PUNC">;</span><span class="NAME">o.noConflict</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t.L</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">t.L</span><span class="PUNC">=</span><span class="NAME">o</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">o</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">version</span><span class="PUNC">:</span><span class="STRN">"1.0.0-rc.1"</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="STRN">"object"</span><span class="PUNC">==</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">module</span><span class="PUNC">&&</span><span class="STRN">"object"</span><span class="PUNC">==</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">module.exports</span><span class="PUNC">?</span><span class="NAME">module.exports</span><span class="PUNC">=</span><span class="NAME">o</span><span class="PUNC">:</span><span class="STRN">"function"</span><span class="PUNC">==</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">define</span><span class="PUNC">&&</span><span class="NAME">define.amd</span><span class="PUNC">&&</span><span class="NAME">define</span><span class="PUNC">(</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="STRN">"undefined"</span><span class="PUNC">!=</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">&&</span><span class="NAME">n</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Util</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">extend</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">arguments.length</span><span class="PUNC">;</span><span class="NAME">n</span><span class="PUNC">></span><span class="NAME">i</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o</span><span class="PUNC">=</span><span class="NAME">arguments</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">e</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">o</span><span class="PUNC">)</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">o</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">create</span><span class="PUNC">:</span><span class="NAME">Object.create</span><span class="PUNC">||</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">function</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t.prototype</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">,</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bind</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">Array.prototype.slice</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">t.bind</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t.bind.apply</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">i.call</span><span class="PUNC">(</span><span class="NAME">arguments</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">i.call</span><span class="PUNC">(</span><span class="NAME">arguments</span><span class="PUNC">,</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t.apply</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">n.length</span><span class="PUNC">?</span><span class="NAME">n.concat</span><span class="PUNC">(</span><span class="NAME">i.call</span><span class="PUNC">(</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">stamp</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t._leaflet_id</span><span class="PUNC">=</span><span class="NAME">t._leaflet_id</span><span class="PUNC">||</span><span class="PUNC">++</span><span class="NAME">o.Util.lastId</span><span class="PUNC">,</span><span class="NAME">t._leaflet_id</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">lastId</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">throttle</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">r</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">n</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">s.apply</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">n</span><span class="PUNC">?</span><span class="NAME">o</span><span class="PUNC">=</span><span class="NAME">arguments</span><span class="PUNC">:</span><span class="PUNC">(</span><span class="NAME">t.apply</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">setTimeout</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">wrapNum</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">n</span><span class="PUNC">-</span><span class="NAME">o</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">===</span><span class="NAME">n</span><span class="PUNC">&&</span><span class="NAME">i</span><span class="PUNC">?</span><span class="NAME">t</span><span class="PUNC">:</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">-</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">%</span><span class="NAME">s</span><span class="PUNC">+</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">%</span><span class="NAME">s</span><span class="PUNC">+</span><span class="NAME">o</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">falseFn</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">formatNum</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">Math.pow</span><span class="PUNC">(</span><span class="NUMB">10</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">||</span><span class="NUMB">5</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">Math.round</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">*</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NAME">i</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">trim</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t.trim</span><span class="PUNC">?</span><span class="NAME">t.trim</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">t.replace</span><span class="PUNC">(</span><span class="REGX">/^\s+|\s+$/g</span><span class="PUNC">,</span><span class="STRN">""</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">splitWords</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">o.Util.trim</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">split</span><span class="PUNC">(</span><span class="REGX">/\s+/</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">setOptions</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">t.hasOwnProperty</span><span class="PUNC">(</span><span class="STRN">"options"</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">t.options</span><span class="PUNC">=</span><span class="NAME">t.options</span><span class="PUNC">?</span><span class="NAME">o.Util.create</span><span class="PUNC">(</span><span class="NAME">t.options</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">)</span><span class="NAME">t.options</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t.options</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getParamString</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">o</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">)</span><span class="NAME">n.push</span><span class="PUNC">(</span><span class="NAME">encodeURIComponent</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">?</span><span class="NAME">o.toUpperCase</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">"="</span><span class="PUNC">+</span><span class="NAME">encodeURIComponent</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NAME">o</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">&&</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">!==</span><span class="NAME">e.indexOf</span><span class="PUNC">(</span><span class="STRN">"?"</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="STRN">"&"</span><span class="PUNC">:</span><span class="STRN">"?"</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="NAME">n.join</span><span class="PUNC">(</span><span class="STRN">"&"</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">template</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t.replace</span><span class="PUNC">(</span><span class="NAME">o.Util.templateRe</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">o</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NAME">n</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">o</span><span class="PUNC">===</span><span class="NAME">i</span><span class="PUNC">)</span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Error</span><span class="PUNC">(</span><span class="STRN">"No value provided for variable "</span><span class="PUNC">+</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="STRN">"function"</span><span class="PUNC">==</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">o</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">o</span><span class="PUNC">=</span><span class="NAME">o</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">templateRe</span><span class="PUNC">:</span><span class="REGX">/\{ *([\w_\-]+) *\}/g</span><span class="PUNC">,</span><span class="NAME">isArray</span><span class="PUNC">:</span><span class="NAME">Array.isArray</span><span class="PUNC">||</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="STRN">"[object Array]"</span><span class="PUNC">===</span><span class="NAME">Object.prototype.toString.call</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">indexOf</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">&lt;</span><span class="NAME">t.length</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">===</span><span class="NAME">e</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">emptyImageUrl</span><span class="PUNC">:</span><span class="STRN">"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">function</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">[</span><span class="STRN">"webkit"</span><span class="PUNC">+</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="NAME">t</span><span class="PUNC">[</span><span class="STRN">"moz"</span><span class="PUNC">+</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="NAME">t</span><span class="PUNC">[</span><span class="STRN">"ms"</span><span class="PUNC">+</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="KEYW">function</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="PUNC">+</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Date</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">=</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">16</span><span class="PUNC">-</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">-</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">i</span><span class="PUNC">+</span><span class="NAME">o</span><span class="PUNC">,</span><span class="NAME">t.setTimeout</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">t.requestAnimationFrame</span><span class="PUNC">||</span><span class="NAME">e</span><span class="PUNC">(</span><span class="STRN">"RequestAnimationFrame"</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">t.cancelAnimationFrame</span><span class="PUNC">||</span><span class="NAME">e</span><span class="PUNC">(</span><span class="STRN">"CancelAnimationFrame"</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="NAME">e</span><span class="PUNC">(</span><span class="STRN">"CancelRequestAnimationFrame"</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">t.clearTimeout</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">o.Util.requestAnimFrame</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">r</span><span class="PUNC">&&</span><span class="NAME">s</span><span class="PUNC">===</span><span class="NAME">i</span><span class="PUNC">?</span><span class="KEYW">void</span><span class="WHIT"> </span><span class="NAME">e.call</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">s.call</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">o.bind</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.Util.cancelAnimFrame</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">e</span><span class="PUNC">&&</span><span class="NAME">r.call</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.extend</span><span class="PUNC">=</span><span class="NAME">o.Util.extend</span><span class="PUNC">,</span><span class="NAME">o.bind</span><span class="PUNC">=</span><span class="NAME">o.Util.bind</span><span class="PUNC">,</span><span class="NAME">o.stamp</span><span class="PUNC">=</span><span class="NAME">o.Util.stamp</span><span class="PUNC">,</span><span class="NAME">o.setOptions</span><span class="PUNC">=</span><span class="NAME">o.Util.setOptions</span><span class="PUNC">,</span><span class="NAME">o.Class</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.Class.extend</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.initialize</span><span class="PUNC">&&</span><span class="NAME">this.initialize.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.callInitHooks</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">e.__super__</span><span class="PUNC">=</span><span class="NAME">this.prototype</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">o.Util.create</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">n.constructor</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">e.prototype</span><span class="PUNC">=</span><span class="NAME">n</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">s</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="NAME">this.hasOwnProperty</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="STRN">"prototype"</span><span class="PUNC">!==</span><span class="NAME">s</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NAME">s</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">[</span><span class="NAME">s</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t.statics</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">o.extend</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">t.statics</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">t.statics</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t.includes</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">o.Util.extend.apply</span><span class="PUNC">(</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">n</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">concat</span><span class="PUNC">(</span><span class="NAME">t.includes</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">t.includes</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n.options</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">t.options</span><span class="PUNC">=</span><span class="NAME">o.Util.extend</span><span class="PUNC">(</span><span class="NAME">o.Util.create</span><span class="PUNC">(</span><span class="NAME">n.options</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t.options</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.extend</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n._initHooks</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">n.callInitHooks</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this._initHooksCalled</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">i.callInitHooks</span><span class="PUNC">&&</span><span class="NAME">i.callInitHooks.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._initHooksCalled</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">n._initHooks.length</span><span class="PUNC">;</span><span class="NAME">e</span><span class="PUNC">></span><span class="NAME">t</span><span class="PUNC">;</span><span class="NAME">t</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="NAME">n._initHooks</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.Class.include</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">o.extend</span><span class="PUNC">(</span><span class="NAME">this.prototype</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.Class.mergeOptions</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">o.extend</span><span class="PUNC">(</span><span class="NAME">this.prototype.options</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.Class.addInitHook</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">Array.prototype.slice.call</span><span class="PUNC">(</span><span class="NAME">arguments</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="STRN">"function"</span><span class="PUNC">==</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">?</span><span class="NAME">t</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">this</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.prototype._initHooks</span><span class="PUNC">=</span><span class="NAME">this.prototype._initHooks</span><span class="PUNC">||</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">this.prototype._initHooks.push</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.Evented</span><span class="PUNC">=</span><span class="NAME">o.Class.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">on</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="STRN">"object"</span><span class="PUNC">==</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">)</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">)</span><span class="NAME">this._on</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NAME">n</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">o.Util.splitWords</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">s</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">t.length</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">></span><span class="NAME">s</span><span class="PUNC">;</span><span class="NAME">s</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="NAME">this._on</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NAME">s</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">off</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="STRN">"object"</span><span class="PUNC">==</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">)</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">)</span><span class="NAME">this._off</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NAME">n</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">o.Util.splitWords</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">s</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">t.length</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">></span><span class="NAME">s</span><span class="PUNC">;</span><span class="NAME">s</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="NAME">this._off</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NAME">s</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">this._events</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_on</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">this._events</span><span class="PUNC">=</span><span class="NAME">this._events</span><span class="PUNC">||</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">i</span><span class="PUNC">&&</span><span class="NAME">i</span><span class="PUNC">!==</span><span class="KEYW">this</span><span class="PUNC">&&</span><span class="NAME">o.stamp</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">+</span><span class="STRN">"_idx"</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">+</span><span class="STRN">"_len"</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">=</span><span class="NAME">n</span><span class="PUNC">[</span><span class="NAME">r</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">n</span><span class="PUNC">[</span><span class="NAME">r</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">=</span><span class="NAME">o.stamp</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">"_"</span><span class="PUNC">+</span><span class="NAME">s</span><span class="PUNC">;</span><span class="NAME">h</span><span class="PUNC">[</span><span class="NAME">l</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">h</span><span class="PUNC">[</span><span class="NAME">l</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">fn</span><span class="PUNC">:</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">ctx</span><span class="PUNC">:</span><span class="NAME">i</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">[</span><span class="NAME">a</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">[</span><span class="NAME">a</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">n</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">push</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">fn</span><span class="PUNC">:</span><span class="NAME">e</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_off</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">this._events</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">+</span><span class="STRN">"_idx"</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">+</span><span class="STRN">"_len"</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">e</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">[</span><span class="NAME">s</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="KEYW">void</span><span class="WHIT"> </span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">[</span><span class="NAME">r</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">a</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">,</span><span class="NAME">c</span><span class="PUNC">,</span><span class="NAME">d</span><span class="PUNC">=</span><span class="NAME">i</span><span class="PUNC">&&</span><span class="NAME">i</span><span class="PUNC">!==</span><span class="KEYW">this</span><span class="PUNC">&&</span><span class="NAME">o.stamp</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">)</span><span class="NAME">c</span><span class="PUNC">=</span><span class="NAME">o.stamp</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">"_"</span><span class="PUNC">+</span><span class="NAME">d</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">n</span><span class="PUNC">[</span><span class="NAME">s</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">&&</span><span class="NAME">a</span><span class="PUNC">[</span><span class="NAME">c</span><span class="PUNC">]</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">=</span><span class="NAME">a</span><span class="PUNC">[</span><span class="NAME">c</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">a</span><span class="PUNC">[</span><span class="NAME">c</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">[</span><span class="NAME">r</span><span class="PUNC">]</span><span class="PUNC">--</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">n</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">h</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">=</span><span class="NAME">a.length</span><span class="PUNC">;</span><span class="NAME">l</span><span class="PUNC">></span><span class="NAME">h</span><span class="PUNC">;</span><span class="NAME">h</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">[</span><span class="NAME">h</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">fn</span><span class="PUNC">===</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">u</span><span class="PUNC">=</span><span class="NAME">a</span><span class="PUNC">[</span><span class="NAME">h</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">a.splice</span><span class="PUNC">(</span><span class="NAME">h</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">break</span><span class="PUNC">}</span><span class="NAME">u</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">u.fn</span><span class="PUNC">=</span><span class="NAME">o.Util.falseFn</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">fire</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.listens</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">o.Util.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">type</span><span class="PUNC">:</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">target</span><span class="PUNC">:</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">this._events</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">r</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">=</span><span class="NAME">s</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">+</span><span class="STRN">"_idx"</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">h</span><span class="PUNC">=</span><span class="NAME">s</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">slice</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">h.length</span><span class="PUNC">;</span><span class="NAME">a</span><span class="PUNC">></span><span class="NAME">r</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="NAME">h</span><span class="PUNC">[</span><span class="NAME">r</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">fn.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">l</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">u</span><span class="PUNC">)</span><span class="NAME">u</span><span class="PUNC">[</span><span class="NAME">l</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">fn.call</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">[</span><span class="NAME">l</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">ctx</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">&&</span><span class="NAME">this._propagateEvent</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">listens</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this._events</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="NAME">i</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">+</span><span class="STRN">"_len"</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">this._eventParents</span><span class="PUNC">)</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this._eventParents</span><span class="PUNC">[</span><span class="NAME">n</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">listens</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">once</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="STRN">"object"</span><span class="PUNC">==</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">)</span><span class="NAME">this.once</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NAME">n</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">o.bind</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.off</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">off</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.on</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">on</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">addEventParent</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._eventParents</span><span class="PUNC">=</span><span class="NAME">this._eventParents</span><span class="PUNC">||</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">this._eventParents</span><span class="PUNC">[</span><span class="NAME">o.stamp</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">removeEventParent</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._eventParents</span><span class="PUNC">&&</span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">this._eventParents</span><span class="PUNC">[</span><span class="NAME">o.stamp</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_propagateEvent</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">this._eventParents</span><span class="PUNC">)</span><span class="NAME">this._eventParents</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">fire</span><span class="PUNC">(</span><span class="NAME">t.type</span><span class="PUNC">,</span><span class="NAME">o.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">layer</span><span class="PUNC">:</span><span class="NAME">t.target</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">o.Evented.prototype</span><span class="PUNC">;</span><span class="NAME">s.addEventListener</span><span class="PUNC">=</span><span class="NAME">s.on</span><span class="PUNC">,</span><span class="NAME">s.removeEventListener</span><span class="PUNC">=</span><span class="NAME">s.clearAllEventListeners</span><span class="PUNC">=</span><span class="NAME">s.off</span><span class="PUNC">,</span><span class="NAME">s.addOneTimeEventListener</span><span class="PUNC">=</span><span class="NAME">s.once</span><span class="PUNC">,</span><span class="NAME">s.fireEvent</span><span class="PUNC">=</span><span class="NAME">s.fire</span><span class="PUNC">,</span><span class="NAME">s.hasEventListeners</span><span class="PUNC">=</span><span class="NAME">s.listens</span><span class="PUNC">,</span><span class="NAME">o.Mixin</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">Events</span><span class="PUNC">:</span><span class="NAME">s</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">navigator.userAgent.toLowerCase</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">e.documentElement</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="STRN">"ActiveXObject"</span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">!==</span><span class="NAME">i.indexOf</span><span class="PUNC">(</span><span class="STRN">"webkit"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">=</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">!==</span><span class="NAME">i.indexOf</span><span class="PUNC">(</span><span class="STRN">"phantom"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">=</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">!==</span><span class="NAME">i.search</span><span class="PUNC">(</span><span class="STRN">"android [23]"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">=</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">!==</span><span class="NAME">i.indexOf</span><span class="PUNC">(</span><span class="STRN">"chrome"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">=</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">!==</span><span class="NAME">i.indexOf</span><span class="PUNC">(</span><span class="STRN">"gecko"</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">r</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">t.opera</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">c</span><span class="PUNC">=</span><span class="STRN">"undefined"</span><span class="PUNC">!=</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">orientation</span><span class="PUNC">||</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">!==</span><span class="NAME">i.indexOf</span><span class="PUNC">(</span><span class="STRN">"mobile"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">d</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NAME">t.PointerEvent</span><span class="PUNC">&&</span><span class="NAME">t.MSPointerEvent</span><span class="PUNC">,</span><span class="NAME">_</span><span class="PUNC">=</span><span class="NAME">t.PointerEvent</span><span class="PUNC">||</span><span class="NAME">d</span><span class="PUNC">,</span><span class="NAME">m</span><span class="PUNC">=</span><span class="NAME">s</span><span class="PUNC">&&</span><span class="STRN">"transition"</span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">n.style</span><span class="PUNC">,</span><span class="NAME">p</span><span class="PUNC">=</span><span class="STRN">"WebKitCSSMatrix"</span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">&&</span><span class="STRN">"m11"</span><span class="KEYW">in</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">t.WebKitCSSMatrix</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">h</span><span class="PUNC">,</span><span class="NAME">f</span><span class="PUNC">=</span><span class="STRN">"MozPerspective"</span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">n.style</span><span class="PUNC">,</span><span class="NAME">g</span><span class="PUNC">=</span><span class="STRN">"OTransition"</span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">n.style</span><span class="PUNC">,</span><span class="NAME">v</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NAME">t.L_NO_TOUCH</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">_</span><span class="PUNC">||</span><span class="STRN">"ontouchstart"</span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">||</span><span class="NAME">t.DocumentTouch</span><span class="PUNC">&&</span><span class="NAME">e</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">t.DocumentTouch</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">o.Browser</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">ie</span><span class="PUNC">:</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">ielt9</span><span class="PUNC">:</span><span class="NAME">s</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">e.addEventListener</span><span class="PUNC">,</span><span class="NAME">edge</span><span class="PUNC">:</span><span class="STRN">"msLaunchUri"</span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">navigator</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="PUNC">(</span><span class="STRN">"documentMode"</span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">webkit</span><span class="PUNC">:</span><span class="NAME">r</span><span class="PUNC">,</span><span class="NAME">gecko</span><span class="PUNC">:</span><span class="NAME">u</span><span class="PUNC">,</span><span class="NAME">android</span><span class="PUNC">:</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">!==</span><span class="NAME">i.indexOf</span><span class="PUNC">(</span><span class="STRN">"android"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">android23</span><span class="PUNC">:</span><span class="NAME">h</span><span class="PUNC">,</span><span class="NAME">chrome</span><span class="PUNC">:</span><span class="NAME">l</span><span class="PUNC">,</span><span class="NAME">safari</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NAME">l</span><span class="PUNC">&&</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">!==</span><span class="NAME">i.indexOf</span><span class="PUNC">(</span><span class="STRN">"safari"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">ie3d</span><span class="PUNC">:</span><span class="NAME">m</span><span class="PUNC">,</span><span class="NAME">webkit3d</span><span class="PUNC">:</span><span class="NAME">p</span><span class="PUNC">,</span><span class="NAME">gecko3d</span><span class="PUNC">:</span><span class="NAME">f</span><span class="PUNC">,</span><span class="NAME">opera12</span><span class="PUNC">:</span><span class="NAME">g</span><span class="PUNC">,</span><span class="NAME">any3d</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NAME">t.L_DISABLE_3D</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">m</span><span class="PUNC">||</span><span class="NAME">p</span><span class="PUNC">||</span><span class="NAME">f</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">g</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">a</span><span class="PUNC">,</span><span class="NAME">mobile</span><span class="PUNC">:</span><span class="NAME">c</span><span class="PUNC">,</span><span class="NAME">mobileWebkit</span><span class="PUNC">:</span><span class="NAME">c</span><span class="PUNC">&&</span><span class="NAME">r</span><span class="PUNC">,</span><span class="NAME">mobileWebkit3d</span><span class="PUNC">:</span><span class="NAME">c</span><span class="PUNC">&&</span><span class="NAME">p</span><span class="PUNC">,</span><span class="NAME">mobileOpera</span><span class="PUNC">:</span><span class="NAME">c</span><span class="PUNC">&&</span><span class="NAME">t.opera</span><span class="PUNC">,</span><span class="NAME">mobileGecko</span><span class="PUNC">:</span><span class="NAME">c</span><span class="PUNC">&&</span><span class="NAME">u</span><span class="PUNC">,</span><span class="NAME">touch</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="PUNC">!</span><span class="NAME">v</span><span class="PUNC">,</span><span class="NAME">msPointer</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="PUNC">!</span><span class="NAME">d</span><span class="PUNC">,</span><span class="NAME">pointer</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="PUNC">!</span><span class="NAME">_</span><span class="PUNC">,</span><span class="NAME">retina</span><span class="PUNC">:</span><span class="PUNC">(</span><span class="NAME">t.devicePixelRatio</span><span class="PUNC">||</span><span class="NAME">t.screen.deviceXDPI</span><span class="PUNC">/</span><span class="NAME">t.screen.logicalXDPI</span><span class="PUNC">)</span><span class="PUNC">></span><span class="NUMB">1</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Point</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.x</span><span class="PUNC">=</span><span class="NAME">i</span><span class="PUNC">?</span><span class="NAME">Math.round</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">this.y</span><span class="PUNC">=</span><span class="NAME">i</span><span class="PUNC">?</span><span class="NAME">Math.round</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">e</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.Point.prototype</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">clone</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Point</span><span class="PUNC">(</span><span class="NAME">this.x</span><span class="PUNC">,</span><span class="NAME">this.y</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">add</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.clone</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">_add</span><span class="PUNC">(</span><span class="NAME">o.point</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_add</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.x</span><span class="PUNC">+</span><span class="PUNC">=</span><span class="NAME">t.x</span><span class="PUNC">,</span><span class="NAME">this.y</span><span class="PUNC">+</span><span class="PUNC">=</span><span class="NAME">t.y</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">subtract</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.clone</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">_subtract</span><span class="PUNC">(</span><span class="NAME">o.point</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_subtract</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.x</span><span class="PUNC">-</span><span class="PUNC">=</span><span class="NAME">t.x</span><span class="PUNC">,</span><span class="NAME">this.y</span><span class="PUNC">-</span><span class="PUNC">=</span><span class="NAME">t.y</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">divideBy</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.clone</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">_divideBy</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_divideBy</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.x</span><span class="PUNC">/</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">this.y</span><span class="PUNC">/</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">multiplyBy</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.clone</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">_multiplyBy</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_multiplyBy</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.x</span><span class="PUNC">*</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">this.y</span><span class="PUNC">*</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">scaleBy</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Point</span><span class="PUNC">(</span><span class="NAME">this.x</span><span class="PUNC">*</span><span class="NAME">t.x</span><span class="PUNC">,</span><span class="NAME">this.y</span><span class="PUNC">*</span><span class="NAME">t.y</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">unscaleBy</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Point</span><span class="PUNC">(</span><span class="NAME">this.x</span><span class="PUNC">/</span><span class="NAME">t.x</span><span class="PUNC">,</span><span class="NAME">this.y</span><span class="PUNC">/</span><span class="NAME">t.y</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">round</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.clone</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">_round</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_round</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.x</span><span class="PUNC">=</span><span class="NAME">Math.round</span><span class="PUNC">(</span><span class="NAME">this.x</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.y</span><span class="PUNC">=</span><span class="NAME">Math.round</span><span class="PUNC">(</span><span class="NAME">this.y</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">floor</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.clone</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">_floor</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_floor</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.x</span><span class="PUNC">=</span><span class="NAME">Math.floor</span><span class="PUNC">(</span><span class="NAME">this.x</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.y</span><span class="PUNC">=</span><span class="NAME">Math.floor</span><span class="PUNC">(</span><span class="NAME">this.y</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">ceil</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.clone</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">_ceil</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_ceil</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.x</span><span class="PUNC">=</span><span class="NAME">Math.ceil</span><span class="PUNC">(</span><span class="NAME">this.x</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.y</span><span class="PUNC">=</span><span class="NAME">Math.ceil</span><span class="PUNC">(</span><span class="NAME">this.y</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">distanceTo</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">o.point</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">t.x</span><span class="PUNC">-</span><span class="NAME">this.x</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">t.y</span><span class="PUNC">-</span><span class="NAME">this.y</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">Math.sqrt</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">*</span><span class="NAME">e</span><span class="PUNC">+</span><span class="NAME">i</span><span class="PUNC">*</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">equals</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">o.point</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t.x</span><span class="PUNC">===</span><span class="NAME">this.x</span><span class="PUNC">&&</span><span class="NAME">t.y</span><span class="PUNC">===</span><span class="NAME">this.y</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">contains</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">o.point</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">t.x</span><span class="PUNC">)</span><span class="PUNC">&lt;=</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">this.x</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">t.y</span><span class="PUNC">)</span><span class="PUNC">&lt;=</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">this.y</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">toString</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="STRN">"Point("</span><span class="PUNC">+</span><span class="NAME">o.Util.formatNum</span><span class="PUNC">(</span><span class="NAME">this.x</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">", "</span><span class="PUNC">+</span><span class="NAME">o.Util.formatNum</span><span class="PUNC">(</span><span class="NAME">this.y</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">")"</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.point</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">o.Point</span><span class="PUNC">?</span><span class="NAME">t</span><span class="PUNC">:</span><span class="NAME">o.Util.isArray</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Point</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">t</span><span class="PUNC">===</span><span class="NAME">i</span><span class="PUNC">||</span><span class="KEYW">null</span><span class="PUNC">===</span><span class="NAME">t</span><span class="PUNC">?</span><span class="NAME">t</span><span class="PUNC">:</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Point</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.Bounds</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">?</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">:</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">=</span><span class="NAME">i.length</span><span class="PUNC">;</span><span class="NAME">o</span><span class="PUNC">></span><span class="NAME">n</span><span class="PUNC">;</span><span class="NAME">n</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="NAME">this.extend</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">[</span><span class="NAME">n</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.Bounds.prototype</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">extend</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">o.point</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.min</span><span class="PUNC">||</span><span class="NAME">this.max</span><span class="PUNC">?</span><span class="PUNC">(</span><span class="NAME">this.min.x</span><span class="PUNC">=</span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NAME">t.x</span><span class="PUNC">,</span><span class="NAME">this.min.x</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.max.x</span><span class="PUNC">=</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">t.x</span><span class="PUNC">,</span><span class="NAME">this.max.x</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.min.y</span><span class="PUNC">=</span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NAME">t.y</span><span class="PUNC">,</span><span class="NAME">this.min.y</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.max.y</span><span class="PUNC">=</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">t.y</span><span class="PUNC">,</span><span class="NAME">this.max.y</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="PUNC">(</span><span class="NAME">this.min</span><span class="PUNC">=</span><span class="NAME">t.clone</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.max</span><span class="PUNC">=</span><span class="NAME">t.clone</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getCenter</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Point</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">this.min.x</span><span class="PUNC">+</span><span class="NAME">this.max.x</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">,</span><span class="PUNC">(</span><span class="NAME">this.min.y</span><span class="PUNC">+</span><span class="NAME">this.max.y</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getBottomLeft</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Point</span><span class="PUNC">(</span><span class="NAME">this.min.x</span><span class="PUNC">,</span><span class="NAME">this.max.y</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getTopRight</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Point</span><span class="PUNC">(</span><span class="NAME">this.max.x</span><span class="PUNC">,</span><span class="NAME">this.min.y</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getSize</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.max.subtract</span><span class="PUNC">(</span><span class="NAME">this.min</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">contains</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="STRN">"number"</span><span class="PUNC">==</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="NAME">t</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">o.Point</span><span class="PUNC">?</span><span class="NAME">o.point</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">o.bounds</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">o.Bounds</span><span class="PUNC">?</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">t.min</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">t.max</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e.x</span><span class="PUNC">>=</span><span class="NAME">this.min.x</span><span class="PUNC">&&</span><span class="NAME">i.x</span><span class="PUNC">&lt;=</span><span class="NAME">this.max.x</span><span class="PUNC">&&</span><span class="NAME">e.y</span><span class="PUNC">>=</span><span class="NAME">this.min.y</span><span class="PUNC">&&</span><span class="NAME">i.y</span><span class="PUNC">&lt;=</span><span class="NAME">this.max.y</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">intersects</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">o.bounds</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this.min</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this.max</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">t.min</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">t.max</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">s.x</span><span class="PUNC">>=</span><span class="NAME">e.x</span><span class="PUNC">&&</span><span class="NAME">n.x</span><span class="PUNC">&lt;=</span><span class="NAME">i.x</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">s.y</span><span class="PUNC">>=</span><span class="NAME">e.y</span><span class="PUNC">&&</span><span class="NAME">n.y</span><span class="PUNC">&lt;=</span><span class="NAME">i.y</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">r</span><span class="PUNC">&&</span><span class="NAME">a</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">overlaps</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">o.bounds</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this.min</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this.max</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">t.min</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">t.max</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">s.x</span><span class="PUNC">></span><span class="NAME">e.x</span><span class="PUNC">&&</span><span class="NAME">n.x</span><span class="PUNC">&lt;</span><span class="NAME">i.x</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">s.y</span><span class="PUNC">></span><span class="NAME">e.y</span><span class="PUNC">&&</span><span class="NAME">n.y</span><span class="PUNC">&lt;</span><span class="NAME">i.y</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">r</span><span class="PUNC">&&</span><span class="NAME">a</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">isValid</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">!</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.min</span><span class="PUNC">||</span><span class="PUNC">!</span><span class="NAME">this.max</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.bounds</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">!</span><span class="NAME">t</span><span class="PUNC">||</span><span class="NAME">t</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">o.Bounds</span><span class="PUNC">?</span><span class="NAME">t</span><span class="PUNC">:</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Bounds</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.Transformation</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._a</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">this._b</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">this._c</span><span class="PUNC">=</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">this._d</span><span class="PUNC">=</span><span class="NAME">n</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.Transformation.prototype</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">transform</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._transform</span><span class="PUNC">(</span><span class="NAME">t.clone</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_transform</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">||</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">t.x</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">*</span><span class="PUNC">(</span><span class="NAME">this._a</span><span class="PUNC">*</span><span class="NAME">t.x</span><span class="PUNC">+</span><span class="NAME">this._b</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t.y</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">*</span><span class="PUNC">(</span><span class="NAME">this._c</span><span class="PUNC">*</span><span class="NAME">t.y</span><span class="PUNC">+</span><span class="NAME">this._d</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">untransform</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">||</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Point</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">t.x</span><span class="PUNC">/</span><span class="NAME">e</span><span class="PUNC">-</span><span class="NAME">this._b</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NAME">this._a</span><span class="PUNC">,</span><span class="PUNC">(</span><span class="NAME">t.y</span><span class="PUNC">/</span><span class="NAME">e</span><span class="PUNC">-</span><span class="NAME">this._d</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NAME">this._c</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.DomUtil</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">get</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="STRN">"string"</span><span class="PUNC">==</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">?</span><span class="NAME">e.getElementById</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">t</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getStyle</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">t.style</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="NAME">t.currentStyle</span><span class="PUNC">&&</span><span class="NAME">t.currentStyle</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">n</span><span class="PUNC">||</span><span class="STRN">"auto"</span><span class="PUNC">===</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="NAME">e.defaultView</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">o</span><span class="PUNC">=</span><span class="NAME">e.defaultView.getComputedStyle</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">o</span><span class="PUNC">?</span><span class="NAME">o</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">:</span><span class="KEYW">null</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="STRN">"auto"</span><span class="PUNC">===</span><span class="NAME">n</span><span class="PUNC">?</span><span class="KEYW">null</span><span class="PUNC">:</span><span class="NAME">n</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">create</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">o</span><span class="PUNC">=</span><span class="NAME">e.createElement</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">o.className</span><span class="PUNC">=</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">&&</span><span class="NAME">n.appendChild</span><span class="PUNC">(</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">remove</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">t.parentNode</span><span class="PUNC">;</span><span class="NAME">e</span><span class="PUNC">&&</span><span class="NAME">e.removeChild</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">empty</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="PUNC">;</span><span class="NAME">t.firstChild</span><span class="PUNC">;</span><span class="PUNC">)</span><span class="NAME">t.removeChild</span><span class="PUNC">(</span><span class="NAME">t.firstChild</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">toFront</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">t.parentNode.appendChild</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">toBack</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">t.parentNode</span><span class="PUNC">;</span><span class="NAME">e.insertBefore</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e.firstChild</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">hasClass</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">t.classList</span><span class="PUNC">!==</span><span class="NAME">i</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t.classList.contains</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">o.DomUtil.getClass</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">n.length</span><span class="PUNC">></span><span class="NUMB">0</span><span class="PUNC">&&</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">RegExp</span><span class="PUNC">(</span><span class="STRN">"(^|\\s)"</span><span class="PUNC">+</span><span class="NAME">e</span><span class="PUNC">+</span><span class="STRN">"(\\s|$)"</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">test</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">addClass</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">t.classList</span><span class="PUNC">!==</span><span class="NAME">i</span><span class="PUNC">)</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">o.Util.splitWords</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">n.length</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">></span><span class="NAME">s</span><span class="PUNC">;</span><span class="NAME">s</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="NAME">t.classList.add</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">[</span><span class="NAME">s</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">o.DomUtil.hasClass</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">o.DomUtil.getClass</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">o.DomUtil.setClass</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">?</span><span class="NAME">a</span><span class="PUNC">+</span><span class="STRN">" "</span><span class="PUNC">:</span><span class="STRN">""</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">removeClass</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">t.classList</span><span class="PUNC">!==</span><span class="NAME">i</span><span class="PUNC">?</span><span class="NAME">t.classList.remove</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">o.DomUtil.setClass</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">o.Util.trim</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="STRN">" "</span><span class="PUNC">+</span><span class="NAME">o.DomUtil.getClass</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">" "</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">replace</span><span class="PUNC">(</span><span class="STRN">" "</span><span class="PUNC">+</span><span class="NAME">e</span><span class="PUNC">+</span><span class="STRN">" "</span><span class="PUNC">,</span><span class="STRN">" "</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">setClass</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">t.className.baseVal</span><span class="PUNC">===</span><span class="NAME">i</span><span class="PUNC">?</span><span class="NAME">t.className</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">:</span><span class="NAME">t.className.baseVal</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getClass</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t.className.baseVal</span><span class="PUNC">===</span><span class="NAME">i</span><span class="PUNC">?</span><span class="NAME">t.className</span><span class="PUNC">:</span><span class="NAME">t.className.baseVal</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">setOpacity</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="STRN">"opacity"</span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">t.style</span><span class="PUNC">?</span><span class="NAME">t.style.opacity</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">:</span><span class="STRN">"filter"</span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">t.style</span><span class="PUNC">&&</span><span class="NAME">o.DomUtil._setOpacityIE</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_setOpacityIE</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="STRN">"DXImageTransform.Microsoft.Alpha"</span><span class="PUNC">;</span><span class="KEYW">try</span><span class="PUNC">{</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">t.filters.item</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">catch</span><span class="PUNC">(</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">===</span><span class="NAME">e</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="PUNC">}</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">Math.round</span><span class="PUNC">(</span><span class="NUMB">100</span><span class="PUNC">*</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">?</span><span class="PUNC">(</span><span class="NAME">i.Enabled</span><span class="PUNC">=</span><span class="NUMB">100</span><span class="PUNC">!==</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i.Opacity</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">t.style.filter</span><span class="PUNC">+</span><span class="PUNC">=</span><span class="STRN">" progid:"</span><span class="PUNC">+</span><span class="NAME">n</span><span class="PUNC">+</span><span class="STRN">"(opacity="</span><span class="PUNC">+</span><span class="NAME">e</span><span class="PUNC">+</span><span class="STRN">")"</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">testProp</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">e.documentElement.style</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">n</span><span class="PUNC">&lt;</span><span class="NAME">t.length</span><span class="PUNC">;</span><span class="NAME">n</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NAME">n</span><span class="PUNC">]</span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">[</span><span class="NAME">n</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">setTransform</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">||</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Point</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">t.style</span><span class="PUNC">[</span><span class="NAME">o.DomUtil.TRANSFORM</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">o.Browser.ie3d</span><span class="PUNC">?</span><span class="STRN">"translate("</span><span class="PUNC">+</span><span class="NAME">n.x</span><span class="PUNC">+</span><span class="STRN">"px,"</span><span class="PUNC">+</span><span class="NAME">n.y</span><span class="PUNC">+</span><span class="STRN">"px)"</span><span class="PUNC">:</span><span class="STRN">"translate3d("</span><span class="PUNC">+</span><span class="NAME">n.x</span><span class="PUNC">+</span><span class="STRN">"px,"</span><span class="PUNC">+</span><span class="NAME">n.y</span><span class="PUNC">+</span><span class="STRN">"px,0)"</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">?</span><span class="STRN">" scale("</span><span class="PUNC">+</span><span class="NAME">i</span><span class="PUNC">+</span><span class="STRN">")"</span><span class="PUNC">:</span><span class="STRN">""</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">setPosition</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">t._leaflet_pos</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">o.Browser.any3d</span><span class="PUNC">?</span><span class="NAME">o.DomUtil.setTransform</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="PUNC">(</span><span class="NAME">t.style.left</span><span class="PUNC">=</span><span class="NAME">e.x</span><span class="PUNC">+</span><span class="STRN">"px"</span><span class="PUNC">,</span><span class="NAME">t.style.top</span><span class="PUNC">=</span><span class="NAME">e.y</span><span class="PUNC">+</span><span class="STRN">"px"</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getPosition</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t._leaflet_pos</span><span class="PUNC">||</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Point</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.DomUtil.TRANSFORM</span><span class="PUNC">=</span><span class="NAME">o.DomUtil.testProp</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="STRN">"transform"</span><span class="PUNC">,</span><span class="STRN">"WebkitTransform"</span><span class="PUNC">,</span><span class="STRN">"OTransform"</span><span class="PUNC">,</span><span class="STRN">"MozTransform"</span><span class="PUNC">,</span><span class="STRN">"msTransform"</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">o.DomUtil.TRANSITION</span><span class="PUNC">=</span><span class="NAME">o.DomUtil.testProp</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="STRN">"webkitTransition"</span><span class="PUNC">,</span><span class="STRN">"transition"</span><span class="PUNC">,</span><span class="STRN">"OTransition"</span><span class="PUNC">,</span><span class="STRN">"MozTransition"</span><span class="PUNC">,</span><span class="STRN">"msTransition"</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">o.DomUtil.TRANSITION_END</span><span class="PUNC">=</span><span class="STRN">"webkitTransition"</span><span class="PUNC">===</span><span class="NAME">i</span><span class="PUNC">||</span><span class="STRN">"OTransition"</span><span class="PUNC">===</span><span class="NAME">i</span><span class="PUNC">?</span><span class="NAME">i</span><span class="PUNC">+</span><span class="STRN">"End"</span><span class="PUNC">:</span><span class="STRN">"transitionend"</span><span class="PUNC">,</span><span class="STRN">"onselectstart"</span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">)</span><span class="NAME">o.DomUtil.disableTextSelection</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.DomEvent.on</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="STRN">"selectstart"</span><span class="PUNC">,</span><span class="NAME">o.DomEvent.preventDefault</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.DomUtil.enableTextSelection</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.DomEvent.off</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="STRN">"selectstart"</span><span class="PUNC">,</span><span class="NAME">o.DomEvent.preventDefault</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">o.DomUtil.testProp</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="STRN">"userSelect"</span><span class="PUNC">,</span><span class="STRN">"WebkitUserSelect"</span><span class="PUNC">,</span><span class="STRN">"OUserSelect"</span><span class="PUNC">,</span><span class="STRN">"MozUserSelect"</span><span class="PUNC">,</span><span class="STRN">"msUserSelect"</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">o.DomUtil.disableTextSelection</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">e.documentElement.style</span><span class="PUNC">;</span><span class="NAME">this._userSelect</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NAME">n</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NAME">n</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="STRN">"none"</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.DomUtil.enableTextSelection</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">n</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">e.documentElement.style</span><span class="PUNC">[</span><span class="NAME">n</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">this._userSelect</span><span class="PUNC">,</span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">this._userSelect</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="NAME">o.DomUtil.disableImageDrag</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.DomEvent.on</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="STRN">"dragstart"</span><span class="PUNC">,</span><span class="NAME">o.DomEvent.preventDefault</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.DomUtil.enableImageDrag</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.DomEvent.off</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="STRN">"dragstart"</span><span class="PUNC">,</span><span class="NAME">o.DomEvent.preventDefault</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.DomUtil.preventOutline</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="PUNC">;</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">===</span><span class="NAME">e.tabIndex</span><span class="PUNC">;</span><span class="PUNC">)</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">e.parentNode</span><span class="PUNC">;</span><span class="NAME">e</span><span class="PUNC">&&</span><span class="NAME">e.style</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">o.DomUtil.restoreOutline</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._outlineElement</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">this._outlineStyle</span><span class="PUNC">=</span><span class="NAME">e.style.outline</span><span class="PUNC">,</span><span class="NAME">e.style.outline</span><span class="PUNC">=</span><span class="STRN">"none"</span><span class="PUNC">,</span><span class="NAME">o.DomEvent.on</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="STRN">"keydown"</span><span class="PUNC">,</span><span class="NAME">o.DomUtil.restoreOutline</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.DomUtil.restoreOutline</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._outlineElement</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">this._outlineElement.style.outline</span><span class="PUNC">=</span><span class="NAME">this._outlineStyle</span><span class="PUNC">,</span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">this._outlineElement</span><span class="PUNC">,</span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">this._outlineStyle</span><span class="PUNC">,</span><span class="NAME">o.DomEvent.off</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="STRN">"keydown"</span><span class="PUNC">,</span><span class="NAME">o.DomUtil.restoreOutline</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.LatLng</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">isNaN</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="NAME">isNaN</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Error</span><span class="PUNC">(</span><span class="STRN">"Invalid LatLng object: ("</span><span class="PUNC">+</span><span class="NAME">t</span><span class="PUNC">+</span><span class="STRN">", "</span><span class="PUNC">+</span><span class="NAME">e</span><span class="PUNC">+</span><span class="STRN">")"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.lat</span><span class="PUNC">=</span><span class="PUNC">+</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">this.lng</span><span class="PUNC">=</span><span class="PUNC">+</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">!==</span><span class="NAME">i</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">this.alt</span><span class="PUNC">=</span><span class="PUNC">+</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.LatLng.prototype</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">equals</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">t</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">o.latLng</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">this.lat</span><span class="PUNC">-</span><span class="NAME">t.lat</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">this.lng</span><span class="PUNC">-</span><span class="NAME">t.lng</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">===</span><span class="NAME">i</span><span class="PUNC">?</span><span class="NUMB">1</span><span class="NAME">e</span><span class="PUNC">-</span><span class="NUMB">9</span><span class="PUNC">:</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">>=</span><span class="NAME">n</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">toString</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="STRN">"LatLng("</span><span class="PUNC">+</span><span class="NAME">o.Util.formatNum</span><span class="PUNC">(</span><span class="NAME">this.lat</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">", "</span><span class="PUNC">+</span><span class="NAME">o.Util.formatNum</span><span class="PUNC">(</span><span class="NAME">this.lng</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">")"</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">distanceTo</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">o.CRS.Earth.distance</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">o.latLng</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">wrap</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">o.CRS.Earth.wrapLatLng</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">toBounds</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NUMB">180</span><span class="PUNC">*</span><span class="NAME">t</span><span class="PUNC">/</span><span class="NUMB">40075017</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">/</span><span class="NAME">Math.cos</span><span class="PUNC">(</span><span class="NAME">Math.PI</span><span class="PUNC">/</span><span class="NUMB">180</span><span class="PUNC">*</span><span class="NAME">this.lat</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">o.latLngBounds</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="NAME">this.lat</span><span class="PUNC">-</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">this.lng</span><span class="PUNC">-</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">this.lat</span><span class="PUNC">+</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">this.lng</span><span class="PUNC">+</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">clone</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.LatLng</span><span class="PUNC">(</span><span class="NAME">this.lat</span><span class="PUNC">,</span><span class="NAME">this.lng</span><span class="PUNC">,</span><span class="NAME">this.alt</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.latLng</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">o.LatLng</span><span class="PUNC">?</span><span class="NAME">t</span><span class="PUNC">:</span><span class="NAME">o.Util.isArray</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="STRN">"object"</span><span class="PUNC">!=</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">?</span><span class="NUMB">3</span><span class="PUNC">===</span><span class="NAME">t.length</span><span class="PUNC">?</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.LatLng</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NUMB">2</span><span class="PUNC">===</span><span class="NAME">t.length</span><span class="PUNC">?</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.LatLng</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="KEYW">null</span><span class="PUNC">:</span><span class="NAME">t</span><span class="PUNC">===</span><span class="NAME">i</span><span class="PUNC">||</span><span class="KEYW">null</span><span class="PUNC">===</span><span class="NAME">t</span><span class="PUNC">?</span><span class="NAME">t</span><span class="PUNC">:</span><span class="STRN">"object"</span><span class="PUNC">==</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">&&</span><span class="STRN">"lat"</span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">?</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.LatLng</span><span class="PUNC">(</span><span class="NAME">t.lat</span><span class="PUNC">,</span><span class="STRN">"lng"</span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">?</span><span class="NAME">t.lng</span><span class="PUNC">:</span><span class="NAME">t.lon</span><span class="PUNC">,</span><span class="NAME">t.alt</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">e</span><span class="PUNC">===</span><span class="NAME">i</span><span class="PUNC">?</span><span class="KEYW">null</span><span class="PUNC">:</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.LatLng</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.LatLngBounds</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">?</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">:</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">=</span><span class="NAME">i.length</span><span class="PUNC">;</span><span class="NAME">o</span><span class="PUNC">></span><span class="NAME">n</span><span class="PUNC">;</span><span class="NAME">n</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="NAME">this.extend</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">[</span><span class="NAME">n</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.LatLngBounds.prototype</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">extend</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">this._southWest</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">this._northEast</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">t</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">o.LatLng</span><span class="PUNC">)</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">;</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="PUNC">(</span><span class="NAME">t</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">o.LatLngBounds</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">?</span><span class="NAME">this.extend</span><span class="PUNC">(</span><span class="NAME">o.latLng</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="NAME">o.latLngBounds</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="KEYW">this</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">t._southWest</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">t._northEast</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NAME">e</span><span class="PUNC">||</span><span class="PUNC">!</span><span class="NAME">i</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">||</span><span class="NAME">s</span><span class="PUNC">?</span><span class="PUNC">(</span><span class="NAME">n.lat</span><span class="PUNC">=</span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NAME">e.lat</span><span class="PUNC">,</span><span class="NAME">n.lat</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n.lng</span><span class="PUNC">=</span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NAME">e.lng</span><span class="PUNC">,</span><span class="NAME">n.lng</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s.lat</span><span class="PUNC">=</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">i.lat</span><span class="PUNC">,</span><span class="NAME">s.lat</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s.lng</span><span class="PUNC">=</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">i.lng</span><span class="PUNC">,</span><span class="NAME">s.lng</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="PUNC">(</span><span class="NAME">this._southWest</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.LatLng</span><span class="PUNC">(</span><span class="NAME">e.lat</span><span class="PUNC">,</span><span class="NAME">e.lng</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._northEast</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.LatLng</span><span class="PUNC">(</span><span class="NAME">i.lat</span><span class="PUNC">,</span><span class="NAME">i.lng</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">pad</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this._southWest</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this._northEast</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">e.lat</span><span class="PUNC">-</span><span class="NAME">i.lat</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">e.lng</span><span class="PUNC">-</span><span class="NAME">i.lng</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NAME">t</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.LatLngBounds</span><span class="PUNC">(</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.LatLng</span><span class="PUNC">(</span><span class="NAME">e.lat</span><span class="PUNC">-</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">e.lng</span><span class="PUNC">-</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.LatLng</span><span class="PUNC">(</span><span class="NAME">i.lat</span><span class="PUNC">+</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">i.lng</span><span class="PUNC">+</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getCenter</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.LatLng</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">this._southWest.lat</span><span class="PUNC">+</span><span class="NAME">this._northEast.lat</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">,</span><span class="PUNC">(</span><span class="NAME">this._southWest.lng</span><span class="PUNC">+</span><span class="NAME">this._northEast.lng</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getSouthWest</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._southWest</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getNorthEast</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._northEast</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getNorthWest</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.LatLng</span><span class="PUNC">(</span><span class="NAME">this.getNorth</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.getWest</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getSouthEast</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.LatLng</span><span class="PUNC">(</span><span class="NAME">this.getSouth</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.getEast</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getWest</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._southWest.lng</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getSouth</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._southWest.lat</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getEast</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._northEast.lng</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getNorth</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._northEast.lat</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">contains</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">t</span><span class="PUNC">=</span><span class="STRN">"number"</span><span class="PUNC">==</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="NAME">t</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">o.LatLng</span><span class="PUNC">?</span><span class="NAME">o.latLng</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">o.latLngBounds</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">this._southWest</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">this._northEast</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">o.LatLngBounds</span><span class="PUNC">?</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">t.getSouthWest</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">t.getNorthEast</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e.lat</span><span class="PUNC">>=</span><span class="NAME">n.lat</span><span class="PUNC">&&</span><span class="NAME">i.lat</span><span class="PUNC">&lt;=</span><span class="NAME">s.lat</span><span class="PUNC">&&</span><span class="NAME">e.lng</span><span class="PUNC">>=</span><span class="NAME">n.lng</span><span class="PUNC">&&</span><span class="NAME">i.lng</span><span class="PUNC">&lt;=</span><span class="NAME">s.lng</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">intersects</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">o.latLngBounds</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this._southWest</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this._northEast</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">t.getSouthWest</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">t.getNorthEast</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">s.lat</span><span class="PUNC">>=</span><span class="NAME">e.lat</span><span class="PUNC">&&</span><span class="NAME">n.lat</span><span class="PUNC">&lt;=</span><span class="NAME">i.lat</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">s.lng</span><span class="PUNC">>=</span><span class="NAME">e.lng</span><span class="PUNC">&&</span><span class="NAME">n.lng</span><span class="PUNC">&lt;=</span><span class="NAME">i.lng</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">r</span><span class="PUNC">&&</span><span class="NAME">a</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">overlaps</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">o.latLngBounds</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this._southWest</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this._northEast</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">t.getSouthWest</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">t.getNorthEast</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">s.lat</span><span class="PUNC">></span><span class="NAME">e.lat</span><span class="PUNC">&&</span><span class="NAME">n.lat</span><span class="PUNC">&lt;</span><span class="NAME">i.lat</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">s.lng</span><span class="PUNC">></span><span class="NAME">e.lng</span><span class="PUNC">&&</span><span class="NAME">n.lng</span><span class="PUNC">&lt;</span><span class="NAME">i.lng</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">r</span><span class="PUNC">&&</span><span class="NAME">a</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">toBBoxString</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="NAME">this.getWest</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.getSouth</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.getEast</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.getNorth</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">join</span><span class="PUNC">(</span><span class="STRN">","</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">equals</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">?</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">o.latLngBounds</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._southWest.equals</span><span class="PUNC">(</span><span class="NAME">t.getSouthWest</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="NAME">this._northEast.equals</span><span class="PUNC">(</span><span class="NAME">t.getNorthEast</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">isValid</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">!</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this._southWest</span><span class="PUNC">||</span><span class="PUNC">!</span><span class="NAME">this._northEast</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.latLngBounds</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">o.LatLngBounds</span><span class="PUNC">?</span><span class="NAME">t</span><span class="PUNC">:</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.LatLngBounds</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.Projection</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.Projection.LonLat</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">project</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Point</span><span class="PUNC">(</span><span class="NAME">t.lng</span><span class="PUNC">,</span><span class="NAME">t.lat</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">unproject</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.LatLng</span><span class="PUNC">(</span><span class="NAME">t.y</span><span class="PUNC">,</span><span class="NAME">t.x</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">bounds</span><span class="PUNC">:</span><span class="NAME">o.bounds</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="PUNC">-</span><span class="NUMB">180</span><span class="PUNC">,</span><span class="PUNC">-</span><span class="NUMB">90</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NUMB">180</span><span class="PUNC">,</span><span class="NUMB">90</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.Projection.SphericalMercator</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">R</span><span class="PUNC">:</span><span class="NUMB">6378137</span><span class="PUNC">,</span><span class="NAME">MAX_LATITUDE</span><span class="PUNC">:</span><span class="NUMB">85.0511287798</span><span class="PUNC">,</span><span class="NAME">project</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">Math.PI</span><span class="PUNC">/</span><span class="NUMB">180</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this.MAX_LATITUDE</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">t.lat</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="PUNC">-</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">Math.sin</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">*</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Point</span><span class="PUNC">(</span><span class="NAME">this.R</span><span class="PUNC">*</span><span class="NAME">t.lng</span><span class="PUNC">*</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">this.R</span><span class="PUNC">*</span><span class="NAME">Math.log</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">+</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">-</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">unproject</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NUMB">180</span><span class="PUNC">/</span><span class="NAME">Math.PI</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.LatLng</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NUMB">2</span><span class="PUNC">*</span><span class="NAME">Math.atan</span><span class="PUNC">(</span><span class="NAME">Math.exp</span><span class="PUNC">(</span><span class="NAME">t.y</span><span class="PUNC">/</span><span class="NAME">this.R</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">-</span><span class="NAME">Math.PI</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">t.x</span><span class="PUNC">*</span><span class="NAME">e</span><span class="PUNC">/</span><span class="NAME">this.R</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">bounds</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NUMB">6378137</span><span class="PUNC">*</span><span class="NAME">Math.PI</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">o.bounds</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="PUNC">-</span><span class="NAME">t</span><span class="PUNC">,</span><span class="PUNC">-</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.CRS</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">latLngToPoint</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this.projection.project</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">this.scale</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.transformation._transform</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">pointToLatLng</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this.scale</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">this.transformation.untransform</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.projection.unproject</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">project</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.projection.project</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">unproject</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.projection.unproject</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">scale</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NUMB">256</span><span class="PUNC">*</span><span class="NAME">Math.pow</span><span class="PUNC">(</span><span class="NUMB">2</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">zoom</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">Math.log</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">/</span><span class="NUMB">256</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NAME">Math.LN2</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getProjectedBounds</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.infinite</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this.projection.bounds</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this.scale</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">this.transformation.transform</span><span class="PUNC">(</span><span class="NAME">e.min</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">this.transformation.transform</span><span class="PUNC">(</span><span class="NAME">e.max</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">o.bounds</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">infinite</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">wrapLatLng</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this.wrapLng</span><span class="PUNC">?</span><span class="NAME">o.Util.wrapNum</span><span class="PUNC">(</span><span class="NAME">t.lng</span><span class="PUNC">,</span><span class="NAME">this.wrapLng</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">t.lng</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this.wrapLat</span><span class="PUNC">?</span><span class="NAME">o.Util.wrapNum</span><span class="PUNC">(</span><span class="NAME">t.lat</span><span class="PUNC">,</span><span class="NAME">this.wrapLat</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">t.lat</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">t.alt</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">o.latLng</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.CRS.Simple</span><span class="PUNC">=</span><span class="NAME">o.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.CRS</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">projection</span><span class="PUNC">:</span><span class="NAME">o.Projection.LonLat</span><span class="PUNC">,</span><span class="NAME">transformation</span><span class="PUNC">:</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Transformation</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">scale</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">Math.pow</span><span class="PUNC">(</span><span class="NUMB">2</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">zoom</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">Math.log</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NAME">Math.LN2</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">distance</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">e.lng</span><span class="PUNC">-</span><span class="NAME">t.lng</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">e.lat</span><span class="PUNC">-</span><span class="NAME">t.lat</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">Math.sqrt</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">*</span><span class="NAME">i</span><span class="PUNC">+</span><span class="NAME">n</span><span class="PUNC">*</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">infinite</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.CRS.Earth</span><span class="PUNC">=</span><span class="NAME">o.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.CRS</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">wrapLng</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="PUNC">-</span><span class="NUMB">180</span><span class="PUNC">,</span><span class="NUMB">180</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">R</span><span class="PUNC">:</span><span class="NUMB">6371</span><span class="NAME">e3</span><span class="PUNC">,</span><span class="NAME">distance</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">Math.PI</span><span class="PUNC">/</span><span class="NUMB">180</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">t.lat</span><span class="PUNC">*</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">=</span><span class="NAME">e.lat</span><span class="PUNC">*</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">Math.sin</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NAME">Math.sin</span><span class="PUNC">(</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="NAME">Math.cos</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NAME">Math.cos</span><span class="PUNC">(</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NAME">Math.cos</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">e.lng</span><span class="PUNC">-</span><span class="NAME">t.lng</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.R</span><span class="PUNC">*</span><span class="NAME">Math.acos</span><span class="PUNC">(</span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.CRS.EPSG3857</span><span class="PUNC">=</span><span class="NAME">o.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.CRS.Earth</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">code</span><span class="PUNC">:</span><span class="STRN">"EPSG:3857"</span><span class="PUNC">,</span><span class="NAME">projection</span><span class="PUNC">:</span><span class="NAME">o.Projection.SphericalMercator</span><span class="PUNC">,</span><span class="NAME">transformation</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="PUNC">.</span><span class="NUMB">5</span><span class="PUNC">/</span><span class="PUNC">(</span><span class="NAME">Math.PI</span><span class="PUNC">*</span><span class="NAME">o.Projection.SphericalMercator.R</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Transformation</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="PUNC">.</span><span class="NUMB">5</span><span class="PUNC">,</span><span class="PUNC">-</span><span class="NAME">t</span><span class="PUNC">,</span><span class="PUNC">.</span><span class="NUMB">5</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.CRS.EPSG900913</span><span class="PUNC">=</span><span class="NAME">o.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.CRS.EPSG3857</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">code</span><span class="PUNC">:</span><span class="STRN">"EPSG:900913"</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.CRS.EPSG4326</span><span class="PUNC">=</span><span class="NAME">o.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.CRS.Earth</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">code</span><span class="PUNC">:</span><span class="STRN">"EPSG:4326"</span><span class="PUNC">,</span><span class="NAME">projection</span><span class="PUNC">:</span><span class="NAME">o.Projection.LonLat</span><span class="PUNC">,</span><span class="NAME">transformation</span><span class="PUNC">:</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Transformation</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">/</span><span class="NUMB">180</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">/</span><span class="NUMB">180</span><span class="PUNC">,</span><span class="PUNC">.</span><span class="NUMB">5</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Map</span><span class="PUNC">=</span><span class="NAME">o.Evented.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">options</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="NAME">crs</span><span class="PUNC">:</span><span class="NAME">o.CRS.EPSG3857</span><span class="PUNC">,</span><span class="NAME">center</span><span class="PUNC">:</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">zoom</span><span class="PUNC">:</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">minZoom</span><span class="PUNC">:</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">maxZoom</span><span class="PUNC">:</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">layers</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">maxBounds</span><span class="PUNC">:</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">renderer</span><span class="PUNC">:</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">fadeAnimation</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">markerZoomAnimation</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">transform3DLimit</span><span class="PUNC">:</span><span class="NUMB">8388608</span><span class="PUNC">,</span><span class="NAME">zoomSnap</span><span class="PUNC">:</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">zoomDelta</span><span class="PUNC">:</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">trackResize</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">initialize</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">o.setOptions</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._initContainer</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._initLayout</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._onResize</span><span class="PUNC">=</span><span class="NAME">o.bind</span><span class="PUNC">(</span><span class="NAME">this._onResize</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._initEvents</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e.maxBounds</span><span class="PUNC">&&</span><span class="NAME">this.setMaxBounds</span><span class="PUNC">(</span><span class="NAME">e.maxBounds</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e.zoom</span><span class="PUNC">!==</span><span class="NAME">i</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">this._zoom</span><span class="PUNC">=</span><span class="NAME">this._limitZoom</span><span class="PUNC">(</span><span class="NAME">e.zoom</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e.center</span><span class="PUNC">&&</span><span class="NAME">e.zoom</span><span class="PUNC">!==</span><span class="NAME">i</span><span class="PUNC">&&</span><span class="NAME">this.setView</span><span class="PUNC">(</span><span class="NAME">o.latLng</span><span class="PUNC">(</span><span class="NAME">e.center</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e.zoom</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">reset</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._handlers</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">this._layers</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">this._zoomBoundLayers</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">this._sizeChanged</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">this.callInitHooks</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._addLayers</span><span class="PUNC">(</span><span class="NAME">this.options.layers</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">setView</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">===</span><span class="NAME">i</span><span class="PUNC">?</span><span class="NAME">this.getZoom</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">this._resetView</span><span class="PUNC">(</span><span class="NAME">o.latLng</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">setZoom</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._loaded</span><span class="PUNC">?</span><span class="NAME">this.setView</span><span class="PUNC">(</span><span class="NAME">this.getCenter</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">zoom</span><span class="PUNC">:</span><span class="NAME">e</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="PUNC">(</span><span class="NAME">this._zoom</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">zoomIn</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">o.Browser.any3d</span><span class="PUNC">?</span><span class="NAME">this.options.zoomDelta</span><span class="PUNC">:</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.setZoom</span><span class="PUNC">(</span><span class="NAME">this._zoom</span><span class="PUNC">+</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">zoomOut</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">o.Browser.any3d</span><span class="PUNC">?</span><span class="NAME">this.options.zoomDelta</span><span class="PUNC">:</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.setZoom</span><span class="PUNC">(</span><span class="NAME">this._zoom</span><span class="PUNC">-</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">setZoomAround</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">this.getZoomScale</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">this.getSize</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">divideBy</span><span class="PUNC">(</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">t</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">o.Point</span><span class="PUNC">?</span><span class="NAME">t</span><span class="PUNC">:</span><span class="NAME">this.latLngToContainerPoint</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">r.subtract</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">multiplyBy</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">/</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">=</span><span class="NAME">this.containerPointToLatLng</span><span class="PUNC">(</span><span class="NAME">s.add</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.setView</span><span class="PUNC">(</span><span class="NAME">h</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">zoom</span><span class="PUNC">:</span><span class="NAME">i</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_getBoundsCenterZoom</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">||</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">t.getBounds</span><span class="PUNC">?</span><span class="NAME">t.getBounds</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">o.latLngBounds</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">o.point</span><span class="PUNC">(</span><span class="NAME">e.paddingTopLeft</span><span class="PUNC">||</span><span class="NAME">e.padding</span><span class="PUNC">||</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">o.point</span><span class="PUNC">(</span><span class="NAME">e.paddingBottomRight</span><span class="PUNC">||</span><span class="NAME">e.padding</span><span class="PUNC">||</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">this.getBoundsZoom</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">i.add</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">s</span><span class="PUNC">=</span><span class="STRN">"number"</span><span class="PUNC">==</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">e.maxZoom</span><span class="PUNC">?</span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NAME">e.maxZoom</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">s</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">n.subtract</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">divideBy</span><span class="PUNC">(</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">this.project</span><span class="PUNC">(</span><span class="NAME">t.getSouthWest</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">=</span><span class="NAME">this.project</span><span class="PUNC">(</span><span class="NAME">t.getNorthEast</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">=</span><span class="NAME">this.unproject</span><span class="PUNC">(</span><span class="NAME">a.add</span><span class="PUNC">(</span><span class="NAME">h</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">divideBy</span><span class="PUNC">(</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">add</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="PUNC">{</span><span class="NAME">center</span><span class="PUNC">:</span><span class="NAME">l</span><span class="PUNC">,</span><span class="NAME">zoom</span><span class="PUNC">:</span><span class="NAME">s</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">fitBounds</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">o.latLngBounds</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NAME">t.isValid</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Error</span><span class="PUNC">(</span><span class="STRN">"Bounds are not valid."</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this._getBoundsCenterZoom</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.setView</span><span class="PUNC">(</span><span class="NAME">i.center</span><span class="PUNC">,</span><span class="NAME">i.zoom</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">fitWorld</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.fitBounds</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="PUNC">[</span><span class="PUNC">-</span><span class="NUMB">90</span><span class="PUNC">,</span><span class="PUNC">-</span><span class="NUMB">180</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NUMB">90</span><span class="PUNC">,</span><span class="NUMB">180</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">panTo</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.setView</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">this._zoom</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">pan</span><span class="PUNC">:</span><span class="NAME">e</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">panBy</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.fire</span><span class="PUNC">(</span><span class="STRN">"movestart"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._rawPanBy</span><span class="PUNC">(</span><span class="NAME">o.point</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.fire</span><span class="PUNC">(</span><span class="STRN">"move"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.fire</span><span class="PUNC">(</span><span class="STRN">"moveend"</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">setMaxBounds</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">o.latLngBounds</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="PUNC">(</span><span class="NAME">this.options.maxBounds</span><span class="PUNC">&&</span><span class="NAME">this.off</span><span class="PUNC">(</span><span class="STRN">"moveend"</span><span class="PUNC">,</span><span class="NAME">this._panInsideMaxBounds</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.options.maxBounds</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">this._loaded</span><span class="PUNC">&&</span><span class="NAME">this._panInsideMaxBounds</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.on</span><span class="PUNC">(</span><span class="STRN">"moveend"</span><span class="PUNC">,</span><span class="NAME">this._panInsideMaxBounds</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">this.off</span><span class="PUNC">(</span><span class="STRN">"moveend"</span><span class="PUNC">,</span><span class="NAME">this._panInsideMaxBounds</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">setMinZoom</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.options.minZoom</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">this._loaded</span><span class="PUNC">&&</span><span class="NAME">this.getZoom</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">&lt;</span><span class="NAME">this.options.minZoom</span><span class="PUNC">?</span><span class="NAME">this.setZoom</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">setMaxZoom</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.options.maxZoom</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">this._loaded</span><span class="PUNC">&&</span><span class="NAME">this.getZoom</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">></span><span class="NAME">this.options.maxZoom</span><span class="PUNC">?</span><span class="NAME">this.setZoom</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">panInsideBounds</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._enforcingBounds</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this.getCenter</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">this._limitCenter</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">this._zoom</span><span class="PUNC">,</span><span class="NAME">o.latLngBounds</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">i.equals</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="NAME">this.panTo</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._enforcingBounds</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">invalidateSize</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this._loaded</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">;</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">o.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">animate</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">pan</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">===</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">?</span><span class="PUNC">{</span><span class="NAME">animate</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">}</span><span class="PUNC">:</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this.getSize</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this._sizeChanged</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">this._lastCenter</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this.getSize</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">e.divideBy</span><span class="PUNC">(</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">round</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">i.divideBy</span><span class="PUNC">(</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">round</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">n.subtract</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">r.x</span><span class="PUNC">||</span><span class="NAME">r.y</span><span class="PUNC">?</span><span class="PUNC">(</span><span class="NAME">t.animate</span><span class="PUNC">&&</span><span class="NAME">t.pan</span><span class="PUNC">?</span><span class="NAME">this.panBy</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="PUNC">(</span><span class="NAME">t.pan</span><span class="PUNC">&&</span><span class="NAME">this._rawPanBy</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.fire</span><span class="PUNC">(</span><span class="STRN">"move"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t.debounceMoveend</span><span class="PUNC">?</span><span class="PUNC">(</span><span class="NAME">clearTimeout</span><span class="PUNC">(</span><span class="NAME">this._sizeTimer</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._sizeTimer</span><span class="PUNC">=</span><span class="NAME">setTimeout</span><span class="PUNC">(</span><span class="NAME">o.bind</span><span class="PUNC">(</span><span class="NAME">this.fire</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="STRN">"moveend"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NUMB">200</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">this.fire</span><span class="PUNC">(</span><span class="STRN">"moveend"</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.fire</span><span class="PUNC">(</span><span class="STRN">"resize"</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">oldSize</span><span class="PUNC">:</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">newSize</span><span class="PUNC">:</span><span class="NAME">i</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">stop</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.setZoom</span><span class="PUNC">(</span><span class="NAME">this._limitZoom</span><span class="PUNC">(</span><span class="NAME">this._zoom</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.options.zoomSnap</span><span class="PUNC">||</span><span class="NAME">this.fire</span><span class="PUNC">(</span><span class="STRN">"viewreset"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._stop</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">addHandler</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">e</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._handlers.push</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.options</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">&&</span><span class="NAME">i.enable</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">remove</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._initEvents</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">try</span><span class="PUNC">{</span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">this._container._leaflet</span><span class="PUNC">}</span><span class="KEYW">catch</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._container._leaflet</span><span class="PUNC">=</span><span class="NAME">i</span><span class="PUNC">}</span><span class="NAME">o.DomUtil.remove</span><span class="PUNC">(</span><span class="NAME">this._mapPane</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._clearControlPos</span><span class="PUNC">&&</span><span class="NAME">this._clearControlPos</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._clearHandlers</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._loaded</span><span class="PUNC">&&</span><span class="NAME">this.fire</span><span class="PUNC">(</span><span class="STRN">"unload"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">this._layers</span><span class="PUNC">)</span><span class="NAME">this._layers</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">remove</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">createPane</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="STRN">"leaflet-pane"</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">?</span><span class="STRN">" leaflet-"</span><span class="PUNC">+</span><span class="NAME">t.replace</span><span class="PUNC">(</span><span class="STRN">"Pane"</span><span class="PUNC">,</span><span class="STRN">""</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">"-pane"</span><span class="PUNC">:</span><span class="STRN">""</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">o.DomUtil.create</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">||</span><span class="NAME">this._mapPane</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">this._panes</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getCenter</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._checkIfLoaded</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._lastCenter</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">this._moved</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="NAME">this._lastCenter</span><span class="PUNC">:</span><span class="NAME">this.layerPointToLatLng</span><span class="PUNC">(</span><span class="NAME">this._getCenterLayerPoint</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getZoom</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._zoom</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getBounds</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">this.getPixelBounds</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this.unproject</span><span class="PUNC">(</span><span class="NAME">t.getBottomLeft</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this.unproject</span><span class="PUNC">(</span><span class="NAME">t.getTopRight</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.LatLngBounds</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getMinZoom</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.options.minZoom</span><span class="PUNC">===</span><span class="NAME">i</span><span class="PUNC">?</span><span class="NAME">this._layersMinZoom</span><span class="PUNC">||</span><span class="NUMB">0</span><span class="PUNC">:</span><span class="NAME">this.options.minZoom</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getMaxZoom</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.options.maxZoom</span><span class="PUNC">===</span><span class="NAME">i</span><span class="PUNC">?</span><span class="NAME">this._layersMaxZoom</span><span class="PUNC">===</span><span class="NAME">i</span><span class="PUNC">?</span><span class="NUMB">1</span><span class="PUNC">/</span><span class="NUMB">0</span><span class="PUNC">:</span><span class="NAME">this._layersMaxZoom</span><span class="PUNC">:</span><span class="NAME">this.options.maxZoom</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getBoundsZoom</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">o.latLngBounds</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">o.point</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">||</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">this.getZoom</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">this.getMinZoom</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">this.getMaxZoom</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">t.getNorthWest</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">=</span><span class="NAME">t.getSouthEast</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">=</span><span class="NAME">this.getSize</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">=</span><span class="NAME">this.project</span><span class="PUNC">(</span><span class="NAME">h</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">subtract</span><span class="PUNC">(</span><span class="NAME">this.project</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">add</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">c</span><span class="PUNC">=</span><span class="NAME">o.Browser.any3d</span><span class="PUNC">?</span><span class="NAME">this.options.zoomSnap</span><span class="PUNC">:</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">d</span><span class="PUNC">=</span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NAME">l.x</span><span class="PUNC">/</span><span class="NAME">u.x</span><span class="PUNC">,</span><span class="NAME">l.y</span><span class="PUNC">/</span><span class="NAME">u.y</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">this.getScaleZoom</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">c</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">Math.round</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">/</span><span class="PUNC">(</span><span class="NAME">c</span><span class="PUNC">/</span><span class="NUMB">100</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="PUNC">(</span><span class="NAME">c</span><span class="PUNC">/</span><span class="NUMB">100</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">?</span><span class="NAME">Math.ceil</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">/</span><span class="NAME">c</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NAME">c</span><span class="PUNC">:</span><span class="NAME">Math.floor</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">/</span><span class="NAME">c</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NAME">c</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getSize</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._size</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">this._sizeChanged</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">this._size</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Point</span><span class="PUNC">(</span><span class="NAME">this._container.clientWidth</span><span class="PUNC">,</span><span class="NAME">this._container.clientHeight</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._sizeChanged</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._size.clone</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getPixelBounds</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this._getTopLeftPoint</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Bounds</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">i.add</span><span class="PUNC">(</span><span class="NAME">this.getSize</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getPixelOrigin</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._checkIfLoaded</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._pixelOrigin</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getPixelWorldBounds</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.options.crs.getProjectedBounds</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">===</span><span class="NAME">i</span><span class="PUNC">?</span><span class="NAME">this.getZoom</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getPane</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="STRN">"string"</span><span class="PUNC">==</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">?</span><span class="NAME">this._panes</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">:</span><span class="NAME">t</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getPanes</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._panes</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getContainer</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._container</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getZoomScale</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">this.options.crs</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">===</span><span class="NAME">i</span><span class="PUNC">?</span><span class="NAME">this._zoom</span><span class="PUNC">:</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">n.scale</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NAME">n.scale</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getScaleZoom</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">this.options.crs</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">===</span><span class="NAME">i</span><span class="PUNC">?</span><span class="NAME">this._zoom</span><span class="PUNC">:</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">n.zoom</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">*</span><span class="NAME">n.scale</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">project</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">===</span><span class="NAME">i</span><span class="PUNC">?</span><span class="NAME">this._zoom</span><span class="PUNC">:</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">this.options.crs.latLngToPoint</span><span class="PUNC">(</span><span class="NAME">o.latLng</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">unproject</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">===</span><span class="NAME">i</span><span class="PUNC">?</span><span class="NAME">this._zoom</span><span class="PUNC">:</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">this.options.crs.pointToLatLng</span><span class="PUNC">(</span><span class="NAME">o.point</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">layerPointToLatLng</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">o.point</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">add</span><span class="PUNC">(</span><span class="NAME">this.getPixelOrigin</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.unproject</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">latLngToLayerPoint</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this.project</span><span class="PUNC">(</span><span class="NAME">o.latLng</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">_round</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">e._subtract</span><span class="PUNC">(</span><span class="NAME">this.getPixelOrigin</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">wrapLatLng</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.options.crs.wrapLatLng</span><span class="PUNC">(</span><span class="NAME">o.latLng</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">distance</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.options.crs.distance</span><span class="PUNC">(</span><span class="NAME">o.latLng</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.latLng</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">containerPointToLayerPoint</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">o.point</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">subtract</span><span class="PUNC">(</span><span class="NAME">this._getMapPanePos</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">layerPointToContainerPoint</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">o.point</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">add</span><span class="PUNC">(</span><span class="NAME">this._getMapPanePos</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">containerPointToLatLng</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this.containerPointToLayerPoint</span><span class="PUNC">(</span><span class="NAME">o.point</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.layerPointToLatLng</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">latLngToContainerPoint</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.layerPointToContainerPoint</span><span class="PUNC">(</span><span class="NAME">this.latLngToLayerPoint</span><span class="PUNC">(</span><span class="NAME">o.latLng</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">mouseEventToContainerPoint</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">o.DomEvent.getMousePosition</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">this._container</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">mouseEventToLayerPoint</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.containerPointToLayerPoint</span><span class="PUNC">(</span><span class="NAME">this.mouseEventToContainerPoint</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">mouseEventToLatLng</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.layerPointToLatLng</span><span class="PUNC">(</span><span class="NAME">this.mouseEventToLayerPoint</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_initContainer</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this._container</span><span class="PUNC">=</span><span class="NAME">o.DomUtil.get</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">e</span><span class="PUNC">)</span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Error</span><span class="PUNC">(</span><span class="STRN">"Map container not found."</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">e._leaflet</span><span class="PUNC">)</span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Error</span><span class="PUNC">(</span><span class="STRN">"Map container is already initialized."</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">o.DomEvent.addListener</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="STRN">"scroll"</span><span class="PUNC">,</span><span class="NAME">this._onScroll</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e._leaflet</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_initLayout</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">this._container</span><span class="PUNC">;</span><span class="NAME">this._fadeAnimated</span><span class="PUNC">=</span><span class="NAME">this.options.fadeAnimation</span><span class="PUNC">&&</span><span class="NAME">o.Browser.any3d</span><span class="PUNC">,</span><span class="NAME">o.DomUtil.addClass</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="STRN">"leaflet-container"</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">o.Browser.touch</span><span class="PUNC">?</span><span class="STRN">" leaflet-touch"</span><span class="PUNC">:</span><span class="STRN">""</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">o.Browser.retina</span><span class="PUNC">?</span><span class="STRN">" leaflet-retina"</span><span class="PUNC">:</span><span class="STRN">""</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">o.Browser.ielt9</span><span class="PUNC">?</span><span class="STRN">" leaflet-oldie"</span><span class="PUNC">:</span><span class="STRN">""</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">o.Browser.safari</span><span class="PUNC">?</span><span class="STRN">" leaflet-safari"</span><span class="PUNC">:</span><span class="STRN">""</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">this._fadeAnimated</span><span class="PUNC">?</span><span class="STRN">" leaflet-fade-anim"</span><span class="PUNC">:</span><span class="STRN">""</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">o.DomUtil.getStyle</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="STRN">"position"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="STRN">"absolute"</span><span class="PUNC">!==</span><span class="NAME">e</span><span class="PUNC">&&</span><span class="STRN">"relative"</span><span class="PUNC">!==</span><span class="NAME">e</span><span class="PUNC">&&</span><span class="STRN">"fixed"</span><span class="PUNC">!==</span><span class="NAME">e</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">t.style.position</span><span class="PUNC">=</span><span class="STRN">"relative"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._initPanes</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._initControlPos</span><span class="PUNC">&&</span><span class="NAME">this._initControlPos</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_initPanes</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">this._panes</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this._paneRenderers</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">this._mapPane</span><span class="PUNC">=</span><span class="NAME">this.createPane</span><span class="PUNC">(</span><span class="STRN">"mapPane"</span><span class="PUNC">,</span><span class="NAME">this._container</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.DomUtil.setPosition</span><span class="PUNC">(</span><span class="NAME">this._mapPane</span><span class="PUNC">,</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Point</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.createPane</span><span class="PUNC">(</span><span class="STRN">"tilePane"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.createPane</span><span class="PUNC">(</span><span class="STRN">"shadowPane"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.createPane</span><span class="PUNC">(</span><span class="STRN">"overlayPane"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.createPane</span><span class="PUNC">(</span><span class="STRN">"markerPane"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.createPane</span><span class="PUNC">(</span><span class="STRN">"popupPane"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.options.markerZoomAnimation</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">o.DomUtil.addClass</span><span class="PUNC">(</span><span class="NAME">t.markerPane</span><span class="PUNC">,</span><span class="STRN">"leaflet-zoom-hide"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.DomUtil.addClass</span><span class="PUNC">(</span><span class="NAME">t.shadowPane</span><span class="PUNC">,</span><span class="STRN">"leaflet-zoom-hide"</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_resetView</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.DomUtil.setPosition</span><span class="PUNC">(</span><span class="NAME">this._mapPane</span><span class="PUNC">,</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Point</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NAME">this._loaded</span><span class="PUNC">;</span><span class="NAME">this._loaded</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this._limitZoom</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.fire</span><span class="PUNC">(</span><span class="STRN">"viewprereset"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">this._zoom</span><span class="PUNC">!==</span><span class="NAME">e</span><span class="PUNC">;</span><span class="NAME">this._moveStart</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">_move</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">_moveEnd</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.fire</span><span class="PUNC">(</span><span class="STRN">"viewreset"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">&&</span><span class="NAME">this.fire</span><span class="PUNC">(</span><span class="STRN">"load"</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_moveStart</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">&&</span><span class="NAME">this.fire</span><span class="PUNC">(</span><span class="STRN">"zoomstart"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.fire</span><span class="PUNC">(</span><span class="STRN">"movestart"</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_move</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">e</span><span class="PUNC">===</span><span class="NAME">i</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this._zoom</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">o</span><span class="PUNC">=</span><span class="NAME">this._zoom</span><span class="PUNC">!==</span><span class="NAME">e</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._zoom</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">this._lastCenter</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">this._pixelOrigin</span><span class="PUNC">=</span><span class="NAME">this._getNewPixelOrigin</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="PUNC">(</span><span class="NAME">o</span><span class="PUNC">||</span><span class="NAME">n</span><span class="PUNC">&&</span><span class="NAME">n.pinch</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="NAME">this.fire</span><span class="PUNC">(</span><span class="STRN">"zoom"</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.fire</span><span class="PUNC">(</span><span class="STRN">"move"</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_moveEnd</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">&&</span><span class="NAME">this.fire</span><span class="PUNC">(</span><span class="STRN">"zoomend"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.fire</span><span class="PUNC">(</span><span class="STRN">"moveend"</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_stop</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">o.Util.cancelAnimFrame</span><span class="PUNC">(</span><span class="NAME">this._flyToFrame</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._panAnim</span><span class="PUNC">&&</span><span class="NAME">this._panAnim.stop</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_rawPanBy</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.DomUtil.setPosition</span><span class="PUNC">(</span><span class="NAME">this._mapPane</span><span class="PUNC">,</span><span class="NAME">this._getMapPanePos</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">subtract</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_getZoomSpan</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.getMaxZoom</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">-</span><span class="NAME">this.getMinZoom</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_panInsideMaxBounds</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._enforcingBounds</span><span class="PUNC">||</span><span class="NAME">this.panInsideBounds</span><span class="PUNC">(</span><span class="NAME">this.options.maxBounds</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_checkIfLoaded</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this._loaded</span><span class="PUNC">)</span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Error</span><span class="PUNC">(</span><span class="STRN">"Set map center and zoom first."</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_initEvents</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">o.DomEvent</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._targets</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">this._targets</span><span class="PUNC">[</span><span class="NAME">o.stamp</span><span class="PUNC">(</span><span class="NAME">this._container</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">?</span><span class="STRN">"off"</span><span class="PUNC">:</span><span class="STRN">"on"</span><span class="PUNC">;</span><span class="NAME">o.DomEvent</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">(</span><span class="NAME">this._container</span><span class="PUNC">,</span><span class="STRN">"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress"</span><span class="PUNC">,</span><span class="NAME">this._handleDOMEvent</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.options.trackResize</span><span class="PUNC">&&</span><span class="NAME">o.DomEvent</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="STRN">"resize"</span><span class="PUNC">,</span><span class="NAME">this._onResize</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Browser.any3d</span><span class="PUNC">&&</span><span class="NAME">this.options.transform3DLimit</span><span class="PUNC">&&</span><span class="KEYW">this</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">(</span><span class="STRN">"moveend"</span><span class="PUNC">,</span><span class="NAME">this._onMoveEnd</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_onResize</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.Util.cancelAnimFrame</span><span class="PUNC">(</span><span class="NAME">this._resizeRequest</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._resizeRequest</span><span class="PUNC">=</span><span class="NAME">o.Util.requestAnimFrame</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.invalidateSize</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">debounceMoveend</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_onScroll</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._container.scrollTop</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">this._container.scrollLeft</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_onMoveEnd</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">this._getMapPanePos</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">t.x</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">t.y</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">>=</span><span class="NAME">this.options.transform3DLimit</span><span class="PUNC">&&</span><span class="NAME">this._resetView</span><span class="PUNC">(</span><span class="NAME">this.getCenter</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.getZoom</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_findEventTargets</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="STRN">"mouseout"</span><span class="PUNC">===</span><span class="NAME">e</span><span class="PUNC">||</span><span class="STRN">"mouseover"</span><span class="PUNC">===</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">t.target</span><span class="PUNC">||</span><span class="NAME">t.srcElement</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">;</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this._targets</span><span class="PUNC">[</span><span class="NAME">o.stamp</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="STRN">"click"</span><span class="PUNC">===</span><span class="NAME">e</span><span class="PUNC">||</span><span class="STRN">"preclick"</span><span class="PUNC">===</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">t._simulated</span><span class="PUNC">&&</span><span class="NAME">this._draggableMoved</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">a</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="KEYW">break</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">&&</span><span class="NAME">i.listens</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">o.DomEvent._isExternalTarget</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="KEYW">break</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">n.push</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">)</span><span class="KEYW">break</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">===</span><span class="NAME">this._container</span><span class="PUNC">)</span><span class="KEYW">break</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">r.parentNode</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">n.length</span><span class="PUNC">||</span><span class="NAME">a</span><span class="PUNC">||</span><span class="NAME">s</span><span class="PUNC">||</span><span class="PUNC">!</span><span class="NAME">o.DomEvent._isExternalTarget</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="KEYW">this</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_handleDOMEvent</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this._loaded</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">o.DomEvent._skipped</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="STRN">"keypress"</span><span class="PUNC">===</span><span class="NAME">t.type</span><span class="PUNC">&&</span><span class="NUMB">13</span><span class="PUNC">===</span><span class="NAME">t.keyCode</span><span class="PUNC">?</span><span class="STRN">"click"</span><span class="PUNC">:</span><span class="NAME">t.type</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="STRN">"click"</span><span class="PUNC">===</span><span class="NAME">t.type</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">o.Util.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">i.type</span><span class="PUNC">=</span><span class="STRN">"preclick"</span><span class="PUNC">,</span><span class="NAME">this._handleDOMEvent</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="STRN">"mousedown"</span><span class="PUNC">===</span><span class="NAME">e</span><span class="PUNC">&&</span><span class="NAME">o.DomUtil.preventOutline</span><span class="PUNC">(</span><span class="NAME">t.target</span><span class="PUNC">||</span><span class="NAME">t.srcElement</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._fireDOMEvent</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_fireDOMEvent</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">t._stopped</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">||</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">concat</span><span class="PUNC">(</span><span class="NAME">this._findEventTargets</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i.length</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">i</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="STRN">"contextmenu"</span><span class="PUNC">===</span><span class="NAME">e</span><span class="PUNC">&&</span><span class="NAME">n.listens</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="NAME">o.DomEvent.preventDefault</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">s</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">originalEvent</span><span class="PUNC">:</span><span class="NAME">t</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="STRN">"keypress"</span><span class="PUNC">!==</span><span class="NAME">t.type</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">n</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">o.Marker</span><span class="PUNC">;</span><span class="NAME">s.containerPoint</span><span class="PUNC">=</span><span class="NAME">r</span><span class="PUNC">?</span><span class="NAME">this.latLngToContainerPoint</span><span class="PUNC">(</span><span class="NAME">n.getLatLng</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">this.mouseEventToContainerPoint</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s.layerPoint</span><span class="PUNC">=</span><span class="NAME">this.containerPointToLayerPoint</span><span class="PUNC">(</span><span class="NAME">s.containerPoint</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s.latlng</span><span class="PUNC">=</span><span class="NAME">r</span><span class="PUNC">?</span><span class="NAME">n.getLatLng</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">this.layerPointToLatLng</span><span class="PUNC">(</span><span class="NAME">s.layerPoint</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">a</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">a</span><span class="PUNC">&lt;</span><span class="NAME">i.length</span><span class="PUNC">;</span><span class="NAME">a</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">[</span><span class="NAME">a</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">fire</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s.originalEvent._stopped</span><span class="PUNC">||</span><span class="NAME">i</span><span class="PUNC">[</span><span class="NAME">a</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">options.nonBubblingEvents</span><span class="PUNC">&&</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">!==</span><span class="NAME">o.Util.indexOf</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">[</span><span class="NAME">a</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">options.nonBubblingEvents</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_draggableMoved</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">t.options.draggable</span><span class="PUNC">?</span><span class="NAME">t</span><span class="PUNC">:</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">t.dragging</span><span class="PUNC">&&</span><span class="NAME">t.dragging.moved</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="NAME">this.boxZoom</span><span class="PUNC">&&</span><span class="NAME">this.boxZoom.moved</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_clearHandlers</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this._handlers.length</span><span class="PUNC">;</span><span class="NAME">e</span><span class="PUNC">></span><span class="NAME">t</span><span class="PUNC">;</span><span class="NAME">t</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="NAME">this._handlers</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">disable</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>  6</span> </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">whenReady</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._loaded</span><span class="PUNC">?</span><span class="NAME">t.call</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">||</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">target</span><span class="PUNC">:</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">this.on</span><span class="PUNC">(</span><span class="STRN">"load"</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_getMapPanePos</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">o.DomUtil.getPosition</span><span class="PUNC">(</span><span class="NAME">this._mapPane</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Point</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_moved</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">this._getMapPanePos</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">t.equals</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_getTopLeftPoint</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">&&</span><span class="NAME">e</span><span class="PUNC">!==</span><span class="NAME">i</span><span class="PUNC">?</span><span class="NAME">this._getNewPixelOrigin</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">this.getPixelOrigin</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">n.subtract</span><span class="PUNC">(</span><span class="NAME">this._getMapPanePos</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_getNewPixelOrigin</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this.getSize</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">_divideBy</span><span class="PUNC">(</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.project</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">_subtract</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">_add</span><span class="PUNC">(</span><span class="NAME">this._getMapPanePos</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">_round</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_latLngToNewLayerPoint</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">this._getNewPixelOrigin</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.project</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">_subtract</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_getCenterLayerPoint</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.containerPointToLayerPoint</span><span class="PUNC">(</span><span class="NAME">this.getSize</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">_divideBy</span><span class="PUNC">(</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_getCenterOffset</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.latLngToLayerPoint</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">subtract</span><span class="PUNC">(</span><span class="NAME">this._getCenterLayerPoint</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_limitCenter</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">i</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">this.project</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">this.getSize</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">divideBy</span><span class="PUNC">(</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Bounds</span><span class="PUNC">(</span><span class="NAME">n.subtract</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n.add</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">this._getBoundsOffset</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">a.round</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">equals</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="NAME">t</span><span class="PUNC">:</span><span class="NAME">this.unproject</span><span class="PUNC">(</span><span class="NAME">n.add</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_limitOffset</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">e</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this.getPixelBounds</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Bounds</span><span class="PUNC">(</span><span class="NAME">i.min.add</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i.max.add</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t.add</span><span class="PUNC">(</span><span class="NAME">this._getBoundsOffset</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_getBoundsOffset</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">o.bounds</span><span class="PUNC">(</span><span class="NAME">this.project</span><span class="PUNC">(</span><span class="NAME">e.getNorthEast</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.project</span><span class="PUNC">(</span><span class="NAME">e.getSouthWest</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">n.min.subtract</span><span class="PUNC">(</span><span class="NAME">t.min</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">n.max.subtract</span><span class="PUNC">(</span><span class="NAME">t.max</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">this._rebound</span><span class="PUNC">(</span><span class="NAME">s.x</span><span class="PUNC">,</span><span class="PUNC">-</span><span class="NAME">r.x</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">=</span><span class="NAME">this._rebound</span><span class="PUNC">(</span><span class="NAME">s.y</span><span class="PUNC">,</span><span class="PUNC">-</span><span class="NAME">r.y</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Point</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_rebound</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">+</span><span class="NAME">e</span><span class="PUNC">></span><span class="NUMB">0</span><span class="PUNC">?</span><span class="NAME">Math.round</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">-</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">:</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">Math.ceil</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">-</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">Math.floor</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_limitZoom</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this.getMinZoom</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this.getMaxZoom</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">o.Browser.any3d</span><span class="PUNC">?</span><span class="NAME">this.options.zoomSnap</span><span class="PUNC">:</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">Math.round</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">/</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.map</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Map</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.Layer</span><span class="PUNC">=</span><span class="NAME">o.Evented.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">options</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="NAME">pane</span><span class="PUNC">:</span><span class="STRN">"overlayPane"</span><span class="PUNC">,</span><span class="NAME">nonBubblingEvents</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">addTo</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t.addLayer</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">remove</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.removeFrom</span><span class="PUNC">(</span><span class="NAME">this._map</span><span class="PUNC">||</span><span class="NAME">this._mapToAdd</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">removeFrom</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">&&</span><span class="NAME">t.removeLayer</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getPane</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._map.getPane</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">?</span><span class="NAME">this.options</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="NAME">t</span><span class="PUNC">:</span><span class="NAME">this.options.pane</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">addInteractiveTarget</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._map._targets</span><span class="PUNC">[</span><span class="NAME">o.stamp</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">removeInteractiveTarget</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">this._map._targets</span><span class="PUNC">[</span><span class="NAME">o.stamp</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_layerAdd</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">t.target</span><span class="PUNC">;</span><span class="NAME">e.hasLayer</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">this._map</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">this._zoomAnimated</span><span class="PUNC">=</span><span class="NAME">e._zoomAnimated</span><span class="PUNC">,</span><span class="NAME">this.getEvents</span><span class="PUNC">&&</span><span class="NAME">e.on</span><span class="PUNC">(</span><span class="NAME">this.getEvents</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.onAdd</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.getAttribution</span><span class="PUNC">&&</span><span class="NAME">this._map.attributionControl</span><span class="PUNC">&&</span><span class="NAME">this._map.attributionControl.addAttribution</span><span class="PUNC">(</span><span class="NAME">this.getAttribution</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.fire</span><span class="PUNC">(</span><span class="STRN">"add"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e.fire</span><span class="PUNC">(</span><span class="STRN">"layeradd"</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">layer</span><span class="PUNC">:</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Map.include</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">addLayer</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">o.stamp</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._layers</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">?</span><span class="NAME">t</span><span class="PUNC">:</span><span class="PUNC">(</span><span class="NAME">this._layers</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">t._mapToAdd</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">t.beforeAdd</span><span class="PUNC">&&</span><span class="NAME">t.beforeAdd</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.whenReady</span><span class="PUNC">(</span><span class="NAME">t._layerAdd</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">removeLayer</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">o.stamp</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._layers</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">?</span><span class="PUNC">(</span><span class="NAME">this._loaded</span><span class="PUNC">&&</span><span class="NAME">t.onRemove</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t.getAttribution</span><span class="PUNC">&&</span><span class="NAME">this.attributionControl</span><span class="PUNC">&&</span><span class="NAME">this.attributionControl.removeAttribution</span><span class="PUNC">(</span><span class="NAME">t.getAttribution</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t.getEvents</span><span class="PUNC">&&</span><span class="NAME">this.off</span><span class="PUNC">(</span><span class="NAME">t.getEvents</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">this._layers</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">this._loaded</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">this.fire</span><span class="PUNC">(</span><span class="STRN">"layerremove"</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">layer</span><span class="PUNC">:</span><span class="NAME">t</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t.fire</span><span class="PUNC">(</span><span class="STRN">"remove"</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t._map</span><span class="PUNC">=</span><span class="NAME">t._mapToAdd</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">hasLayer</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">!</span><span class="PUNC">!</span><span class="NAME">t</span><span class="PUNC">&&</span><span class="NAME">o.stamp</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">this._layers</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">eachLayer</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">this._layers</span><span class="PUNC">)</span><span class="NAME">t.call</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">this._layers</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_addLayers</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">?</span><span class="NAME">o.Util.isArray</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="NAME">t</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">t.length</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">></span><span class="NAME">e</span><span class="PUNC">;</span><span class="NAME">e</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="NAME">this.addLayer</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_addZoomLimit</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="PUNC">!</span><span class="NAME">isNaN</span><span class="PUNC">(</span><span class="NAME">t.options.maxZoom</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="NAME">isNaN</span><span class="PUNC">(</span><span class="NAME">t.options.minZoom</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">this._zoomBoundLayers</span><span class="PUNC">[</span><span class="NAME">o.stamp</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">this._updateZoomLevels</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_removeZoomLimit</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">o.stamp</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this._zoomBoundLayers</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">this._zoomBoundLayers</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">this._updateZoomLevels</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_updateZoomLevels</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NUMB">1</span><span class="PUNC">/</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="PUNC">-</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">/</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">this._getZoomSpan</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">o</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">this._zoomBoundLayers</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">this._zoomBoundLayers</span><span class="PUNC">[</span><span class="NAME">o</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">options</span><span class="PUNC">;</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">s.minZoom</span><span class="PUNC">===</span><span class="NAME">i</span><span class="PUNC">?</span><span class="NAME">t</span><span class="PUNC">:</span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">s.minZoom</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">s.maxZoom</span><span class="PUNC">===</span><span class="NAME">i</span><span class="PUNC">?</span><span class="NAME">e</span><span class="PUNC">:</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">s.maxZoom</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">this._layersMaxZoom</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">===</span><span class="PUNC">-</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">/</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="NAME">i</span><span class="PUNC">:</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">this._layersMinZoom</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">===</span><span class="NUMB">1</span><span class="PUNC">/</span><span class="NUMB">0</span><span class="PUNC">?</span><span class="NAME">i</span><span class="PUNC">:</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">!==</span><span class="NAME">this._getZoomSpan</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="NAME">this.fire</span><span class="PUNC">(</span><span class="STRN">"zoomlevelschange"</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Projection.Mercator</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">R</span><span class="PUNC">:</span><span class="NUMB">6378137</span><span class="PUNC">,</span><span class="NAME">R_MINOR</span><span class="PUNC">:</span><span class="NUMB">6356752.314245179</span><span class="PUNC">,</span><span class="NAME">bounds</span><span class="PUNC">:</span><span class="NAME">o.bounds</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="PUNC">-</span><span class="NUMB">20037508.34279</span><span class="PUNC">,</span><span class="PUNC">-</span><span class="NUMB">15496570.73972</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NUMB">20037508.34279</span><span class="PUNC">,</span><span class="NUMB">18764656.23138</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">project</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">Math.PI</span><span class="PUNC">/</span><span class="NUMB">180</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this.R</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">t.lat</span><span class="PUNC">*</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">this.R_MINOR</span><span class="PUNC">/</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">Math.sqrt</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">-</span><span class="NAME">s</span><span class="PUNC">*</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">r</span><span class="PUNC">*</span><span class="NAME">Math.sin</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">=</span><span class="NAME">Math.tan</span><span class="PUNC">(</span><span class="NAME">Math.PI</span><span class="PUNC">/</span><span class="NUMB">4</span><span class="PUNC">-</span><span class="NAME">n</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NAME">Math.pow</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">-</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">+</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="PUNC">-</span><span class="NAME">i</span><span class="PUNC">*</span><span class="NAME">Math.log</span><span class="PUNC">(</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">h</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="NAME">e</span><span class="PUNC">-</span><span class="NUMB">10</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Point</span><span class="PUNC">(</span><span class="NAME">t.lng</span><span class="PUNC">*</span><span class="NAME">e</span><span class="PUNC">*</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">unproject</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NUMB">180</span><span class="PUNC">/</span><span class="NAME">Math.PI</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">this.R</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">this.R_MINOR</span><span class="PUNC">/</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">Math.sqrt</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">-</span><span class="NAME">s</span><span class="PUNC">*</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">Math.exp</span><span class="PUNC">(</span><span class="PUNC">-</span><span class="NAME">t.y</span><span class="PUNC">/</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">=</span><span class="NAME">Math.PI</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">-</span><span class="NUMB">2</span><span class="PUNC">*</span><span class="NAME">Math.atan</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">=</span><span class="PUNC">.</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="NUMB">15</span><span class="PUNC">></span><span class="NAME">l</span><span class="PUNC">&&</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">></span><span class="NUMB">1</span><span class="NAME">e</span><span class="PUNC">-</span><span class="NUMB">7</span><span class="PUNC">;</span><span class="NAME">l</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">r</span><span class="PUNC">*</span><span class="NAME">Math.sin</span><span class="PUNC">(</span><span class="NAME">h</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">Math.pow</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">-</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">+</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">=</span><span class="NAME">Math.PI</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">-</span><span class="NUMB">2</span><span class="PUNC">*</span><span class="NAME">Math.atan</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">*</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">-</span><span class="NAME">h</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">+</span><span class="PUNC">=</span><span class="NAME">u</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.LatLng</span><span class="PUNC">(</span><span class="NAME">h</span><span class="PUNC">*</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">t.x</span><span class="PUNC">*</span><span class="NAME">i</span><span class="PUNC">/</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.CRS.EPSG3395</span><span class="PUNC">=</span><span class="NAME">o.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.CRS.Earth</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">code</span><span class="PUNC">:</span><span class="STRN">"EPSG:3395"</span><span class="PUNC">,</span><span class="NAME">projection</span><span class="PUNC">:</span><span class="NAME">o.Projection.Mercator</span><span class="PUNC">,</span><span class="NAME">transformation</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="PUNC">.</span><span class="NUMB">5</span><span class="PUNC">/</span><span class="PUNC">(</span><span class="NAME">Math.PI</span><span class="PUNC">*</span><span class="NAME">o.Projection.Mercator.R</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Transformation</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="PUNC">.</span><span class="NUMB">5</span><span class="PUNC">,</span><span class="PUNC">-</span><span class="NAME">t</span><span class="PUNC">,</span><span class="PUNC">.</span><span class="NUMB">5</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.GridLayer</span><span class="PUNC">=</span><span class="NAME">o.Layer.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">options</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="NAME">tileSize</span><span class="PUNC">:</span><span class="NUMB">256</span><span class="PUNC">,</span><span class="NAME">opacity</span><span class="PUNC">:</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">updateWhenIdle</span><span class="PUNC">:</span><span class="NAME">o.Browser.mobile</span><span class="PUNC">,</span><span class="NAME">updateInterval</span><span class="PUNC">:</span><span class="NUMB">200</span><span class="PUNC">,</span><span class="NAME">attribution</span><span class="PUNC">:</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">zIndex</span><span class="PUNC">:</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">bounds</span><span class="PUNC">:</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">minZoom</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">noWrap</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">pane</span><span class="PUNC">:</span><span class="STRN">"tilePane"</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">initialize</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">o.setOptions</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">onAdd</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._initContainer</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._levels</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">this._tiles</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">this._resetView</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._update</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">beforeAdd</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">t._addZoomLimit</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">onRemove</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._removeAllTiles</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.DomUtil.remove</span><span class="PUNC">(</span><span class="NAME">this._container</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t._removeZoomLimit</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._container</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">this._tileZoom</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">bringToFront</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._map</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">o.DomUtil.toFront</span><span class="PUNC">(</span><span class="NAME">this._container</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._setAutoZIndex</span><span class="PUNC">(</span><span class="NAME">Math.max</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">bringToBack</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._map</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">o.DomUtil.toBack</span><span class="PUNC">(</span><span class="NAME">this._container</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._setAutoZIndex</span><span class="PUNC">(</span><span class="NAME">Math.min</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getAttribution</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.options.attribution</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getContainer</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._container</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">setOpacity</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.options.opacity</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">this._updateOpacity</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">setZIndex</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.options.zIndex</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">this._updateZIndex</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">isLoading</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._loading</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">redraw</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._map</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">this._removeAllTiles</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._update</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getEvents</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">viewprereset</span><span class="PUNC">:</span><span class="NAME">this._invalidateAll</span><span class="PUNC">,</span><span class="NAME">viewreset</span><span class="PUNC">:</span><span class="NAME">this._resetView</span><span class="PUNC">,</span><span class="NAME">zoom</span><span class="PUNC">:</span><span class="NAME">this._resetView</span><span class="PUNC">,</span><span class="NAME">moveend</span><span class="PUNC">:</span><span class="NAME">this._onMoveEnd</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.options.updateWhenIdle</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">this._onMove</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">this._onMove</span><span class="PUNC">=</span><span class="NAME">o.Util.throttle</span><span class="PUNC">(</span><span class="NAME">this._onMoveEnd</span><span class="PUNC">,</span><span class="NAME">this.options.updateInterval</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t.move</span><span class="PUNC">=</span><span class="NAME">this._onMove</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._zoomAnimated</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">t.zoomanim</span><span class="PUNC">=</span><span class="NAME">this._animateZoom</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">createTile</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">e.createElement</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getTileSize</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">this.options.tileSize</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">o.Point</span><span class="PUNC">?</span><span class="NAME">t</span><span class="PUNC">:</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Point</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_updateZIndex</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._container</span><span class="PUNC">&&</span><span class="NAME">this.options.zIndex</span><span class="PUNC">!==</span><span class="NAME">i</span><span class="PUNC">&&</span><span class="KEYW">null</span><span class="PUNC">!==</span><span class="NAME">this.options.zIndex</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">this._container.style.zIndex</span><span class="PUNC">=</span><span class="NAME">this.options.zIndex</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_setAutoZIndex</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this.getPane</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">children</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="PUNC">-</span><span class="NAME">t</span><span class="PUNC">(</span><span class="PUNC">-</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">/</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">/</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">i.length</span><span class="PUNC">;</span><span class="NAME">s</span><span class="PUNC">></span><span class="NAME">o</span><span class="PUNC">;</span><span class="NAME">o</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">i</span><span class="PUNC">[</span><span class="NAME">o</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">style.zIndex</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">[</span><span class="NAME">o</span><span class="PUNC">]</span><span class="PUNC">!==</span><span class="NAME">this._container</span><span class="PUNC">&&</span><span class="NAME">e</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">,</span><span class="PUNC">+</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">isFinite</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">this.options.zIndex</span><span class="PUNC">=</span><span class="NAME">n</span><span class="PUNC">+</span><span class="NAME">t</span><span class="PUNC">(</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._updateZIndex</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_updateOpacity</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this._map</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">o.Browser.ielt9</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.DomUtil.setOpacity</span><span class="PUNC">(</span><span class="NAME">this._container</span><span class="PUNC">,</span><span class="NAME">this.options.opacity</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="PUNC">+</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Date</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">this._tiles</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">this._tiles</span><span class="PUNC">[</span><span class="NAME">n</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">s.current</span><span class="PUNC">&&</span><span class="NAME">s.loaded</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">-</span><span class="NAME">s.loaded</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NUMB">200</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">o.DomUtil.setOpacity</span><span class="PUNC">(</span><span class="NAME">s.el</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">></span><span class="NAME">r</span><span class="PUNC">?</span><span class="NAME">e</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">:</span><span class="PUNC">(</span><span class="NAME">s.active</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s.active</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="NAME">i</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">this._noPrune</span><span class="PUNC">&&</span><span class="NAME">this._pruneTiles</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">o.Util.cancelAnimFrame</span><span class="PUNC">(</span><span class="NAME">this._fadeFrame</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._fadeFrame</span><span class="PUNC">=</span><span class="NAME">o.Util.requestAnimFrame</span><span class="PUNC">(</span><span class="NAME">this._updateOpacity</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_initContainer</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._container</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">this._container</span><span class="PUNC">=</span><span class="NAME">o.DomUtil.create</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">,</span><span class="STRN">"leaflet-layer"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._updateZIndex</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.options.opacity</span><span class="PUNC">&lt;</span><span class="NUMB">1</span><span class="PUNC">&&</span><span class="NAME">this._updateOpacity</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.getPane</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">appendChild</span><span class="PUNC">(</span><span class="NAME">this._container</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_updateLevels</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">this._tileZoom</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this.options.maxZoom</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">===</span><span class="NAME">i</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">this._levels</span><span class="PUNC">)</span><span class="NAME">this._levels</span><span class="PUNC">[</span><span class="NAME">n</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">el.children.length</span><span class="PUNC">||</span><span class="NAME">n</span><span class="PUNC">===</span><span class="NAME">t</span><span class="PUNC">?</span><span class="NAME">this._levels</span><span class="PUNC">[</span><span class="NAME">n</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">el.style.zIndex</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">-</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">-</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="PUNC">(</span><span class="NAME">o.DomUtil.remove</span><span class="PUNC">(</span><span class="NAME">this._levels</span><span class="PUNC">[</span><span class="NAME">n</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">el</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._removeTilesAtZoom</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">this._levels</span><span class="PUNC">[</span><span class="NAME">n</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">this._levels</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">this._map</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">s</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">this._levels</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">s.el</span><span class="PUNC">=</span><span class="NAME">o.DomUtil.create</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">,</span><span class="STRN">"leaflet-tile-container leaflet-zoom-animated"</span><span class="PUNC">,</span><span class="NAME">this._container</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s.el.style.zIndex</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">s.origin</span><span class="PUNC">=</span><span class="NAME">r.project</span><span class="PUNC">(</span><span class="NAME">r.unproject</span><span class="PUNC">(</span><span class="NAME">r.getPixelOrigin</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">round</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s.zoom</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">this._setZoomTransform</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">r.getCenter</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">r.getZoom</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Util.falseFn</span><span class="PUNC">(</span><span class="NAME">s.el.offsetWidth</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._level</span><span class="PUNC">=</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_pruneTiles</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this._map</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this._map.getZoom</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">></span><span class="NAME">this.options.maxZoom</span><span class="PUNC">||</span><span class="NAME">i</span><span class="PUNC">&lt;</span><span class="NAME">this.options.minZoom</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">void</span><span class="WHIT"> </span><span class="NAME">this._removeAllTiles</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">t</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">this._tiles</span><span class="PUNC">)</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this._tiles</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">e.retain</span><span class="PUNC">=</span><span class="NAME">e.current</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">t</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">this._tiles</span><span class="PUNC">)</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this._tiles</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">e.current</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">e.active</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">e.coords</span><span class="PUNC">;</span><span class="NAME">this._retainParent</span><span class="PUNC">(</span><span class="NAME">n.x</span><span class="PUNC">,</span><span class="NAME">n.y</span><span class="PUNC">,</span><span class="NAME">n.z</span><span class="PUNC">,</span><span class="NAME">n.z</span><span class="PUNC">-</span><span class="NUMB">5</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="NAME">this._retainChildren</span><span class="PUNC">(</span><span class="NAME">n.x</span><span class="PUNC">,</span><span class="NAME">n.y</span><span class="PUNC">,</span><span class="NAME">n.z</span><span class="PUNC">,</span><span class="NAME">n.z</span><span class="PUNC">+</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">t</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">this._tiles</span><span class="PUNC">)</span><span class="NAME">this._tiles</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">retain</span><span class="PUNC">||</span><span class="NAME">this._removeTile</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_removeTilesAtZoom</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">this._tiles</span><span class="PUNC">)</span><span class="NAME">this._tiles</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">coords.z</span><span class="PUNC">===</span><span class="NAME">t</span><span class="PUNC">&&</span><span class="NAME">this._removeTile</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_removeAllTiles</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">this._tiles</span><span class="PUNC">)</span><span class="NAME">this._removeTile</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_invalidateAll</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">this._levels</span><span class="PUNC">)</span><span class="NAME">o.DomUtil.remove</span><span class="PUNC">(</span><span class="NAME">this._levels</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">el</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">this._levels</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">this._removeAllTiles</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._tileZoom</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_retainParent</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">Math.floor</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">Math.floor</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">i</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Point</span><span class="PUNC">(</span><span class="PUNC">+</span><span class="NAME">s</span><span class="PUNC">,</span><span class="PUNC">+</span><span class="NAME">r</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">h.z</span><span class="PUNC">=</span><span class="PUNC">+</span><span class="NAME">a</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">l</span><span class="PUNC">=</span><span class="NAME">this._tileCoordsToKey</span><span class="PUNC">(</span><span class="NAME">h</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">=</span><span class="NAME">this._tiles</span><span class="PUNC">[</span><span class="NAME">l</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">u</span><span class="PUNC">&&</span><span class="NAME">u.active</span><span class="PUNC">?</span><span class="PUNC">(</span><span class="NAME">u.retain</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">&&</span><span class="NAME">u.loaded</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">u.retain</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">></span><span class="NAME">n</span><span class="PUNC">?</span><span class="NAME">this._retainParent</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_retainChildren</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">s</span><span class="PUNC">=</span><span class="NUMB">2</span><span class="PUNC">*</span><span class="NAME">t</span><span class="PUNC">;</span><span class="NUMB">2</span><span class="PUNC">*</span><span class="NAME">t</span><span class="PUNC">+</span><span class="NUMB">2</span><span class="PUNC">></span><span class="NAME">s</span><span class="PUNC">;</span><span class="NAME">s</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">r</span><span class="PUNC">=</span><span class="NUMB">2</span><span class="PUNC">*</span><span class="NAME">e</span><span class="PUNC">;</span><span class="NUMB">2</span><span class="PUNC">*</span><span class="NAME">e</span><span class="PUNC">+</span><span class="NUMB">2</span><span class="PUNC">></span><span class="NAME">r</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">a</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Point</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">a.z</span><span class="PUNC">=</span><span class="NAME">i</span><span class="PUNC">+</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">h</span><span class="PUNC">=</span><span class="NAME">this._tileCoordsToKey</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">=</span><span class="NAME">this._tiles</span><span class="PUNC">[</span><span class="NAME">h</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">l</span><span class="PUNC">&&</span><span class="NAME">l.active</span><span class="PUNC">?</span><span class="NAME">l.retain</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">:</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">&&</span><span class="NAME">l.loaded</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">l.retain</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">></span><span class="NAME">i</span><span class="PUNC">+</span><span class="NUMB">1</span><span class="PUNC">&&</span><span class="NAME">this._retainChildren</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">+</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_resetView</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">t.pinch</span><span class="PUNC">||</span><span class="NAME">t.flyTo</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this._setView</span><span class="PUNC">(</span><span class="NAME">this._map.getCenter</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._map.getZoom</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_animateZoom</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._setView</span><span class="PUNC">(</span><span class="NAME">t.center</span><span class="PUNC">,</span><span class="NAME">t.zoom</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">t.noUpdate</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_setView</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">Math.round</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">(</span><span class="NAME">this.options.maxZoom</span><span class="PUNC">!==</span><span class="NAME">i</span><span class="PUNC">&&</span><span class="NAME">s</span><span class="PUNC">></span><span class="NAME">this.options.maxZoom</span><span class="PUNC">||</span><span class="NAME">this.options.minZoom</span><span class="PUNC">!==</span><span class="NAME">i</span><span class="PUNC">&&</span><span class="NAME">s</span><span class="PUNC">&lt;</span><span class="NAME">this.options.minZoom</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">s</span><span class="PUNC">!==</span><span class="NAME">this._tileZoom</span><span class="PUNC">;</span><span class="NAME">o</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">r</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">this._tileZoom</span><span class="PUNC">=</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">this._abortLoading</span><span class="PUNC">&&</span><span class="NAME">this._abortLoading</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._updateLevels</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._resetGrid</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">!==</span><span class="NAME">i</span><span class="PUNC">&&</span><span class="NAME">this._update</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">||</span><span class="NAME">this._pruneTiles</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._noPrune</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="PUNC">!</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._setZoomTransforms</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_setZoomTransforms</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">this._levels</span><span class="PUNC">)</span><span class="NAME">this._setZoomTransform</span><span class="PUNC">(</span><span class="NAME">this._levels</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_setZoomTransform</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">this._map.getZoomScale</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">t.zoom</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">t.origin.multiplyBy</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">subtract</span><span class="PUNC">(</span><span class="NAME">this._map._getNewPixelOrigin</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">round</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">o.Browser.any3d</span><span class="PUNC">?</span><span class="NAME">o.DomUtil.setTransform</span><span class="PUNC">(</span><span class="NAME">t.el</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">o.DomUtil.setPosition</span><span class="PUNC">(</span><span class="NAME">t.el</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_resetGrid</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">this._map</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">t.options.crs</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this._tileSize</span><span class="PUNC">=</span><span class="NAME">this.getTileSize</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">this._tileZoom</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">=</span><span class="NAME">this._map.getPixelWorldBounds</span><span class="PUNC">(</span><span class="NAME">this._tileZoom</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">o</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">this._globalTileRange</span><span class="PUNC">=</span><span class="NAME">this._pxBoundsToTileRange</span><span class="PUNC">(</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._wrapX</span><span class="PUNC">=</span><span class="NAME">e.wrapLng</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">this.options.noWrap</span><span class="PUNC">&&</span><span class="PUNC">[</span><span class="NAME">Math.floor</span><span class="PUNC">(</span><span class="NAME">t.project</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">e.wrapLng</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">x</span><span class="PUNC">/</span><span class="NAME">i.x</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">Math.ceil</span><span class="PUNC">(</span><span class="NAME">t.project</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">e.wrapLng</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">x</span><span class="PUNC">/</span><span class="NAME">i.y</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">this._wrapY</span><span class="PUNC">=</span><span class="NAME">e.wrapLat</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">this.options.noWrap</span><span class="PUNC">&&</span><span class="PUNC">[</span><span class="NAME">Math.floor</span><span class="PUNC">(</span><span class="NAME">t.project</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="NAME">e.wrapLat</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">y</span><span class="PUNC">/</span><span class="NAME">i.x</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">Math.ceil</span><span class="PUNC">(</span><span class="NAME">t.project</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="NAME">e.wrapLat</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">y</span><span class="PUNC">/</span><span class="NAME">i.y</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_onMoveEnd</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._map</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">this._map._animatingZoom</span><span class="PUNC">&&</span><span class="NAME">this._resetView</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_getTiledPixelBounds</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this._map</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">e._animatingZoom</span><span class="PUNC">?</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">e._animateToZoom</span><span class="PUNC">,</span><span class="NAME">e.getZoom</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">e.getZoom</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">e.getZoomScale</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">this._tileZoom</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">e.project</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">this._tileZoom</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">floor</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">e.getSize</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">divideBy</span><span class="PUNC">(</span><span class="NUMB">2</span><span class="PUNC">*</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Bounds</span><span class="PUNC">(</span><span class="NAME">s.subtract</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s.add</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_update</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">this._map</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">n.getZoom</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">===</span><span class="NAME">i</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">n.getCenter</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._tileZoom</span><span class="PUNC">!==</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">this._getTiledPixelBounds</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">this._pxBoundsToTileRange</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">=</span><span class="NAME">a.getCenter</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">u</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">this._tiles</span><span class="PUNC">)</span><span class="NAME">this._tiles</span><span class="PUNC">[</span><span class="NAME">u</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">current</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">-</span><span class="NAME">this._tileZoom</span><span class="PUNC">)</span><span class="PUNC">></span><span class="NUMB">1</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">void</span><span class="WHIT"> </span><span class="NAME">this._setView</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">c</span><span class="PUNC">=</span><span class="NAME">a.min.y</span><span class="PUNC">;</span><span class="NAME">c</span><span class="PUNC">&lt;=</span><span class="NAME">a.max.y</span><span class="PUNC">;</span><span class="NAME">c</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">d</span><span class="PUNC">=</span><span class="NAME">a.min.x</span><span class="PUNC">;</span><span class="NAME">d</span><span class="PUNC">&lt;=</span><span class="NAME">a.max.x</span><span class="PUNC">;</span><span class="NAME">d</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">_</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Point</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">,</span><span class="NAME">c</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">_.z</span><span class="PUNC">=</span><span class="NAME">this._tileZoom</span><span class="PUNC">,</span><span class="NAME">this._isValidTile</span><span class="PUNC">(</span><span class="NAME">_</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">m</span><span class="PUNC">=</span><span class="NAME">this._tiles</span><span class="PUNC">[</span><span class="NAME">this._tileCoordsToKey</span><span class="PUNC">(</span><span class="NAME">_</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">m</span><span class="PUNC">?</span><span class="NAME">m.current</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">:</span><span class="NAME">l.push</span><span class="PUNC">(</span><span class="NAME">_</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">l.sort</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t.distanceTo</span><span class="PUNC">(</span><span class="NAME">h</span><span class="PUNC">)</span><span class="PUNC">-</span><span class="NAME">e.distanceTo</span><span class="PUNC">(</span><span class="NAME">h</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">!==</span><span class="NAME">l.length</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._loading</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">this._loading</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">this.fire</span><span class="PUNC">(</span><span class="STRN">"loading"</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">p</span><span class="PUNC">=</span><span class="NAME">e.createDocumentFragment</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">d</span><span class="PUNC">&lt;</span><span class="NAME">l.length</span><span class="PUNC">;</span><span class="NAME">d</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="NAME">this._addTile</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">[</span><span class="NAME">d</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">p</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this._level.el.appendChild</span><span class="PUNC">(</span><span class="NAME">p</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_isValidTile</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this._map.options.crs</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">e.infinite</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this._globalTileRange</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">e.wrapLng</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">t.x</span><span class="PUNC">&lt;</span><span class="NAME">i.min.x</span><span class="PUNC">||</span><span class="NAME">t.x</span><span class="PUNC">></span><span class="NAME">i.max.x</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="PUNC">!</span><span class="NAME">e.wrapLat</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">t.y</span><span class="PUNC">&lt;</span><span class="NAME">i.min.y</span><span class="PUNC">||</span><span class="NAME">t.y</span><span class="PUNC">></span><span class="NAME">i.max.y</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.options.bounds</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">this._tileCoordsToBounds</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">o.latLngBounds</span><span class="PUNC">(</span><span class="NAME">this.options.bounds</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">overlaps</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_keyToBounds</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._tileCoordsToBounds</span><span class="PUNC">(</span><span class="NAME">this._keyToTileCoords</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_tileCoordsToBounds</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this._map</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this.getTileSize</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">t.scaleBy</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">n.add</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">e.wrapLatLng</span><span class="PUNC">(</span><span class="NAME">e.unproject</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">t.z</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">e.wrapLatLng</span><span class="PUNC">(</span><span class="NAME">e.unproject</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">t.z</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.LatLngBounds</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_tileCoordsToKey</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t.x</span><span class="PUNC">+</span><span class="STRN">":"</span><span class="PUNC">+</span><span class="NAME">t.y</span><span class="PUNC">+</span><span class="STRN">":"</span><span class="PUNC">+</span><span class="NAME">t.z</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_keyToTileCoords</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">t.split</span><span class="PUNC">(</span><span class="STRN">":"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Point</span><span class="PUNC">(</span><span class="PUNC">+</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">+</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">i.z</span><span class="PUNC">=</span><span class="PUNC">+</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_removeTile</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this._tiles</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">e</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">o.DomUtil.remove</span><span class="PUNC">(</span><span class="NAME">e.el</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">this._tiles</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">this.fire</span><span class="PUNC">(</span><span class="STRN">"tileunload"</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">tile</span><span class="PUNC">:</span><span class="NAME">e.el</span><span class="PUNC">,</span><span class="NAME">coords</span><span class="PUNC">:</span><span class="NAME">this._keyToTileCoords</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_initTile</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.DomUtil.addClass</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="STRN">"leaflet-tile"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this.getTileSize</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">t.style.width</span><span class="PUNC">=</span><span class="NAME">e.x</span><span class="PUNC">+</span><span class="STRN">"px"</span><span class="PUNC">,</span><span class="NAME">t.style.height</span><span class="PUNC">=</span><span class="NAME">e.y</span><span class="PUNC">+</span><span class="STRN">"px"</span><span class="PUNC">,</span><span class="NAME">t.onselectstart</span><span class="PUNC">=</span><span class="NAME">o.Util.falseFn</span><span class="PUNC">,</span><span class="NAME">t.onmousemove</span><span class="PUNC">=</span><span class="NAME">o.Util.falseFn</span><span class="PUNC">,</span><span class="NAME">o.Browser.ielt9</span><span class="PUNC">&&</span><span class="NAME">this.options.opacity</span><span class="PUNC">&lt;</span><span class="NUMB">1</span><span class="PUNC">&&</span><span class="NAME">o.DomUtil.setOpacity</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">this.options.opacity</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Browser.android</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">o.Browser.android23</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">t.style.WebkitBackfaceVisibility</span><span class="PUNC">=</span><span class="STRN">"hidden"</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_addTile</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this._getTilePos</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">this._tileCoordsToKey</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">this.createTile</span><span class="PUNC">(</span><span class="NAME">this._wrapCoords</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.bind</span><span class="PUNC">(</span><span class="NAME">this._tileReady</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this._initTile</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.createTile.length</span><span class="PUNC">&lt;</span><span class="NUMB">2</span><span class="PUNC">&&</span><span class="NAME">o.Util.requestAnimFrame</span><span class="PUNC">(</span><span class="NAME">o.bind</span><span class="PUNC">(</span><span class="NAME">this._tileReady</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">,</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.DomUtil.setPosition</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._tiles</span><span class="PUNC">[</span><span class="NAME">n</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">el</span><span class="PUNC">:</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">coords</span><span class="PUNC">:</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">current</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">e.appendChild</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.fire</span><span class="PUNC">(</span><span class="STRN">"tileloadstart"</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">tile</span><span class="PUNC">:</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">coords</span><span class="PUNC">:</span><span class="NAME">t</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_tileReady</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this._map</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">e</span><span class="PUNC">&&</span><span class="NAME">this.fire</span><span class="PUNC">(</span><span class="STRN">"tileerror"</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">error</span><span class="PUNC">:</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">tile</span><span class="PUNC">:</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">coords</span><span class="PUNC">:</span><span class="NAME">t</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">this._tileCoordsToKey</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this._tiles</span><span class="PUNC">[</span><span class="NAME">n</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">i.loaded</span><span class="PUNC">=</span><span class="PUNC">+</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Date</span><span class="PUNC">,</span><span class="NAME">this._map._fadeAnimated</span><span class="PUNC">?</span><span class="PUNC">(</span><span class="NAME">o.DomUtil.setOpacity</span><span class="PUNC">(</span><span class="NAME">i.el</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Util.cancelAnimFrame</span><span class="PUNC">(</span><span class="NAME">this._fadeFrame</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._fadeFrame</span><span class="PUNC">=</span><span class="NAME">o.Util.requestAnimFrame</span><span class="PUNC">(</span><span class="NAME">this._updateOpacity</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="PUNC">(</span><span class="NAME">i.active</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">this._pruneTiles</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.DomUtil.addClass</span><span class="PUNC">(</span><span class="NAME">i.el</span><span class="PUNC">,</span><span class="STRN">"leaflet-tile-loaded"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.fire</span><span class="PUNC">(</span><span class="STRN">"tileload"</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">tile</span><span class="PUNC">:</span><span class="NAME">i.el</span><span class="PUNC">,</span><span class="NAME">coords</span><span class="PUNC">:</span><span class="NAME">t</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._noTilesToLoad</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">this._loading</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">this.fire</span><span class="PUNC">(</span><span class="STRN">"load"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Browser.ielt9</span><span class="PUNC">||</span><span class="PUNC">!</span><span class="NAME">this._map._fadeAnimated</span><span class="PUNC">?</span><span class="NAME">o.Util.requestAnimFrame</span><span class="PUNC">(</span><span class="NAME">this._pruneTiles</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">setTimeout</span><span class="PUNC">(</span><span class="NAME">o.bind</span><span class="PUNC">(</span><span class="NAME">this._pruneTiles</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NUMB">250</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_getTilePos</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t.scaleBy</span><span class="PUNC">(</span><span class="NAME">this.getTileSize</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">subtract</span><span class="PUNC">(</span><span class="NAME">this._level.origin</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_wrapCoords</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Point</span><span class="PUNC">(</span><span class="NAME">this._wrapX</span><span class="PUNC">?</span><span class="NAME">o.Util.wrapNum</span><span class="PUNC">(</span><span class="NAME">t.x</span><span class="PUNC">,</span><span class="NAME">this._wrapX</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">t.x</span><span class="PUNC">,</span><span class="NAME">this._wrapY</span><span class="PUNC">?</span><span class="NAME">o.Util.wrapNum</span><span class="PUNC">(</span><span class="NAME">t.y</span><span class="PUNC">,</span><span class="NAME">this._wrapY</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">t.y</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">e.z</span><span class="PUNC">=</span><span class="NAME">t.z</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_pxBoundsToTileRange</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this.getTileSize</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Bounds</span><span class="PUNC">(</span><span class="NAME">t.min.unscaleBy</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">floor</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t.max.unscaleBy</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">ceil</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">subtract</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_noTilesToLoad</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">this._tiles</span><span class="PUNC">)</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this._tiles</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">loaded</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.gridLayer</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.GridLayer</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.TileLayer</span><span class="PUNC">=</span><span class="NAME">o.GridLayer.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">options</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="NAME">minZoom</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">maxZoom</span><span class="PUNC">:</span><span class="NUMB">18</span><span class="PUNC">,</span><span class="NAME">maxNativeZoom</span><span class="PUNC">:</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">subdomains</span><span class="PUNC">:</span><span class="STRN">"abc"</span><span class="PUNC">,</span><span class="NAME">errorTileUrl</span><span class="PUNC">:</span><span class="STRN">""</span><span class="PUNC">,</span><span class="NAME">zoomOffset</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">tms</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">zoomReverse</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">detectRetina</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">crossOrigin</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">initialize</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._url</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">o.setOptions</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e.detectRetina</span><span class="PUNC">&&</span><span class="NAME">o.Browser.retina</span><span class="PUNC">&&</span><span class="NAME">e.maxZoom</span><span class="PUNC">></span><span class="NUMB">0</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">e.tileSize</span><span class="PUNC">=</span><span class="NAME">Math.floor</span><span class="PUNC">(</span><span class="NAME">e.tileSize</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e.zoomOffset</span><span class="PUNC">++</span><span class="PUNC">,</span><span class="NAME">e.minZoom</span><span class="PUNC">=</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">e.minZoom</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e.maxZoom</span><span class="PUNC">--</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="STRN">"string"</span><span class="PUNC">==</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">e.subdomains</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">e.subdomains</span><span class="PUNC">=</span><span class="NAME">e.subdomains.split</span><span class="PUNC">(</span><span class="STRN">""</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Browser.android</span><span class="PUNC">||</span><span class="NAME">this.on</span><span class="PUNC">(</span><span class="STRN">"tileunload"</span><span class="PUNC">,</span><span class="NAME">this._onTileRemove</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">setUrl</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._url</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">||</span><span class="NAME">this.redraw</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">createTile</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">e.createElement</span><span class="PUNC">(</span><span class="STRN">"img"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">o.DomEvent.on</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">,</span><span class="STRN">"load"</span><span class="PUNC">,</span><span class="NAME">o.bind</span><span class="PUNC">(</span><span class="NAME">this._tileOnLoad</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.DomEvent.on</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">,</span><span class="STRN">"error"</span><span class="PUNC">,</span><span class="NAME">o.bind</span><span class="PUNC">(</span><span class="NAME">this._tileOnError</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.options.crossOrigin</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">n.crossOrigin</span><span class="PUNC">=</span><span class="STRN">""</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n.alt</span><span class="PUNC">=</span><span class="STRN">""</span><span class="PUNC">,</span><span class="NAME">n.src</span><span class="PUNC">=</span><span class="NAME">this.getTileUrl</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getTileUrl</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">r</span><span class="PUNC">:</span><span class="NAME">o.Browser.retina</span><span class="PUNC">?</span><span class="STRN">"@2x"</span><span class="PUNC">:</span><span class="STRN">""</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">:</span><span class="NAME">this._getSubdomain</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">:</span><span class="NAME">t.x</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">:</span><span class="NAME">t.y</span><span class="PUNC">,</span><span class="NAME">z</span><span class="PUNC">:</span><span class="NAME">this._getZoomForUrl</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this._map</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">this._map.options.crs.infinite</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this._globalTileRange.max.y</span><span class="PUNC">-</span><span class="NAME">t.y</span><span class="PUNC">;</span><span class="NAME">this.options.tms</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">e.y</span><span class="PUNC">=</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">[</span><span class="STRN">"-y"</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">i</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">o.Util.template</span><span class="PUNC">(</span><span class="NAME">this._url</span><span class="PUNC">,</span><span class="NAME">o.extend</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">this.options</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_tileOnLoad</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.Browser.ielt9</span><span class="PUNC">?</span><span class="NAME">setTimeout</span><span class="PUNC">(</span><span class="NAME">o.bind</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">t</span><span class="PUNC">(</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_tileOnError</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">this.options.errorTileUrl</span><span class="PUNC">;</span><span class="NAME">n</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">e.src</span><span class="PUNC">=</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getTileSize</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">this._map</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">o.GridLayer.prototype.getTileSize.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this._tileZoom</span><span class="PUNC">+</span><span class="NAME">this.options.zoomOffset</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">this.options.maxNativeZoom</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">!==</span><span class="NAME">n</span><span class="PUNC">&&</span><span class="NAME">i</span><span class="PUNC">></span><span class="NAME">n</span><span class="PUNC">?</span><span class="NAME">e.divideBy</span><span class="PUNC">(</span><span class="NAME">t.getZoomScale</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">round</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">e</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_onTileRemove</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">t.tile.onload</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_getZoomForUrl</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">this.options</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this._tileZoom</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t.zoomReverse</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">t.maxZoom</span><span class="PUNC">-</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">+</span><span class="PUNC">=</span><span class="NAME">t.zoomOffset</span><span class="PUNC">,</span><span class="KEYW">null</span><span class="PUNC">!==</span><span class="NAME">t.maxNativeZoom</span><span class="PUNC">?</span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">t.maxNativeZoom</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">e</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_getSubdomain</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">t.x</span><span class="PUNC">+</span><span class="NAME">t.y</span><span class="PUNC">)</span><span class="PUNC">%</span><span class="NAME">this.options.subdomains.length</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.options.subdomains</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_abortLoading</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">t</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">this._tiles</span><span class="PUNC">)</span><span class="NAME">this._tiles</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">coords.z</span><span class="PUNC">!==</span><span class="NAME">this._tileZoom</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this._tiles</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">el</span><span class="PUNC">,</span><span class="NAME">e.onload</span><span class="PUNC">=</span><span class="NAME">o.Util.falseFn</span><span class="PUNC">,</span><span class="NAME">e.onerror</span><span class="PUNC">=</span><span class="NAME">o.Util.falseFn</span><span class="PUNC">,</span><span class="NAME">e.complete</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">e.src</span><span class="PUNC">=</span><span class="NAME">o.Util.emptyImageUrl</span><span class="PUNC">,</span><span class="NAME">o.DomUtil.remove</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.tileLayer</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.TileLayer</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.TileLayer.WMS</span><span class="PUNC">=</span><span class="NAME">o.TileLayer.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">defaultWmsParams</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="NAME">service</span><span class="PUNC">:</span><span class="STRN">"WMS"</span><span class="PUNC">,</span><span class="NAME">request</span><span class="PUNC">:</span><span class="STRN">"GetMap"</span><span class="PUNC">,</span><span class="NAME">layers</span><span class="PUNC">:</span><span class="STRN">""</span><span class="PUNC">,</span><span class="NAME">styles</span><span class="PUNC">:</span><span class="STRN">""</span><span class="PUNC">,</span><span class="NAME">format</span><span class="PUNC">:</span><span class="STRN">"image/jpeg"</span><span class="PUNC">,</span><span class="NAME">transparent</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">version</span><span class="PUNC">:</span><span class="STRN">"1.1.1"</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">options</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="NAME">crs</span><span class="PUNC">:</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">uppercase</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">initialize</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._url</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">o.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">this.defaultWmsParams</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">)</span><span class="NAME">n</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">this.options</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">[</span><span class="NAME">n</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NAME">n</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">o.setOptions</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i.width</span><span class="PUNC">=</span><span class="NAME">i.height</span><span class="PUNC">=</span><span class="NAME">e.tileSize</span><span class="PUNC">*</span><span class="PUNC">(</span><span class="NAME">e.detectRetina</span><span class="PUNC">&&</span><span class="NAME">o.Browser.retina</span><span class="PUNC">?</span><span class="NUMB">2</span><span class="PUNC">:</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.wmsParams</span><span class="PUNC">=</span><span class="NAME">i</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">onAdd</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._crs</span><span class="PUNC">=</span><span class="NAME">this.options.crs</span><span class="PUNC">||</span><span class="NAME">t.options.crs</span><span class="PUNC">,</span><span class="NAME">this._wmsVersion</span><span class="PUNC">=</span><span class="NAME">parseFloat</span><span class="PUNC">(</span><span class="NAME">this.wmsParams.version</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this._wmsVersion</span><span class="PUNC">>=</span><span class="NUMB">1.3</span><span class="PUNC">?</span><span class="STRN">"crs"</span><span class="PUNC">:</span><span class="STRN">"srs"</span><span class="PUNC">;</span><span class="NAME">this.wmsParams</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">this._crs.code</span><span class="PUNC">,</span><span class="NAME">o.TileLayer.prototype.onAdd.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getTileUrl</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this._tileCoordsToBounds</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this._crs.project</span><span class="PUNC">(</span><span class="NAME">e.getNorthWest</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">this._crs.project</span><span class="PUNC">(</span><span class="NAME">e.getSouthEast</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">this._wmsVersion</span><span class="PUNC">>=</span><span class="NUMB">1.3</span><span class="PUNC">&&</span><span class="NAME">this._crs</span><span class="PUNC">===</span><span class="NAME">o.CRS.EPSG4326</span><span class="PUNC">?</span><span class="PUNC">[</span><span class="NAME">n.y</span><span class="PUNC">,</span><span class="NAME">i.x</span><span class="PUNC">,</span><span class="NAME">i.y</span><span class="PUNC">,</span><span class="NAME">n.x</span><span class="PUNC">]</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="NAME">i.x</span><span class="PUNC">,</span><span class="NAME">n.y</span><span class="PUNC">,</span><span class="NAME">n.x</span><span class="PUNC">,</span><span class="NAME">i.y</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">join</span><span class="PUNC">(</span><span class="STRN">","</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">o.TileLayer.prototype.getTileUrl.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">r</span><span class="PUNC">+</span><span class="NAME">o.Util.getParamString</span><span class="PUNC">(</span><span class="NAME">this.wmsParams</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">,</span><span class="NAME">this.options.uppercase</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">this.options.uppercase</span><span class="PUNC">?</span><span class="STRN">"&BBOX="</span><span class="PUNC">:</span><span class="STRN">"&bbox="</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="NAME">s</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">setParams</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">o.extend</span><span class="PUNC">(</span><span class="NAME">this.wmsParams</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">||</span><span class="NAME">this.redraw</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.tileLayer.wms</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.TileLayer.WMS</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.ImageOverlay</span><span class="PUNC">=</span><span class="NAME">o.Layer.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">options</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="NAME">opacity</span><span class="PUNC">:</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">alt</span><span class="PUNC">:</span><span class="STRN">""</span><span class="PUNC">,</span><span class="NAME">interactive</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">attribution</span><span class="PUNC">:</span><span class="KEYW">null</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">initialize</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._url</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">this._bounds</span><span class="PUNC">=</span><span class="NAME">o.latLngBounds</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.setOptions</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">onAdd</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._image</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">this._initImage</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.options.opacity</span><span class="PUNC">&lt;</span><span class="NUMB">1</span><span class="PUNC">&&</span><span class="NAME">this._updateOpacity</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.options.interactive</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">o.DomUtil.addClass</span><span class="PUNC">(</span><span class="NAME">this._image</span><span class="PUNC">,</span><span class="STRN">"leaflet-interactive"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.addInteractiveTarget</span><span class="PUNC">(</span><span class="NAME">this._image</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.getPane</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">appendChild</span><span class="PUNC">(</span><span class="NAME">this._image</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._reset</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">onRemove</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.DomUtil.remove</span><span class="PUNC">(</span><span class="NAME">this._image</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.options.interactive</span><span class="PUNC">&&</span><span class="NAME">this.removeInteractiveTarget</span><span class="PUNC">(</span><span class="NAME">this._image</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">setOpacity</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.options.opacity</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">this._image</span><span class="PUNC">&&</span><span class="NAME">this._updateOpacity</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">setStyle</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t.opacity</span><span class="PUNC">&&</span><span class="NAME">this.setOpacity</span><span class="PUNC">(</span><span class="NAME">t.opacity</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">bringToFront</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._map</span><span class="PUNC">&&</span><span class="NAME">o.DomUtil.toFront</span><span class="PUNC">(</span><span class="NAME">this._image</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">bringToBack</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._map</span><span class="PUNC">&&</span><span class="NAME">o.DomUtil.toBack</span><span class="PUNC">(</span><span class="NAME">this._image</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">setUrl</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._url</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">this._image</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">this._image.src</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">setBounds</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._bounds</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">this._map</span><span class="PUNC">&&</span><span class="NAME">this._reset</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getAttribution</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.options.attribution</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getEvents</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">zoom</span><span class="PUNC">:</span><span class="NAME">this._reset</span><span class="PUNC">,</span><span class="NAME">viewreset</span><span class="PUNC">:</span><span class="NAME">this._reset</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._zoomAnimated</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">t.zoomanim</span><span class="PUNC">=</span><span class="NAME">this._animateZoom</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getBounds</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._bounds</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getElement</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._image</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_initImage</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">this._image</span><span class="PUNC">=</span><span class="NAME">o.DomUtil.create</span><span class="PUNC">(</span><span class="STRN">"img"</span><span class="PUNC">,</span><span class="STRN">"leaflet-image-layer "</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">this._zoomAnimated</span><span class="PUNC">?</span><span class="STRN">"leaflet-zoom-animated"</span><span class="PUNC">:</span><span class="STRN">""</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">t.onselectstart</span><span class="PUNC">=</span><span class="NAME">o.Util.falseFn</span><span class="PUNC">,</span><span class="NAME">t.onmousemove</span><span class="PUNC">=</span><span class="NAME">o.Util.falseFn</span><span class="PUNC">,</span><span class="NAME">t.onload</span><span class="PUNC">=</span><span class="NAME">o.bind</span><span class="PUNC">(</span><span class="NAME">this.fire</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="STRN">"load"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.options.crossOrigin</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">t.crossOrigin</span><span class="PUNC">=</span><span class="STRN">""</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t.src</span><span class="PUNC">=</span><span class="NAME">this._url</span><span class="PUNC">,</span><span class="NAME">t.alt</span><span class="PUNC">=</span><span class="NAME">this.options.alt</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_animateZoom</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this._map.getZoomScale</span><span class="PUNC">(</span><span class="NAME">t.zoom</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this._map._latLngToNewLayerPoint</span><span class="PUNC">(</span><span class="NAME">this._bounds.getNorthWest</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t.zoom</span><span class="PUNC">,</span><span class="NAME">t.center</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">o.DomUtil.setTransform</span><span class="PUNC">(</span><span class="NAME">this._image</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_reset</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">this._image</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Bounds</span><span class="PUNC">(</span><span class="NAME">this._map.latLngToLayerPoint</span><span class="PUNC">(</span><span class="NAME">this._bounds.getNorthWest</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._map.latLngToLayerPoint</span><span class="PUNC">(</span><span class="NAME">this._bounds.getSouthEast</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">e.getSize</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">o.DomUtil.setPosition</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e.min</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t.style.width</span><span class="PUNC">=</span><span class="NAME">i.x</span><span class="PUNC">+</span><span class="STRN">"px"</span><span class="PUNC">,</span><span class="NAME">t.style.height</span><span class="PUNC">=</span><span class="NAME">i.y</span><span class="PUNC">+</span><span class="STRN">"px"</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_updateOpacity</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.DomUtil.setOpacity</span><span class="PUNC">(</span><span class="NAME">this._image</span><span class="PUNC">,</span><span class="NAME">this.options.opacity</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.imageOverlay</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.ImageOverlay</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.Icon</span><span class="PUNC">=</span><span class="NAME">o.Class.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">initialize</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.setOptions</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">createIcon</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._createIcon</span><span class="PUNC">(</span><span class="STRN">"icon"</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">createShadow</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._createIcon</span><span class="PUNC">(</span><span class="STRN">"shadow"</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_createIcon</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this._getIconUrl</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="STRN">"icon"</span><span class="PUNC">===</span><span class="NAME">t</span><span class="PUNC">)</span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Error</span><span class="PUNC">(</span><span class="STRN">"iconUrl not set in Icon options (see the docs)."</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">this._createImg</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">&&</span><span class="STRN">"IMG"</span><span class="PUNC">===</span><span class="NAME">e.tagName</span><span class="PUNC">?</span><span class="NAME">e</span><span class="PUNC">:</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._setIconStyles</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_setIconStyles</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this.options</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">o.point</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">+</span><span class="STRN">"Size"</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">o.point</span><span class="PUNC">(</span><span class="STRN">"shadow"</span><span class="PUNC">===</span><span class="NAME">e</span><span class="PUNC">&&</span><span class="NAME">i.shadowAnchor</span><span class="PUNC">||</span><span class="NAME">i.iconAnchor</span><span class="PUNC">||</span><span class="NAME">n</span><span class="PUNC">&&</span><span class="NAME">n.divideBy</span><span class="PUNC">(</span><span class="NUMB">2</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">t.className</span><span class="PUNC">=</span><span class="STRN">"leaflet-marker-"</span><span class="PUNC">+</span><span class="NAME">e</span><span class="PUNC">+</span><span class="STRN">" "</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">i.className</span><span class="PUNC">||</span><span class="STRN">""</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">t.style.marginLeft</span><span class="PUNC">=</span><span class="PUNC">-</span><span class="NAME">s.x</span><span class="PUNC">+</span><span class="STRN">"px"</span><span class="PUNC">,</span><span class="NAME">t.style.marginTop</span><span class="PUNC">=</span><span class="PUNC">-</span><span class="NAME">s.y</span><span class="PUNC">+</span><span class="STRN">"px"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">t.style.width</span><span class="PUNC">=</span><span class="NAME">n.x</span><span class="PUNC">+</span><span class="STRN">"px"</span><span class="PUNC">,</span><span class="NAME">t.style.height</span><span class="PUNC">=</span><span class="NAME">n.y</span><span class="PUNC">+</span><span class="STRN">"px"</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_createImg</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">i</span><span class="PUNC">||</span><span class="NAME">e.createElement</span><span class="PUNC">(</span><span class="STRN">"img"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i.src</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_getIconUrl</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">o.Browser.retina</span><span class="PUNC">&&</span><span class="NAME">this.options</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">+</span><span class="STRN">"RetinaUrl"</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="NAME">this.options</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">+</span><span class="STRN">"Url"</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.icon</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Icon</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.Icon.Default</span><span class="PUNC">=</span><span class="NAME">o.Icon.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">options</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="NAME">iconSize</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="NUMB">25</span><span class="PUNC">,</span><span class="NUMB">41</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">iconAnchor</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="NUMB">12</span><span class="PUNC">,</span><span class="NUMB">41</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">popupAnchor</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="PUNC">-</span><span class="NUMB">34</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">shadowSize</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="NUMB">41</span><span class="PUNC">,</span><span class="NUMB">41</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_getIconUrl</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">+</span><span class="STRN">"Url"</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.options</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">o.Icon.Default.imagePath</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">i</span><span class="PUNC">)</span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Error</span><span class="PUNC">(</span><span class="STRN">"Couldn't autodetect L.Icon.Default.imagePath, set it manually."</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">+</span><span class="STRN">"/marker-"</span><span class="PUNC">+</span><span class="NAME">t</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">o.Browser.retina</span><span class="PUNC">&&</span><span class="STRN">"icon"</span><span class="PUNC">===</span><span class="NAME">t</span><span class="PUNC">?</span><span class="STRN">"-2x"</span><span class="PUNC">:</span><span class="STRN">""</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">".png"</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Icon.Default.imagePath</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">e.getElementsByTagName</span><span class="PUNC">(</span><span class="STRN">"script"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="REGX">/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">s.length</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">></span><span class="NAME">t</span><span class="PUNC">;</span><span class="NAME">t</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">s</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">src</span><span class="PUNC">||</span><span class="STRN">""</span><span class="PUNC">,</span><span class="NAME">n.match</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">o</span><span class="PUNC">=</span><span class="NAME">n.split</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">)</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">(</span><span class="NAME">o</span><span class="PUNC">?</span><span class="NAME">o</span><span class="PUNC">+</span><span class="STRN">"/"</span><span class="PUNC">:</span><span class="STRN">""</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">"images"</span><span class="PUNC">}</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Marker</span><span class="PUNC">=</span><span class="NAME">o.Layer.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">options</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="NAME">icon</span><span class="PUNC">:</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Icon.Default</span><span class="PUNC">,</span><span class="NAME">interactive</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">draggable</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">keyboard</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">title</span><span class="PUNC">:</span><span class="STRN">""</span><span class="PUNC">,</span><span class="NAME">alt</span><span class="PUNC">:</span><span class="STRN">""</span><span class="PUNC">,</span><span class="NAME">zIndexOffset</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">opacity</span><span class="PUNC">:</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">riseOnHover</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">riseOffset</span><span class="PUNC">:</span><span class="NUMB">250</span><span class="PUNC">,</span><span class="NAME">pane</span><span class="PUNC">:</span><span class="STRN">"markerPane"</span><span class="PUNC">,</span><span class="NAME">nonBubblingEvents</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="STRN">"click"</span><span class="PUNC">,</span><span class="STRN">"dblclick"</span><span class="PUNC">,</span><span class="STRN">"mouseover"</span><span class="PUNC">,</span><span class="STRN">"mouseout"</span><span class="PUNC">,</span><span class="STRN">"contextmenu"</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">initialize</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.setOptions</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._latlng</span><span class="PUNC">=</span><span class="NAME">o.latLng</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">onAdd</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._zoomAnimated</span><span class="PUNC">=</span><span class="NAME">this._zoomAnimated</span><span class="PUNC">&&</span><span class="NAME">t.options.markerZoomAnimation</span><span class="PUNC">,</span><span class="NAME">this._initIcon</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.update</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">onRemove</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.dragging</span><span class="PUNC">&&</span><span class="NAME">this.dragging.enabled</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">this.options.draggable</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">this.dragging.removeHooks</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._removeIcon</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._removeShadow</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getEvents</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">zoom</span><span class="PUNC">:</span><span class="NAME">this.update</span><span class="PUNC">,</span><span class="NAME">viewreset</span><span class="PUNC">:</span><span class="NAME">this.update</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._zoomAnimated</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">t.zoomanim</span><span class="PUNC">=</span><span class="NAME">this._animateZoom</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getLatLng</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._latlng</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">setLatLng</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this._latlng</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._latlng</span><span class="PUNC">=</span><span class="NAME">o.latLng</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.update</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.fire</span><span class="PUNC">(</span><span class="STRN">"move"</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">oldLatLng</span><span class="PUNC">:</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">latlng</span><span class="PUNC">:</span><span class="NAME">this._latlng</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">setZIndexOffset</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.options.zIndexOffset</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">this.update</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">setIcon</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.options.icon</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">this._map</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">this._initIcon</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.update</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._popup</span><span class="PUNC">&&</span><span class="NAME">this.bindPopup</span><span class="PUNC">(</span><span class="NAME">this._popup</span><span class="PUNC">,</span><span class="NAME">this._popup.options</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getElement</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._icon</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">update</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this._icon</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">this._map.latLngToLayerPoint</span><span class="PUNC">(</span><span class="NAME">this._latlng</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">round</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this._setPos</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_initIcon</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">this.options</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="STRN">"leaflet-zoom-"</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">this._zoomAnimated</span><span class="PUNC">?</span><span class="STRN">"animated"</span><span class="PUNC">:</span><span class="STRN">"hide"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">t.icon.createIcon</span><span class="PUNC">(</span><span class="NAME">this._icon</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">!==</span><span class="NAME">this._icon</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">this._icon</span><span class="PUNC">&&</span><span class="NAME">this._removeIcon</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">t.title</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">i.title</span><span class="PUNC">=</span><span class="NAME">t.title</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t.alt</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">i.alt</span><span class="PUNC">=</span><span class="NAME">t.alt</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.DomUtil.addClass</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t.keyboard</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">i.tabIndex</span><span class="PUNC">=</span><span class="STRN">"0"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._icon</span><span class="PUNC">=</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">t.riseOnHover</span><span class="PUNC">&&</span><span class="NAME">this.on</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">mouseover</span><span class="PUNC">:</span><span class="NAME">this._bringToFront</span><span class="PUNC">,</span><span class="NAME">mouseout</span><span class="PUNC">:</span><span class="NAME">this._resetZIndex</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">t.icon.createShadow</span><span class="PUNC">(</span><span class="NAME">this._shadow</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="NAME">s</span><span class="PUNC">!==</span><span class="NAME">this._shadow</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">this._removeShadow</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">&&</span><span class="NAME">o.DomUtil.addClass</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._shadow</span><span class="PUNC">=</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">t.opacity</span><span class="PUNC">&lt;</span><span class="NUMB">1</span><span class="PUNC">&&</span><span class="NAME">this._updateOpacity</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">&&</span><span class="NAME">this.getPane</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">appendChild</span><span class="PUNC">(</span><span class="NAME">this._icon</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._initInteraction</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">&&</span><span class="NAME">r</span><span class="PUNC">&&</span><span class="NAME">this.getPane</span><span class="PUNC">(</span><span class="STRN">"shadowPane"</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">appendChild</span><span class="PUNC">(</span><span class="NAME">this._shadow</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_removeIcon</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.options.riseOnHover</span><span class="PUNC">&&</span><span class="NAME">this.off</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">mouseover</span><span class="PUNC">:</span><span class="NAME">this._bringToFront</span><span class="PUNC">,</span><span class="NAME">mouseout</span><span class="PUNC">:</span><span class="NAME">this._resetZIndex</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.DomUtil.remove</span><span class="PUNC">(</span><span class="NAME">this._icon</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.removeInteractiveTarget</span><span class="PUNC">(</span><span class="NAME">this._icon</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._icon</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_removeShadow</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._shadow</span><span class="PUNC">&&</span><span class="NAME">o.DomUtil.remove</span><span class="PUNC">(</span><span class="NAME">this._shadow</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._shadow</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_setPos</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.DomUtil.setPosition</span><span class="PUNC">(</span><span class="NAME">this._icon</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._shadow</span><span class="PUNC">&&</span><span class="NAME">o.DomUtil.setPosition</span><span class="PUNC">(</span><span class="NAME">this._shadow</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._zIndex</span><span class="PUNC">=</span><span class="NAME">t.y</span><span class="PUNC">+</span><span class="NAME">this.options.zIndexOffset</span><span class="PUNC">,</span><span class="NAME">this._resetZIndex</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_updateZIndex</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._icon.style.zIndex</span><span class="PUNC">=</span><span class="NAME">this._zIndex</span><span class="PUNC">+</span><span class="NAME">t</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_animateZoom</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this._map._latLngToNewLayerPoint</span><span class="PUNC">(</span><span class="NAME">this._latlng</span><span class="PUNC">,</span><span class="NAME">t.zoom</span><span class="PUNC">,</span><span class="NAME">t.center</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">round</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this._setPos</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_initInteraction</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.interactive</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">o.DomUtil.addClass</span><span class="PUNC">(</span><span class="NAME">this._icon</span><span class="PUNC">,</span><span class="STRN">"leaflet-interactive"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.addInteractiveTarget</span><span class="PUNC">(</span><span class="NAME">this._icon</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Handler.MarkerDrag</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">this.options.draggable</span><span class="PUNC">;</span><span class="NAME">this.dragging</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">this.dragging.enabled</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.dragging.disable</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.dragging</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Handler.MarkerDrag</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">&&</span><span class="NAME">this.dragging.enable</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">setOpacity</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.options.opacity</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">this._map</span><span class="PUNC">&&</span><span class="NAME">this._updateOpacity</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_updateOpacity</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">this.options.opacity</span><span class="PUNC">;</span><span class="NAME">o.DomUtil.setOpacity</span><span class="PUNC">(</span><span class="NAME">this._icon</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._shadow</span><span class="PUNC">&&</span><span class="NAME">o.DomUtil.setOpacity</span><span class="PUNC">(</span><span class="NAME">this._shadow</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_bringToFront</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._updateZIndex</span><span class="PUNC">(</span><span class="NAME">this.options.riseOffset</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_resetZIndex</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._updateZIndex</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.marker</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Marker</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.DivIcon</span><span class="PUNC">=</span><span class="NAME">o.Icon.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">options</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="NAME">iconSize</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="NUMB">12</span><span class="PUNC">,</span><span class="NUMB">12</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">html</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">bgPos</span><span class="PUNC">:</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">className</span><span class="PUNC">:</span><span class="STRN">"leaflet-div-icon"</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">createIcon</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">&&</span><span class="STRN">"DIV"</span><span class="PUNC">===</span><span class="NAME">t.tagName</span><span class="PUNC">?</span><span class="NAME">t</span><span class="PUNC">:</span><span class="NAME">e.createElement</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">this.options</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">i.innerHTML</span><span class="PUNC">=</span><span class="NAME">n.html</span><span class="PUNC">!==</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">?</span><span class="NAME">n.html</span><span class="PUNC">:</span><span class="STRN">""</span><span class="PUNC">,</span><span class="NAME">n.bgPos</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">o.point</span><span class="PUNC">(</span><span class="NAME">n.bgPos</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">i.style.backgroundPosition</span><span class="PUNC">=</span><span class="PUNC">-</span><span class="NAME">s.x</span><span class="PUNC">+</span><span class="STRN">"px "</span><span class="PUNC">+</span><span class="PUNC">-</span><span class="NAME">s.y</span><span class="PUNC">+</span><span class="STRN">"px"</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._setIconStyles</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">,</span><span class="STRN">"icon"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">createShadow</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.divIcon</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.DivIcon</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.Map.mergeOptions</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">closePopupOnClick</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Popup</span><span class="PUNC">=</span><span class="NAME">o.Layer.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">options</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="NAME">maxWidth</span><span class="PUNC">:</span><span class="NUMB">300</span><span class="PUNC">,</span><span class="NAME">minWidth</span><span class="PUNC">:</span><span class="NUMB">50</span><span class="PUNC">,</span><span class="NAME">maxHeight</span><span class="PUNC">:</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">autoPan</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">autoPanPaddingTopLeft</span><span class="PUNC">:</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">autoPanPaddingBottomRight</span><span class="PUNC">:</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">autoPanPadding</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="NUMB">5</span><span class="PUNC">,</span><span class="NUMB">5</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">keepInView</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">closeButton</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">offset</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">7</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">autoClose</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">zoomAnimation</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">className</span><span class="PUNC">:</span><span class="STRN">""</span><span class="PUNC">,</span><span class="NAME">pane</span><span class="PUNC">:</span><span class="STRN">"popupPane"</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">initialize</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.setOptions</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._source</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">onAdd</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._zoomAnimated</span><span class="PUNC">=</span><span class="NAME">this._zoomAnimated</span><span class="PUNC">&&</span><span class="NAME">this.options.zoomAnimation</span><span class="PUNC">,</span><span class="NAME">this._container</span><span class="PUNC">||</span><span class="NAME">this._initLayout</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t._fadeAnimated</span><span class="PUNC">&&</span><span class="NAME">o.DomUtil.setOpacity</span><span class="PUNC">(</span><span class="NAME">this._container</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">clearTimeout</span><span class="PUNC">(</span><span class="NAME">this._removeTimeout</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.getPane</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">appendChild</span><span class="PUNC">(</span><span class="NAME">this._container</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.update</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t._fadeAnimated</span><span class="PUNC">&&</span><span class="NAME">o.DomUtil.setOpacity</span><span class="PUNC">(</span><span class="NAME">this._container</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t.fire</span><span class="PUNC">(</span><span class="STRN">"popupopen"</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">popup</span><span class="PUNC">:</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._source</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">this._source.fire</span><span class="PUNC">(</span><span class="STRN">"popupopen"</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">popup</span><span class="PUNC">:</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._source.on</span><span class="PUNC">(</span><span class="STRN">"preclick"</span><span class="PUNC">,</span><span class="NAME">o.DomEvent.stopPropagation</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">openOn</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t.openPopup</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">onRemove</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">t._fadeAnimated</span><span class="PUNC">?</span><span class="PUNC">(</span><span class="NAME">o.DomUtil.setOpacity</span><span class="PUNC">(</span><span class="NAME">this._container</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._removeTimeout</span><span class="PUNC">=</span><span class="NAME">setTimeout</span><span class="PUNC">(</span><span class="NAME">o.bind</span><span class="PUNC">(</span><span class="NAME">o.DomUtil.remove</span><span class="PUNC">,</span><span class="NAME">o.DomUtil</span><span class="PUNC">,</span><span class="NAME">this._container</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NUMB">200</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">o.DomUtil.remove</span><span class="PUNC">(</span><span class="NAME">this._container</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t.fire</span><span class="PUNC">(</span><span class="STRN">"popupclose"</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">popup</span><span class="PUNC">:</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._source</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">this._source.fire</span><span class="PUNC">(</span><span class="STRN">"popupclose"</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">popup</span><span class="PUNC">:</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._source.off</span><span class="PUNC">(</span><span class="STRN">"preclick"</span><span class="PUNC">,</span><span class="NAME">o.DomEvent.stopPropagation</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getLatLng</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._latlng</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">setLatLng</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._latlng</span><span class="PUNC">=</span><span class="NAME">o.latLng</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._map</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">this._updatePosition</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._adjustPan</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getContent</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._content</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">setContent</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._content</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">this.update</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getElement</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._container</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">update</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._map</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">this._container.style.visibility</span><span class="PUNC">=</span><span class="STRN">"hidden"</span><span class="PUNC">,</span><span class="NAME">this._updateContent</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._updateLayout</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._updatePosition</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._container.style.visibility</span><span class="PUNC">=</span><span class="STRN">""</span><span class="PUNC">,</span><span class="NAME">this._adjustPan</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getEvents</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">zoom</span><span class="PUNC">:</span><span class="NAME">this._updatePosition</span><span class="PUNC">,</span><span class="NAME">viewreset</span><span class="PUNC">:</span><span class="NAME">this._updatePosition</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._zoomAnimated</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">t.zoomanim</span><span class="PUNC">=</span><span class="NAME">this._animateZoom</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="PUNC">(</span><span class="STRN">"closeOnClick"</span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">this.options</span><span class="PUNC">?</span><span class="NAME">this.options.closeOnClick</span><span class="PUNC">:</span><span class="NAME">this._map.options.closePopupOnClick</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">t.preclick</span><span class="PUNC">=</span><span class="NAME">this._close</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.options.keepInView</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">t.moveend</span><span class="PUNC">=</span><span class="NAME">this._adjustPan</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">isOpen</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">!</span><span class="PUNC">!</span><span class="NAME">this._map</span><span class="PUNC">&&</span><span class="NAME">this._map.hasLayer</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">bringToFront</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._map</span><span class="PUNC">&&</span><span class="NAME">o.DomUtil.toFront</span><span class="PUNC">(</span><span class="NAME">this._container</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">bringToBack</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._map</span><span class="PUNC">&&</span><span class="NAME">o.DomUtil.toBack</span><span class="PUNC">(</span><span class="NAME">this._container</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_close</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._map</span><span class="PUNC">&&</span><span class="NAME">this._map.closePopup</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_initLayout</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="STRN">"leaflet-popup"</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this._container</span><span class="PUNC">=</span><span class="NAME">o.DomUtil.create</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">+</span><span class="STRN">" "</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">this.options.className</span><span class="PUNC">||</span><span class="STRN">""</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">" leaflet-zoom-"</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">this._zoomAnimated</span><span class="PUNC">?</span><span class="STRN">"animated"</span><span class="PUNC">:</span><span class="STRN">"hide"</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.closeButton</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this._closeButton</span><span class="PUNC">=</span><span class="NAME">o.DomUtil.create</span><span class="PUNC">(</span><span class="STRN">"a"</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">+</span><span class="STRN">"-close-button"</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">i.href</span><span class="PUNC">=</span><span class="STRN">"#close"</span><span class="PUNC">,</span><span class="NAME">i.innerHTML</span><span class="PUNC">=</span><span class="STRN">"&#215;"</span><span class="PUNC">,</span><span class="NAME">o.DomEvent.on</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">,</span><span class="STRN">"click"</span><span class="PUNC">,</span><span class="NAME">this._onCloseButtonClick</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">this._wrapper</span><span class="PUNC">=</span><span class="NAME">o.DomUtil.create</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">+</span><span class="STRN">"-content-wrapper"</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this._contentNode</span><span class="PUNC">=</span><span class="NAME">o.DomUtil.create</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">+</span><span class="STRN">"-content"</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.DomEvent.disableClickPropagation</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">disableScrollPropagation</span><span class="PUNC">(</span><span class="NAME">this._contentNode</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">on</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">,</span><span class="STRN">"contextmenu"</span><span class="PUNC">,</span><span class="NAME">o.DomEvent.stopPropagation</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._tipContainer</span><span class="PUNC">=</span><span class="NAME">o.DomUtil.create</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">+</span><span class="STRN">"-tip-container"</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._tip</span><span class="PUNC">=</span><span class="NAME">o.DomUtil.create</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">+</span><span class="STRN">"-tip"</span><span class="PUNC">,</span><span class="NAME">this._tipContainer</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_updateContent</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this._content</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">this._contentNode</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="STRN">"function"</span><span class="PUNC">==</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">this._content</span><span class="PUNC">?</span><span class="NAME">this._content</span><span class="PUNC">(</span><span class="NAME">this._source</span><span class="PUNC">||</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">this._content</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="STRN">"string"</span><span class="PUNC">==</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">)</span><span class="NAME">t.innerHTML</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">;</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="PUNC">;</span><span class="NAME">t.hasChildNodes</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">)</span><span class="NAME">t.removeChild</span><span class="PUNC">(</span><span class="NAME">t.firstChild</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">t.appendChild</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">this.fire</span><span class="PUNC">(</span><span class="STRN">"contentupdate"</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_updateLayout</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">this._contentNode</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">t.style</span><span class="PUNC">;</span><span class="NAME">e.width</span><span class="PUNC">=</span><span class="STRN">""</span><span class="PUNC">,</span><span class="NAME">e.whiteSpace</span><span class="PUNC">=</span><span class="STRN">"nowrap"</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">t.offsetWidth</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">this.options.maxWidth</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">this.options.minWidth</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e.width</span><span class="PUNC">=</span><span class="NAME">i</span><span class="PUNC">+</span><span class="NUMB">1</span><span class="PUNC">+</span><span class="STRN">"px"</span><span class="PUNC">,</span><span class="NAME">e.whiteSpace</span><span class="PUNC">=</span><span class="STRN">""</span><span class="PUNC">,</span><span class="NAME">e.height</span><span class="PUNC">=</span><span class="STRN">""</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">t.offsetHeight</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">this.options.maxHeight</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="STRN">"leaflet-popup-scrolled"</span><span class="PUNC">;</span><span class="NAME">s</span><span class="PUNC">&&</span><span class="NAME">n</span><span class="PUNC">></span><span class="NAME">s</span><span class="PUNC">?</span><span class="PUNC">(</span><span class="NAME">e.height</span><span class="PUNC">=</span><span class="NAME">s</span><span class="PUNC">+</span><span class="STRN">"px"</span><span class="PUNC">,</span><span class="NAME">o.DomUtil.addClass</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">o.DomUtil.removeClass</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._containerWidth</span><span class="PUNC">=</span><span class="NAME">this._container.offsetWidth</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_updatePosition</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this._map</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">this._map.latLngToLayerPoint</span><span class="PUNC">(</span><span class="NAME">this._latlng</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">o.point</span><span class="PUNC">(</span><span class="NAME">this.options.offset</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this._zoomAnimated</span><span class="PUNC">?</span><span class="NAME">o.DomUtil.setPosition</span><span class="PUNC">(</span><span class="NAME">this._container</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">e.add</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this._containerBottom</span><span class="PUNC">=</span><span class="PUNC">-</span><span class="NAME">e.y</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">this._containerLeft</span><span class="PUNC">=</span><span class="PUNC">-</span><span class="NAME">Math.round</span><span class="PUNC">(</span><span class="NAME">this._containerWidth</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="NAME">e.x</span><span class="PUNC">;</span><span class="NAME">this._container.style.bottom</span><span class="PUNC">=</span><span class="NAME">i</span><span class="PUNC">+</span><span class="STRN">"px"</span><span class="PUNC">,</span><span class="NAME">this._container.style.left</span><span class="PUNC">=</span><span class="NAME">n</span><span class="PUNC">+</span><span class="STRN">"px"</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_animateZoom</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this._map._latLngToNewLayerPoint</span><span class="PUNC">(</span><span class="NAME">this._latlng</span><span class="PUNC">,</span><span class="NAME">t.zoom</span><span class="PUNC">,</span><span class="NAME">t.center</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">o.DomUtil.setPosition</span><span class="PUNC">(</span><span class="NAME">this._container</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_adjustPan</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.options.autoPan</span><span class="PUNC">||</span><span class="NAME">this._map._panAnim</span><span class="PUNC">&&</span><span class="NAME">this._map._panAnim._inProgress</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">this._map</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this._container.offsetHeight</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this._containerWidth</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Point</span><span class="PUNC">(</span><span class="NAME">this._containerLeft</span><span class="PUNC">,</span><span class="PUNC">-</span><span class="NAME">e</span><span class="PUNC">-</span><span class="NAME">this._containerBottom</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this._zoomAnimated</span><span class="PUNC">&&</span><span class="NAME">n._add</span><span class="PUNC">(</span><span class="NAME">o.DomUtil.getPosition</span><span class="PUNC">(</span><span class="NAME">this._container</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">t.layerPointToContainerPoint</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">o.point</span><span class="PUNC">(</span><span class="NAME">this.options.autoPanPadding</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">o.point</span><span class="PUNC">(</span><span class="NAME">this.options.autoPanPaddingTopLeft</span><span class="PUNC">||</span><span class="NAME">r</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">=</span><span class="NAME">o.point</span><span class="PUNC">(</span><span class="NAME">this.options.autoPanPaddingBottomRight</span><span class="PUNC">||</span><span class="NAME">r</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">=</span><span class="NAME">t.getSize</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">c</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">s.x</span><span class="PUNC">+</span><span class="NAME">i</span><span class="PUNC">+</span><span class="NAME">h.x</span><span class="PUNC">></span><span class="NAME">l.x</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">=</span><span class="NAME">s.x</span><span class="PUNC">+</span><span class="NAME">i</span><span class="PUNC">-</span><span class="NAME">l.x</span><span class="PUNC">+</span><span class="NAME">h.x</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s.x</span><span class="PUNC">-</span><span class="NAME">u</span><span class="PUNC">-</span><span class="NAME">a.x</span><span class="PUNC">&lt;</span><span class="NUMB">0</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">=</span><span class="NAME">s.x</span><span class="PUNC">-</span><span class="NAME">a.x</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s.y</span><span class="PUNC">+</span><span class="NAME">e</span><span class="PUNC">+</span><span class="NAME">h.y</span><span class="PUNC">></span><span class="NAME">l.y</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">c</span><span class="PUNC">=</span><span class="NAME">s.y</span><span class="PUNC">+</span><span class="NAME">e</span><span class="PUNC">-</span><span class="NAME">l.y</span><span class="PUNC">+</span><span class="NAME">h.y</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s.y</span><span class="PUNC">-</span><span class="NAME">c</span><span class="PUNC">-</span><span class="NAME">a.y</span><span class="PUNC">&lt;</span><span class="NUMB">0</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">c</span><span class="PUNC">=</span><span class="NAME">s.y</span><span class="PUNC">-</span><span class="NAME">a.y</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">||</span><span class="NAME">c</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="NAME">t.fire</span><span class="PUNC">(</span><span class="STRN">"autopanstart"</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">panBy</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="NAME">u</span><span class="PUNC">,</span><span class="NAME">c</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_onCloseButtonClick</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._close</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.DomEvent.stop</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.popup</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Popup</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.Map.include</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">openPopup</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">o.Popup</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Popup</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">setContent</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">&&</span><span class="NAME">t.setLatLng</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.hasLayer</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="KEYW">this</span><span class="PUNC">:</span><span class="PUNC">(</span><span class="NAME">this._popup</span><span class="PUNC">&&</span><span class="NAME">this._popup.options.autoClose</span><span class="PUNC">&&</span><span class="NAME">this.closePopup</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._popup</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">this.addLayer</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">closePopup</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">&&</span><span class="NAME">t</span><span class="PUNC">!==</span><span class="NAME">this._popup</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">this._popup</span><span class="PUNC">,</span><span class="NAME">this._popup</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">&&</span><span class="NAME">this.removeLayer</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Layer.include</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">bindPopup</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">o.Popup</span><span class="PUNC">?</span><span class="PUNC">(</span><span class="NAME">o.setOptions</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._popup</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">t._source</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="PUNC">(</span><span class="NAME">this._popup</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">e</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">this._popup</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Popup</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._popup.setContent</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._popupHandlersAdded</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">this.on</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">click</span><span class="PUNC">:</span><span class="NAME">this._openPopup</span><span class="PUNC">,</span><span class="NAME">remove</span><span class="PUNC">:</span><span class="NAME">this.closePopup</span><span class="PUNC">,</span><span class="NAME">move</span><span class="PUNC">:</span><span class="NAME">this._movePopup</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._popupHandlersAdded</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._originalPopupOffset</span><span class="PUNC">=</span><span class="NAME">this._popup.options.offset</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">unbindPopup</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._popup</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">this.off</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">click</span><span class="PUNC">:</span><span class="NAME">this._openPopup</span><span class="PUNC">,</span><span class="NAME">remove</span><span class="PUNC">:</span><span class="NAME">this.closePopup</span><span class="PUNC">,</span><span class="NAME">move</span><span class="PUNC">:</span><span class="NAME">this._movePopup</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._popupHandlersAdded</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">this._popup</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">openPopup</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">t</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">o.Layer</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">o.FeatureGroup</span><span class="PUNC">)</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">this._layers</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">this._layers</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>  7</span> </span><span class="KEYW">break</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">t.getCenter</span><span class="PUNC">?</span><span class="NAME">t.getCenter</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">t.getLatLng</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._popup</span><span class="PUNC">&&</span><span class="NAME">this._map</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">this._popup.options.offset</span><span class="PUNC">=</span><span class="NAME">this._popupAnchor</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._popup._source</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">this._popup.update</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._map.openPopup</span><span class="PUNC">(</span><span class="NAME">this._popup</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">closePopup</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._popup</span><span class="PUNC">&&</span><span class="NAME">this._popup._close</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">togglePopup</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._popup</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">this._popup._map</span><span class="PUNC">?</span><span class="NAME">this.closePopup</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">this.openPopup</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">isPopupOpen</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._popup.isOpen</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">setPopupContent</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._popup</span><span class="PUNC">&&</span><span class="NAME">this._popup.setContent</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getPopup</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._popup</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_openPopup</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">t.layer</span><span class="PUNC">||</span><span class="NAME">t.target</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this._popup</span><span class="PUNC">&&</span><span class="NAME">this._map</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">e</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">o.Path</span><span class="PUNC">?</span><span class="KEYW">void</span><span class="WHIT"> </span><span class="NAME">this.openPopup</span><span class="PUNC">(</span><span class="NAME">t.layer</span><span class="PUNC">||</span><span class="NAME">t.target</span><span class="PUNC">,</span><span class="NAME">t.latlng</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="KEYW">void</span><span class="PUNC">(</span><span class="NAME">this._map.hasLayer</span><span class="PUNC">(</span><span class="NAME">this._popup</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="NAME">this._popup._source</span><span class="PUNC">===</span><span class="NAME">e</span><span class="PUNC">?</span><span class="NAME">this.closePopup</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">this.openPopup</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">t.latlng</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_popupAnchor</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">t._getPopupAnchor</span><span class="PUNC">?</span><span class="NAME">t._getPopupAnchor</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this._originalPopupOffset</span><span class="PUNC">||</span><span class="NAME">o.Popup.prototype.options.offset</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">o.point</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">add</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_movePopup</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._popup.setLatLng</span><span class="PUNC">(</span><span class="NAME">t.latlng</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Marker.include</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">_getPopupAnchor</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.options.icon.options.popupAnchor</span><span class="PUNC">||</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.LayerGroup</span><span class="PUNC">=</span><span class="NAME">o.Layer.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">initialize</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._layers</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">t.length</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">></span><span class="NAME">e</span><span class="PUNC">;</span><span class="NAME">e</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="NAME">this.addLayer</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">addLayer</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this.getLayerId</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._layers</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">this._map</span><span class="PUNC">&&</span><span class="NAME">this._map.addLayer</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">removeLayer</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">t</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">this._layers</span><span class="PUNC">?</span><span class="NAME">t</span><span class="PUNC">:</span><span class="NAME">this.getLayerId</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._map</span><span class="PUNC">&&</span><span class="NAME">this._layers</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">&&</span><span class="NAME">this._map.removeLayer</span><span class="PUNC">(</span><span class="NAME">this._layers</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">this._layers</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">hasLayer</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">!</span><span class="PUNC">!</span><span class="NAME">t</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">t</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">this._layers</span><span class="PUNC">||</span><span class="NAME">this.getLayerId</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">this._layers</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">clearLayers</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">this._layers</span><span class="PUNC">)</span><span class="NAME">this.removeLayer</span><span class="PUNC">(</span><span class="NAME">this._layers</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">invoke</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">Array.prototype.slice.call</span><span class="PUNC">(</span><span class="NAME">arguments</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">e</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">this._layers</span><span class="PUNC">)</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this._layers</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">&&</span><span class="NAME">i</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">apply</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">onAdd</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">this._layers</span><span class="PUNC">)</span><span class="NAME">t.addLayer</span><span class="PUNC">(</span><span class="NAME">this._layers</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">onRemove</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">this._layers</span><span class="PUNC">)</span><span class="NAME">t.removeLayer</span><span class="PUNC">(</span><span class="NAME">this._layers</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">eachLayer</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">this._layers</span><span class="PUNC">)</span><span class="NAME">t.call</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">this._layers</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getLayer</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._layers</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getLayers</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">this._layers</span><span class="PUNC">)</span><span class="NAME">t.push</span><span class="PUNC">(</span><span class="NAME">this._layers</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">setZIndex</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.invoke</span><span class="PUNC">(</span><span class="STRN">"setZIndex"</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getLayerId</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">o.stamp</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.layerGroup</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.LayerGroup</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.FeatureGroup</span><span class="PUNC">=</span><span class="NAME">o.LayerGroup.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">addLayer</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.hasLayer</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="KEYW">this</span><span class="PUNC">:</span><span class="PUNC">(</span><span class="NAME">t.addEventParent</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.LayerGroup.prototype.addLayer.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.fire</span><span class="PUNC">(</span><span class="STRN">"layeradd"</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">layer</span><span class="PUNC">:</span><span class="NAME">t</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">removeLayer</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.hasLayer</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="PUNC">(</span><span class="NAME">t</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">this._layers</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">this._layers</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t.removeEventParent</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.LayerGroup.prototype.removeLayer.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.fire</span><span class="PUNC">(</span><span class="STRN">"layerremove"</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">layer</span><span class="PUNC">:</span><span class="NAME">t</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">setStyle</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.invoke</span><span class="PUNC">(</span><span class="STRN">"setStyle"</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">bringToFront</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.invoke</span><span class="PUNC">(</span><span class="STRN">"bringToFront"</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">bringToBack</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.invoke</span><span class="PUNC">(</span><span class="STRN">"bringToBack"</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getBounds</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.LatLngBounds</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">this._layers</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this._layers</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">t.extend</span><span class="PUNC">(</span><span class="NAME">i.getBounds</span><span class="PUNC">?</span><span class="NAME">i.getBounds</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">i.getLatLng</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.featureGroup</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.FeatureGroup</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.Renderer</span><span class="PUNC">=</span><span class="NAME">o.Layer.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">options</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="NAME">padding</span><span class="PUNC">:</span><span class="PUNC">.</span><span class="NUMB">1</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">initialize</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.setOptions</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.stamp</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">onAdd</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._container</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">this._initContainer</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._zoomAnimated</span><span class="PUNC">&&</span><span class="NAME">o.DomUtil.addClass</span><span class="PUNC">(</span><span class="NAME">this._container</span><span class="PUNC">,</span><span class="STRN">"leaflet-zoom-animated"</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.getPane</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">appendChild</span><span class="PUNC">(</span><span class="NAME">this._container</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._update</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">onRemove</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.DomUtil.remove</span><span class="PUNC">(</span><span class="NAME">this._container</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getEvents</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">viewreset</span><span class="PUNC">:</span><span class="NAME">this._reset</span><span class="PUNC">,</span><span class="NAME">zoom</span><span class="PUNC">:</span><span class="NAME">this._onZoom</span><span class="PUNC">,</span><span class="NAME">moveend</span><span class="PUNC">:</span><span class="NAME">this._update</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._zoomAnimated</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">t.zoomanim</span><span class="PUNC">=</span><span class="NAME">this._onAnimZoom</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_onAnimZoom</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._updateTransform</span><span class="PUNC">(</span><span class="NAME">t.center</span><span class="PUNC">,</span><span class="NAME">t.zoom</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_onZoom</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._updateTransform</span><span class="PUNC">(</span><span class="NAME">this._map.getCenter</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._map.getZoom</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_updateTransform</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this._map.getZoomScale</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">this._zoom</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">o.DomUtil.getPosition</span><span class="PUNC">(</span><span class="NAME">this._container</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">this._map.getSize</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">multiplyBy</span><span class="PUNC">(</span><span class="PUNC">.</span><span class="NUMB">5</span><span class="PUNC">+</span><span class="NAME">this.options.padding</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">this._map.project</span><span class="PUNC">(</span><span class="NAME">this._center</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">this._map.project</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">=</span><span class="NAME">a.subtract</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">=</span><span class="NAME">s.multiplyBy</span><span class="PUNC">(</span><span class="PUNC">-</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">add</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">add</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">subtract</span><span class="PUNC">(</span><span class="NAME">h</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">o.Browser.any3d</span><span class="PUNC">?</span><span class="NAME">o.DomUtil.setTransform</span><span class="PUNC">(</span><span class="NAME">this._container</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">o.DomUtil.setPosition</span><span class="PUNC">(</span><span class="NAME">this._container</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_reset</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._update</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._updateTransform</span><span class="PUNC">(</span><span class="NAME">this._center</span><span class="PUNC">,</span><span class="NAME">this._zoom</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_update</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">this.options.padding</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this._map.getSize</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this._map.containerPointToLayerPoint</span><span class="PUNC">(</span><span class="NAME">e.multiplyBy</span><span class="PUNC">(</span><span class="PUNC">-</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">round</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this._bounds</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Bounds</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">i.add</span><span class="PUNC">(</span><span class="NAME">e.multiplyBy</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">+</span><span class="NUMB">2</span><span class="PUNC">*</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">round</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._center</span><span class="PUNC">=</span><span class="NAME">this._map.getCenter</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._zoom</span><span class="PUNC">=</span><span class="NAME">this._map.getZoom</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Map.include</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">getRenderer</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">t.options.renderer</span><span class="PUNC">||</span><span class="NAME">this._getPaneRenderer</span><span class="PUNC">(</span><span class="NAME">t.options.pane</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="NAME">this.options.renderer</span><span class="PUNC">||</span><span class="NAME">this._renderer</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this._renderer</span><span class="PUNC">=</span><span class="NAME">this.options.preferCanvas</span><span class="PUNC">&&</span><span class="NAME">o.canvas</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="NAME">o.svg</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.hasLayer</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="NAME">this.addLayer</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_getPaneRenderer</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="STRN">"overlayPane"</span><span class="PUNC">===</span><span class="NAME">t</span><span class="PUNC">||</span><span class="NAME">t</span><span class="PUNC">===</span><span class="NAME">i</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this._paneRenderers</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">===</span><span class="NAME">i</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">o.SVG</span><span class="PUNC">&&</span><span class="NAME">o.svg</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">pane</span><span class="PUNC">:</span><span class="NAME">t</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="NAME">o.Canvas</span><span class="PUNC">&&</span><span class="NAME">o.canvas</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">pane</span><span class="PUNC">:</span><span class="NAME">t</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._paneRenderers</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Path</span><span class="PUNC">=</span><span class="NAME">o.Layer.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">options</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="NAME">stroke</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">color</span><span class="PUNC">:</span><span class="STRN">"#3388ff"</span><span class="PUNC">,</span><span class="NAME">weight</span><span class="PUNC">:</span><span class="NUMB">3</span><span class="PUNC">,</span><span class="NAME">opacity</span><span class="PUNC">:</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">lineCap</span><span class="PUNC">:</span><span class="STRN">"round"</span><span class="PUNC">,</span><span class="NAME">lineJoin</span><span class="PUNC">:</span><span class="STRN">"round"</span><span class="PUNC">,</span><span class="NAME">dashArray</span><span class="PUNC">:</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">dashOffset</span><span class="PUNC">:</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">fill</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">fillColor</span><span class="PUNC">:</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">fillOpacity</span><span class="PUNC">:</span><span class="PUNC">.</span><span class="NUMB">2</span><span class="PUNC">,</span><span class="NAME">fillRule</span><span class="PUNC">:</span><span class="STRN">"evenodd"</span><span class="PUNC">,</span><span class="NAME">interactive</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">beforeAdd</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._renderer</span><span class="PUNC">=</span><span class="NAME">t.getRenderer</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">onAdd</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._renderer._initPath</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._reset</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._renderer._addPath</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">onRemove</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._renderer._removePath</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getEvents</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">{</span><span class="NAME">zoomend</span><span class="PUNC">:</span><span class="NAME">this._project</span><span class="PUNC">,</span><span class="NAME">moveend</span><span class="PUNC">:</span><span class="NAME">this._update</span><span class="PUNC">,</span><span class="NAME">viewreset</span><span class="PUNC">:</span><span class="NAME">this._reset</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">redraw</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._map</span><span class="PUNC">&&</span><span class="NAME">this._renderer._updatePath</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">setStyle</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">o.setOptions</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._renderer</span><span class="PUNC">&&</span><span class="NAME">this._renderer._updateStyle</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">bringToFront</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._renderer</span><span class="PUNC">&&</span><span class="NAME">this._renderer._bringToFront</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">bringToBack</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._renderer</span><span class="PUNC">&&</span><span class="NAME">this._renderer._bringToBack</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getElement</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._path</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_reset</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._project</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._update</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_clickTolerance</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">(</span><span class="NAME">this.options.stroke</span><span class="PUNC">?</span><span class="NAME">this.options.weight</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">o.Browser.touch</span><span class="PUNC">?</span><span class="NUMB">10</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.LineUtil</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">simplify</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">e</span><span class="PUNC">||</span><span class="PUNC">!</span><span class="NAME">t.length</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t.slice</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">*</span><span class="NAME">e</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">this._reducePoints</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">this._simplifyDP</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">pointToSegmentDistance</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">Math.sqrt</span><span class="PUNC">(</span><span class="NAME">this._sqClosestPointOnSegment</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">closestPointOnSegment</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._sqClosestPointOnSegment</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_simplifyDP</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">t.length</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">=</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">Uint8Array</span><span class="PUNC">!=</span><span class="NAME">i</span><span class="PUNC">+</span><span class="STRN">""</span><span class="PUNC">?</span><span class="NAME">Uint8Array</span><span class="PUNC">:</span><span class="NAME">Array</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">s</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">s</span><span class="PUNC">[</span><span class="NAME">n</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">this._simplifyDPStep</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">r</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">n</span><span class="PUNC">></span><span class="NAME">r</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="NAME">s</span><span class="PUNC">[</span><span class="NAME">r</span><span class="PUNC">]</span><span class="PUNC">&&</span><span class="NAME">a.push</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NAME">r</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">a</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_simplifyDPStep</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">n</span><span class="PUNC">+</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="NAME">o</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">>=</span><span class="NAME">r</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">this._sqClosestPointOnSegment</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NAME">r</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NAME">n</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NAME">o</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">></span><span class="NAME">h</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">r</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">=</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">h</span><span class="PUNC">></span><span class="NAME">i</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NAME">s</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">this._simplifyDPStep</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._simplifyDPStep</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_reducePoints</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">t.length</span><span class="PUNC">;</span><span class="NAME">s</span><span class="PUNC">></span><span class="NAME">n</span><span class="PUNC">;</span><span class="NAME">n</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="NAME">this._sqDist</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NAME">n</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NAME">o</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">></span><span class="NAME">e</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">i.push</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NAME">n</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">=</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">s</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">></span><span class="NAME">o</span><span class="PUNC">&&</span><span class="NAME">i.push</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NAME">s</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">clipSegment</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">=</span><span class="NAME">n</span><span class="PUNC">?</span><span class="NAME">this._lastCode</span><span class="PUNC">:</span><span class="NAME">this._getBitCode</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">=</span><span class="NAME">this._getBitCode</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">this._lastCode</span><span class="PUNC">=</span><span class="NAME">l</span><span class="PUNC">;</span><span class="PUNC">;</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="PUNC">(</span><span class="NAME">h</span><span class="PUNC">|</span><span class="NAME">l</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">h</span><span class="PUNC">&</span><span class="NAME">l</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">h</span><span class="PUNC">||</span><span class="NAME">l</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">this._getEdgeIntersection</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">this._getBitCode</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">===</span><span class="NAME">h</span><span class="PUNC">?</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">r</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">=</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">r</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">=</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_getEdgeIntersection</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">r</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">=</span><span class="NAME">e.x</span><span class="PUNC">-</span><span class="NAME">t.x</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">=</span><span class="NAME">e.y</span><span class="PUNC">-</span><span class="NAME">t.y</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">=</span><span class="NAME">n.min</span><span class="PUNC">,</span><span class="NAME">c</span><span class="PUNC">=</span><span class="NAME">n.max</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NUMB">8</span><span class="PUNC">&</span><span class="NAME">i</span><span class="PUNC">?</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">t.x</span><span class="PUNC">+</span><span class="NAME">h</span><span class="PUNC">*</span><span class="PUNC">(</span><span class="NAME">c.y</span><span class="PUNC">-</span><span class="NAME">t.y</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NAME">l</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">c.y</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NUMB">4</span><span class="PUNC">&</span><span class="NAME">i</span><span class="PUNC">?</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">t.x</span><span class="PUNC">+</span><span class="NAME">h</span><span class="PUNC">*</span><span class="PUNC">(</span><span class="NAME">u.y</span><span class="PUNC">-</span><span class="NAME">t.y</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NAME">l</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">u.y</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NUMB">2</span><span class="PUNC">&</span><span class="NAME">i</span><span class="PUNC">?</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">c.x</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">t.y</span><span class="PUNC">+</span><span class="NAME">l</span><span class="PUNC">*</span><span class="PUNC">(</span><span class="NAME">c.x</span><span class="PUNC">-</span><span class="NAME">t.x</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NAME">h</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NUMB">1</span><span class="PUNC">&</span><span class="NAME">i</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">u.x</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">t.y</span><span class="PUNC">+</span><span class="NAME">l</span><span class="PUNC">*</span><span class="PUNC">(</span><span class="NAME">u.x</span><span class="PUNC">-</span><span class="NAME">t.x</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NAME">h</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Point</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_getBitCode</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t.x</span><span class="PUNC">&lt;</span><span class="NAME">e.min.x</span><span class="PUNC">?</span><span class="NAME">i</span><span class="PUNC">|</span><span class="PUNC">=</span><span class="NUMB">1</span><span class="PUNC">:</span><span class="NAME">t.x</span><span class="PUNC">></span><span class="NAME">e.max.x</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">|</span><span class="PUNC">=</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t.y</span><span class="PUNC">&lt;</span><span class="NAME">e.min.y</span><span class="PUNC">?</span><span class="NAME">i</span><span class="PUNC">|</span><span class="PUNC">=</span><span class="NUMB">4</span><span class="PUNC">:</span><span class="NAME">t.y</span><span class="PUNC">></span><span class="NAME">e.max.y</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">|</span><span class="PUNC">=</span><span class="NUMB">8</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_sqDist</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">e.x</span><span class="PUNC">-</span><span class="NAME">t.x</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">e.y</span><span class="PUNC">-</span><span class="NAME">t.y</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">*</span><span class="NAME">i</span><span class="PUNC">+</span><span class="NAME">n</span><span class="PUNC">*</span><span class="NAME">n</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_sqClosestPointOnSegment</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">e.x</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">e.y</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">=</span><span class="NAME">i.x</span><span class="PUNC">-</span><span class="NAME">r</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">=</span><span class="NAME">i.y</span><span class="PUNC">-</span><span class="NAME">a</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">=</span><span class="NAME">h</span><span class="PUNC">*</span><span class="NAME">h</span><span class="PUNC">+</span><span class="NAME">l</span><span class="PUNC">*</span><span class="NAME">l</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">u</span><span class="PUNC">></span><span class="NUMB">0</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">t.x</span><span class="PUNC">-</span><span class="NAME">r</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NAME">h</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">t.y</span><span class="PUNC">-</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NAME">l</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NAME">u</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">></span><span class="NUMB">1</span><span class="PUNC">?</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">i.x</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">i.y</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">s</span><span class="PUNC">></span><span class="NUMB">0</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">+</span><span class="PUNC">=</span><span class="NAME">h</span><span class="PUNC">*</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">+</span><span class="PUNC">=</span><span class="NAME">l</span><span class="PUNC">*</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">=</span><span class="NAME">t.x</span><span class="PUNC">-</span><span class="NAME">r</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">=</span><span class="NAME">t.y</span><span class="PUNC">-</span><span class="NAME">a</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">?</span><span class="NAME">h</span><span class="PUNC">*</span><span class="NAME">h</span><span class="PUNC">+</span><span class="NAME">l</span><span class="PUNC">*</span><span class="NAME">l</span><span class="PUNC">:</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Point</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.Polyline</span><span class="PUNC">=</span><span class="NAME">o.Path.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">options</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="NAME">smoothFactor</span><span class="PUNC">:</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">noClip</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">initialize</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.setOptions</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._setLatLngs</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getLatLngs</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._latlngs</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">setLatLngs</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._setLatLngs</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.redraw</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">isEmpty</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">!</span><span class="NAME">this._latlngs.length</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">closestLayerPoint</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NUMB">1</span><span class="PUNC">/</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">o.LineUtil._sqClosestPointOnSegment</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">=</span><span class="NAME">this._parts.length</span><span class="PUNC">;</span><span class="NAME">h</span><span class="PUNC">></span><span class="NAME">a</span><span class="PUNC">;</span><span class="NAME">a</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">l</span><span class="PUNC">=</span><span class="NAME">this._parts</span><span class="PUNC">[</span><span class="NAME">a</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">=</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">c</span><span class="PUNC">=</span><span class="NAME">l.length</span><span class="PUNC">;</span><span class="NAME">c</span><span class="PUNC">></span><span class="NAME">u</span><span class="PUNC">;</span><span class="NAME">u</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">l</span><span class="PUNC">[</span><span class="NAME">u</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">l</span><span class="PUNC">[</span><span class="NAME">u</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">d</span><span class="PUNC">=</span><span class="NAME">r</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">n</span><span class="PUNC">></span><span class="NAME">d</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">d</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">r</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">s</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">s.distance</span><span class="PUNC">=</span><span class="NAME">Math.sqrt</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getCenter</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">this._rings</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">=</span><span class="NAME">a.length</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">h</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">h</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">></span><span class="NAME">t</span><span class="PUNC">;</span><span class="NAME">t</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="NAME">e</span><span class="PUNC">+</span><span class="PUNC">=</span><span class="NAME">a</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">distanceTo</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">+</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="PUNC">===</span><span class="NAME">e</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._map.layerPointToLatLng</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">h</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">></span><span class="NAME">t</span><span class="PUNC">;</span><span class="NAME">t</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">o</span><span class="PUNC">=</span><span class="NAME">a</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">a</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">+</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">o.distanceTo</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">+</span><span class="PUNC">=</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">></span><span class="NAME">e</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">r</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">-</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">this._map.layerPointToLatLng</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="NAME">s.x</span><span class="PUNC">-</span><span class="NAME">r</span><span class="PUNC">*</span><span class="PUNC">(</span><span class="NAME">s.x</span><span class="PUNC">-</span><span class="NAME">o.x</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s.y</span><span class="PUNC">-</span><span class="NAME">r</span><span class="PUNC">*</span><span class="PUNC">(</span><span class="NAME">s.y</span><span class="PUNC">-</span><span class="NAME">o.y</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getBounds</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._bounds</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">addLatLng</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">||</span><span class="NAME">this._defaultShape</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">o.latLng</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e.push</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._bounds.extend</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.redraw</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_setLatLngs</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._bounds</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.LatLngBounds</span><span class="PUNC">,</span><span class="NAME">this._latlngs</span><span class="PUNC">=</span><span class="NAME">this._convertLatLngs</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_defaultShape</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">o.Polyline._flat</span><span class="PUNC">(</span><span class="NAME">this._latlngs</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="NAME">this._latlngs</span><span class="PUNC">:</span><span class="NAME">this._latlngs</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_convertLatLngs</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">o.Polyline._flat</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">t.length</span><span class="PUNC">;</span><span class="NAME">s</span><span class="PUNC">></span><span class="NAME">n</span><span class="PUNC">;</span><span class="NAME">n</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="NAME">i</span><span class="PUNC">?</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NAME">n</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">o.latLng</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NAME">n</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._bounds.extend</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NAME">n</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NAME">n</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">this._convertLatLngs</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NAME">n</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_project</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Bounds</span><span class="PUNC">;</span><span class="NAME">this._rings</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">this._projectLatlngs</span><span class="PUNC">(</span><span class="NAME">this._latlngs</span><span class="PUNC">,</span><span class="NAME">this._rings</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this._clickTolerance</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Point</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this._bounds.isValid</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="NAME">t.isValid</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">t.min._subtract</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t.max._add</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._pxBounds</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_projectLatlngs</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">o.LatLng</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">t.length</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">a</span><span class="PUNC">></span><span class="NAME">n</span><span class="PUNC">;</span><span class="NAME">n</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="NAME">s</span><span class="PUNC">[</span><span class="NAME">n</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">this._map.latLngToLayerPoint</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NAME">n</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i.extend</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">[</span><span class="NAME">n</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">e.push</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">a</span><span class="PUNC">></span><span class="NAME">n</span><span class="PUNC">;</span><span class="NAME">n</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="NAME">this._projectLatlngs</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NAME">n</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_clipPoints</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">this._renderer._bounds</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this._parts</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">this._pxBounds</span><span class="PUNC">&&</span><span class="NAME">this._pxBounds.intersects</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.noClip</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">void</span><span class="PUNC">(</span><span class="NAME">this._parts</span><span class="PUNC">=</span><span class="NAME">this._rings</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">=</span><span class="NAME">this._parts</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">this._rings.length</span><span class="PUNC">;</span><span class="NAME">s</span><span class="PUNC">></span><span class="NAME">e</span><span class="PUNC">;</span><span class="NAME">e</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">h</span><span class="PUNC">=</span><span class="NAME">this._rings</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">h.length</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">></span><span class="NAME">i</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">o.LineUtil.clipSegment</span><span class="PUNC">(</span><span class="NAME">h</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">+</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">[</span><span class="NAME">n</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">l</span><span class="PUNC">[</span><span class="NAME">n</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">[</span><span class="NAME">n</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">push</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">===</span><span class="NAME">h</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">+</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">&&</span><span class="NAME">i</span><span class="PUNC">!==</span><span class="NAME">r</span><span class="PUNC">-</span><span class="NUMB">2</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">[</span><span class="NAME">n</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">push</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_simplifyPoints</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">this._parts</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this.options.smoothFactor</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">t.length</span><span class="PUNC">;</span><span class="NAME">n</span><span class="PUNC">></span><span class="NAME">i</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">o.LineUtil.simplify</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_update</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._map</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">this._clipPoints</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._simplifyPoints</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._updatePath</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_updatePath</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._renderer._updatePoly</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.polyline</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Polyline</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.Polyline._flat</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">!</span><span class="NAME">o.Util.isArray</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="STRN">"object"</span><span class="PUNC">!=</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">&&</span><span class="STRN">"undefined"</span><span class="PUNC">!=</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.PolyUtil</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.PolyUtil.clipPolygon</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">,</span><span class="NAME">c</span><span class="PUNC">,</span><span class="NAME">d</span><span class="PUNC">,</span><span class="NAME">_</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NUMB">4</span><span class="PUNC">,</span><span class="NUMB">2</span><span class="PUNC">,</span><span class="NUMB">8</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">m</span><span class="PUNC">=</span><span class="NAME">o.LineUtil</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">=</span><span class="NAME">t.length</span><span class="PUNC">;</span><span class="NAME">u</span><span class="PUNC">></span><span class="NAME">s</span><span class="PUNC">;</span><span class="NAME">s</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NAME">s</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">_code</span><span class="PUNC">=</span><span class="NAME">m._getBitCode</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NAME">s</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NUMB">4</span><span class="PUNC">></span><span class="NAME">a</span><span class="PUNC">;</span><span class="NAME">a</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">c</span><span class="PUNC">=</span><span class="NAME">_</span><span class="PUNC">[</span><span class="NAME">a</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">=</span><span class="NAME">t.length</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">u</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="NAME">u</span><span class="PUNC">></span><span class="NAME">s</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">s</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="NAME">h</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NAME">s</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NAME">r</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">h._code</span><span class="PUNC">&</span><span class="NAME">c</span><span class="PUNC">?</span><span class="NAME">l._code</span><span class="PUNC">&</span><span class="NAME">c</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">=</span><span class="NAME">m._getEdgeIntersection</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">,</span><span class="NAME">c</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">d._code</span><span class="PUNC">=</span><span class="NAME">m._getBitCode</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n.push</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="PUNC">(</span><span class="NAME">l._code</span><span class="PUNC">&</span><span class="NAME">c</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">=</span><span class="NAME">m._getEdgeIntersection</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">,</span><span class="NAME">c</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">d._code</span><span class="PUNC">=</span><span class="NAME">m._getBitCode</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n.push</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n.push</span><span class="PUNC">(</span><span class="NAME">h</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">n</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.Polygon</span><span class="PUNC">=</span><span class="NAME">o.Polyline.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">options</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="NAME">fill</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">isEmpty</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">!</span><span class="NAME">this._latlngs.length</span><span class="PUNC">||</span><span class="PUNC">!</span><span class="NAME">this._latlngs</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">length</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getCenter</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">=</span><span class="NAME">this._rings</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">=</span><span class="NAME">l.length</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">u</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">u</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="NAME">u</span><span class="PUNC">></span><span class="NAME">t</span><span class="PUNC">;</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">l</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">l</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">=</span><span class="NAME">i.y</span><span class="PUNC">*</span><span class="NAME">n.x</span><span class="PUNC">-</span><span class="NAME">n.y</span><span class="PUNC">*</span><span class="NAME">i.x</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">+</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">i.x</span><span class="PUNC">+</span><span class="NAME">n.x</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NAME">o</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">+</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">i.y</span><span class="PUNC">+</span><span class="NAME">n.y</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NAME">o</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">+</span><span class="PUNC">=</span><span class="NUMB">3</span><span class="PUNC">*</span><span class="NAME">o</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">h</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">===</span><span class="NAME">s</span><span class="PUNC">?</span><span class="NAME">l</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="NAME">r</span><span class="PUNC">/</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">/</span><span class="NAME">s</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">this._map.layerPointToLatLng</span><span class="PUNC">(</span><span class="NAME">h</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_convertLatLngs</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">o.Polyline.prototype._convertLatLngs.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">e.length</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">>=</span><span class="NUMB">2</span><span class="PUNC">&&</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">o.LatLng</span><span class="PUNC">&&</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">equals</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="NAME">e.pop</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_setLatLngs</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.Polyline.prototype._setLatLngs.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Polyline._flat</span><span class="PUNC">(</span><span class="NAME">this._latlngs</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">this._latlngs</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="NAME">this._latlngs</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_defaultShape</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">o.Polyline._flat</span><span class="PUNC">(</span><span class="NAME">this._latlngs</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="NAME">this._latlngs</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">:</span><span class="NAME">this._latlngs</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_clipPoints</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">this._renderer._bounds</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this.options.weight</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Point</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Bounds</span><span class="PUNC">(</span><span class="NAME">t.min.subtract</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t.max.add</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._parts</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">this._pxBounds</span><span class="PUNC">&&</span><span class="NAME">this._pxBounds.intersects</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.noClip</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">void</span><span class="PUNC">(</span><span class="NAME">this._parts</span><span class="PUNC">=</span><span class="NAME">this._rings</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">this._rings.length</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">></span><span class="NAME">s</span><span class="PUNC">;</span><span class="NAME">s</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">o.PolyUtil.clipPolygon</span><span class="PUNC">(</span><span class="NAME">this._rings</span><span class="PUNC">[</span><span class="NAME">s</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n.length</span><span class="PUNC">&&</span><span class="NAME">this._parts.push</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_updatePath</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._renderer._updatePoly</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.polygon</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Polygon</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.Rectangle</span><span class="PUNC">=</span><span class="NAME">o.Polygon.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">initialize</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.Polygon.prototype.initialize.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">this._boundsToLatLngs</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">setBounds</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.setLatLngs</span><span class="PUNC">(</span><span class="NAME">this._boundsToLatLngs</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_boundsToLatLngs</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">o.latLngBounds</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">t.getSouthWest</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t.getNorthWest</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t.getNorthEast</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t.getSouthEast</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.rectangle</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Rectangle</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.CircleMarker</span><span class="PUNC">=</span><span class="NAME">o.Path.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">options</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="NAME">fill</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">radius</span><span class="PUNC">:</span><span class="NUMB">10</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">initialize</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.setOptions</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._latlng</span><span class="PUNC">=</span><span class="NAME">o.latLng</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._radius</span><span class="PUNC">=</span><span class="NAME">this.options.radius</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">setLatLng</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._latlng</span><span class="PUNC">=</span><span class="NAME">o.latLng</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.redraw</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.fire</span><span class="PUNC">(</span><span class="STRN">"move"</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">latlng</span><span class="PUNC">:</span><span class="NAME">this._latlng</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getLatLng</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._latlng</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">setRadius</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.options.radius</span><span class="PUNC">=</span><span class="NAME">this._radius</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">this.redraw</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getRadius</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._radius</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">setStyle</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">&&</span><span class="NAME">t.radius</span><span class="PUNC">||</span><span class="NAME">this._radius</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">o.Path.prototype.setStyle.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.setRadius</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_project</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._point</span><span class="PUNC">=</span><span class="NAME">this._map.latLngToLayerPoint</span><span class="PUNC">(</span><span class="NAME">this._latlng</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._updateBounds</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_updateBounds</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">this._radius</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this._radiusY</span><span class="PUNC">||</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this._clickTolerance</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">+</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">+</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">this._pxBounds</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Bounds</span><span class="PUNC">(</span><span class="NAME">this._point.subtract</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._point.add</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_update</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._map</span><span class="PUNC">&&</span><span class="NAME">this._updatePath</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_updatePath</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._renderer._updateCircle</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_empty</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._radius</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">this._renderer._bounds.intersects</span><span class="PUNC">(</span><span class="NAME">this._pxBounds</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.circleMarker</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.CircleMarker</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.Circle</span><span class="PUNC">=</span><span class="NAME">o.CircleMarker.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">initialize</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="STRN">"number"</span><span class="PUNC">==</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">o.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">radius</span><span class="PUNC">:</span><span class="NAME">e</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.setOptions</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._latlng</span><span class="PUNC">=</span><span class="NAME">o.latLng</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">isNaN</span><span class="PUNC">(</span><span class="NAME">this.options.radius</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Error</span><span class="PUNC">(</span><span class="STRN">"Circle radius cannot be NaN"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this._mRadius</span><span class="PUNC">=</span><span class="NAME">this.options.radius</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">setRadius</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._mRadius</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">this.redraw</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getRadius</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._mRadius</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getBounds</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="NAME">this._radius</span><span class="PUNC">,</span><span class="NAME">this._radiusY</span><span class="PUNC">||</span><span class="NAME">this._radius</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.LatLngBounds</span><span class="PUNC">(</span><span class="NAME">this._map.layerPointToLatLng</span><span class="PUNC">(</span><span class="NAME">this._point.subtract</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._map.layerPointToLatLng</span><span class="PUNC">(</span><span class="NAME">this._point.add</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">setStyle</span><span class="PUNC">:</span><span class="NAME">o.Path.prototype.setStyle</span><span class="PUNC">,</span><span class="NAME">_project</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">this._latlng.lng</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this._latlng.lat</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this._map</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">i.options.crs</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">n.distance</span><span class="PUNC">===</span><span class="NAME">o.CRS.Earth.distance</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">Math.PI</span><span class="PUNC">/</span><span class="NUMB">180</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">this._mRadius</span><span class="PUNC">/</span><span class="NAME">o.CRS.Earth.R</span><span class="PUNC">/</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">i.project</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">+</span><span class="NAME">r</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">=</span><span class="NAME">i.project</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">-</span><span class="NAME">r</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">=</span><span class="NAME">a.add</span><span class="PUNC">(</span><span class="NAME">h</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">divideBy</span><span class="PUNC">(</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">=</span><span class="NAME">i.unproject</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">lat</span><span class="PUNC">,</span><span class="NAME">c</span><span class="PUNC">=</span><span class="NAME">Math.acos</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">Math.cos</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">*</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">-</span><span class="NAME">Math.sin</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">*</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NAME">Math.sin</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">*</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="PUNC">(</span><span class="NAME">Math.cos</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">*</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NAME">Math.cos</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">*</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NAME">s</span><span class="PUNC">;</span><span class="PUNC">(</span><span class="NAME">isNaN</span><span class="PUNC">(</span><span class="NAME">c</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="NUMB">0</span><span class="PUNC">===</span><span class="NAME">c</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">c</span><span class="PUNC">=</span><span class="NAME">r</span><span class="PUNC">/</span><span class="NAME">Math.cos</span><span class="PUNC">(</span><span class="NAME">Math.PI</span><span class="PUNC">/</span><span class="NUMB">180</span><span class="PUNC">*</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._point</span><span class="PUNC">=</span><span class="NAME">l.subtract</span><span class="PUNC">(</span><span class="NAME">i.getPixelOrigin</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._radius</span><span class="PUNC">=</span><span class="NAME">isNaN</span><span class="PUNC">(</span><span class="NAME">c</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="NUMB">0</span><span class="PUNC">:</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">Math.round</span><span class="PUNC">(</span><span class="NAME">l.x</span><span class="PUNC">-</span><span class="NAME">i.project</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="NAME">u</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">-</span><span class="NAME">c</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">x</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._radiusY</span><span class="PUNC">=</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">Math.round</span><span class="PUNC">(</span><span class="NAME">l.y</span><span class="PUNC">-</span><span class="NAME">a.y</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">d</span><span class="PUNC">=</span><span class="NAME">n.unproject</span><span class="PUNC">(</span><span class="NAME">n.project</span><span class="PUNC">(</span><span class="NAME">this._latlng</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">subtract</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="NAME">this._mRadius</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this._point</span><span class="PUNC">=</span><span class="NAME">i.latLngToLayerPoint</span><span class="PUNC">(</span><span class="NAME">this._latlng</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._radius</span><span class="PUNC">=</span><span class="NAME">this._point.x</span><span class="PUNC">-</span><span class="NAME">i.latLngToLayerPoint</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">x</span><span class="PUNC">}</span><span class="NAME">this._updateBounds</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.circle</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Circle</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.SVG</span><span class="PUNC">=</span><span class="NAME">o.Renderer.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">getEvents</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">o.Renderer.prototype.getEvents.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t.zoomstart</span><span class="PUNC">=</span><span class="NAME">this._onZoomStart</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_initContainer</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._container</span><span class="PUNC">=</span><span class="NAME">o.SVG.create</span><span class="PUNC">(</span><span class="STRN">"svg"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._container.setAttribute</span><span class="PUNC">(</span><span class="STRN">"pointer-events"</span><span class="PUNC">,</span><span class="STRN">"none"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._rootGroup</span><span class="PUNC">=</span><span class="NAME">o.SVG.create</span><span class="PUNC">(</span><span class="STRN">"g"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._container.appendChild</span><span class="PUNC">(</span><span class="NAME">this._rootGroup</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_onZoomStart</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._update</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_update</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this._map._animatingZoom</span><span class="PUNC">||</span><span class="PUNC">!</span><span class="NAME">this._bounds</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.Renderer.prototype._update.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">this._bounds</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">t.getSize</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this._container</span><span class="PUNC">;</span><span class="NAME">this._svgSize</span><span class="PUNC">&&</span><span class="NAME">this._svgSize.equals</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">this._svgSize</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i.setAttribute</span><span class="PUNC">(</span><span class="STRN">"width"</span><span class="PUNC">,</span><span class="NAME">e.x</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i.setAttribute</span><span class="PUNC">(</span><span class="STRN">"height"</span><span class="PUNC">,</span><span class="NAME">e.y</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.DomUtil.setPosition</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">t.min</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i.setAttribute</span><span class="PUNC">(</span><span class="STRN">"viewBox"</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">t.min.x</span><span class="PUNC">,</span><span class="NAME">t.min.y</span><span class="PUNC">,</span><span class="NAME">e.x</span><span class="PUNC">,</span><span class="NAME">e.y</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">join</span><span class="PUNC">(</span><span class="STRN">" "</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_initPath</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">t._path</span><span class="PUNC">=</span><span class="NAME">o.SVG.create</span><span class="PUNC">(</span><span class="STRN">"path"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">t.options.className</span><span class="PUNC">&&</span><span class="NAME">o.DomUtil.addClass</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">t.options.className</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t.options.interactive</span><span class="PUNC">&&</span><span class="NAME">o.DomUtil.addClass</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="STRN">"leaflet-interactive"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._updateStyle</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_addPath</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._rootGroup.appendChild</span><span class="PUNC">(</span><span class="NAME">t._path</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t.addInteractiveTarget</span><span class="PUNC">(</span><span class="NAME">t._path</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_removePath</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.DomUtil.remove</span><span class="PUNC">(</span><span class="NAME">t._path</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t.removeInteractiveTarget</span><span class="PUNC">(</span><span class="NAME">t._path</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_updatePath</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">t._project</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t._update</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_updateStyle</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">t._path</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">t.options</span><span class="PUNC">;</span><span class="NAME">e</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">i.stroke</span><span class="PUNC">?</span><span class="PUNC">(</span><span class="NAME">e.setAttribute</span><span class="PUNC">(</span><span class="STRN">"stroke"</span><span class="PUNC">,</span><span class="NAME">i.color</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e.setAttribute</span><span class="PUNC">(</span><span class="STRN">"stroke-opacity"</span><span class="PUNC">,</span><span class="NAME">i.opacity</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e.setAttribute</span><span class="PUNC">(</span><span class="STRN">"stroke-width"</span><span class="PUNC">,</span><span class="NAME">i.weight</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e.setAttribute</span><span class="PUNC">(</span><span class="STRN">"stroke-linecap"</span><span class="PUNC">,</span><span class="NAME">i.lineCap</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e.setAttribute</span><span class="PUNC">(</span><span class="STRN">"stroke-linejoin"</span><span class="PUNC">,</span><span class="NAME">i.lineJoin</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i.dashArray</span><span class="PUNC">?</span><span class="NAME">e.setAttribute</span><span class="PUNC">(</span><span class="STRN">"stroke-dasharray"</span><span class="PUNC">,</span><span class="NAME">i.dashArray</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">e.removeAttribute</span><span class="PUNC">(</span><span class="STRN">"stroke-dasharray"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i.dashOffset</span><span class="PUNC">?</span><span class="NAME">e.setAttribute</span><span class="PUNC">(</span><span class="STRN">"stroke-dashoffset"</span><span class="PUNC">,</span><span class="NAME">i.dashOffset</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">e.removeAttribute</span><span class="PUNC">(</span><span class="STRN">"stroke-dashoffset"</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">e.setAttribute</span><span class="PUNC">(</span><span class="STRN">"stroke"</span><span class="PUNC">,</span><span class="STRN">"none"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i.fill</span><span class="PUNC">?</span><span class="PUNC">(</span><span class="NAME">e.setAttribute</span><span class="PUNC">(</span><span class="STRN">"fill"</span><span class="PUNC">,</span><span class="NAME">i.fillColor</span><span class="PUNC">||</span><span class="NAME">i.color</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e.setAttribute</span><span class="PUNC">(</span><span class="STRN">"fill-opacity"</span><span class="PUNC">,</span><span class="NAME">i.fillOpacity</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e.setAttribute</span><span class="PUNC">(</span><span class="STRN">"fill-rule"</span><span class="PUNC">,</span><span class="NAME">i.fillRule</span><span class="PUNC">||</span><span class="STRN">"evenodd"</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">e.setAttribute</span><span class="PUNC">(</span><span class="STRN">"fill"</span><span class="PUNC">,</span><span class="STRN">"none"</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_updatePoly</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._setPath</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">o.SVG.pointsToPath</span><span class="PUNC">(</span><span class="NAME">t._parts</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_updateCircle</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">t._point</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">t._radius</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">t._radiusY</span><span class="PUNC">||</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">=</span><span class="STRN">"a"</span><span class="PUNC">+</span><span class="NAME">i</span><span class="PUNC">+</span><span class="STRN">","</span><span class="PUNC">+</span><span class="NAME">n</span><span class="PUNC">+</span><span class="STRN">" 0 1,0 "</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">t._empty</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="STRN">"M0 0"</span><span class="PUNC">:</span><span class="STRN">"M"</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">e.x</span><span class="PUNC">-</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">","</span><span class="PUNC">+</span><span class="NAME">e.y</span><span class="PUNC">+</span><span class="NAME">o</span><span class="PUNC">+</span><span class="NUMB">2</span><span class="PUNC">*</span><span class="NAME">i</span><span class="PUNC">+</span><span class="STRN">",0 "</span><span class="PUNC">+</span><span class="NAME">o</span><span class="PUNC">+</span><span class="NUMB">2</span><span class="PUNC">*</span><span class="PUNC">-</span><span class="NAME">i</span><span class="PUNC">+</span><span class="STRN">",0 "</span><span class="PUNC">;</span><span class="NAME">this._setPath</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_setPath</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">t._path.setAttribute</span><span class="PUNC">(</span><span class="STRN">"d"</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_bringToFront</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.DomUtil.toFront</span><span class="PUNC">(</span><span class="NAME">t._path</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_bringToBack</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.DomUtil.toBack</span><span class="PUNC">(</span><span class="NAME">t._path</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.extend</span><span class="PUNC">(</span><span class="NAME">o.SVG</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">create</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">e.createElementNS</span><span class="PUNC">(</span><span class="STRN">"http://www.w3.org/2000/svg"</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">pointsToPath</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">=</span><span class="STRN">""</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">t.length</span><span class="PUNC">;</span><span class="NAME">s</span><span class="PUNC">></span><span class="NAME">i</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">a.length</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">></span><span class="NAME">n</span><span class="PUNC">;</span><span class="NAME">n</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="NAME">h</span><span class="PUNC">=</span><span class="NAME">a</span><span class="PUNC">[</span><span class="NAME">n</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">+</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">?</span><span class="STRN">"L"</span><span class="PUNC">:</span><span class="STRN">"M"</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="NAME">h.x</span><span class="PUNC">+</span><span class="STRN">" "</span><span class="PUNC">+</span><span class="NAME">h.y</span><span class="PUNC">;</span><span class="NAME">l</span><span class="PUNC">+</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">?</span><span class="NAME">o.Browser.svg</span><span class="PUNC">?</span><span class="STRN">"z"</span><span class="PUNC">:</span><span class="STRN">"x"</span><span class="PUNC">:</span><span class="STRN">""</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">l</span><span class="PUNC">||</span><span class="STRN">"M0 0"</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Browser.svg</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">e.createElementNS</span><span class="PUNC">||</span><span class="PUNC">!</span><span class="NAME">o.SVG.create</span><span class="PUNC">(</span><span class="STRN">"svg"</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">createSVGRect</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.svg</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">o.Browser.svg</span><span class="PUNC">||</span><span class="NAME">o.Browser.vml</span><span class="PUNC">?</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.SVG</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="KEYW">null</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.Browser.vml</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NAME">o.Browser.svg</span><span class="PUNC">&&</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">try</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">e.createElement</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">t.innerHTML</span><span class="PUNC">=</span><span class="STRN">'&lt;v:shape adj="1"/>'</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">t.firstChild</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">i.style.behavior</span><span class="PUNC">=</span><span class="STRN">"url(#default#VML)"</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">&&</span><span class="STRN">"object"</span><span class="PUNC">==</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">i.adj</span><span class="PUNC">}</span><span class="KEYW">catch</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.SVG.include</span><span class="PUNC">(</span><span class="NAME">o.Browser.vml</span><span class="PUNC">?</span><span class="PUNC">{</span><span class="NAME">_initContainer</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._container</span><span class="PUNC">=</span><span class="NAME">o.DomUtil.create</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">,</span><span class="STRN">"leaflet-vml-container"</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_update</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._map._animatingZoom</span><span class="PUNC">||</span><span class="NAME">o.Renderer.prototype._update.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_initPath</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">t._container</span><span class="PUNC">=</span><span class="NAME">o.SVG.create</span><span class="PUNC">(</span><span class="STRN">"shape"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">o.DomUtil.addClass</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="STRN">"leaflet-vml-shape "</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">this.options.className</span><span class="PUNC">||</span><span class="STRN">""</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e.coordsize</span><span class="PUNC">=</span><span class="STRN">"1 1"</span><span class="PUNC">,</span><span class="NAME">t._path</span><span class="PUNC">=</span><span class="NAME">o.SVG.create</span><span class="PUNC">(</span><span class="STRN">"path"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e.appendChild</span><span class="PUNC">(</span><span class="NAME">t._path</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._updateStyle</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_addPath</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">t._container</span><span class="PUNC">;</span><span class="NAME">this._container.appendChild</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t.options.interactive</span><span class="PUNC">&&</span><span class="NAME">t.addInteractiveTarget</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_removePath</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">t._container</span><span class="PUNC">;</span><span class="NAME">o.DomUtil.remove</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t.removeInteractiveTarget</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_updateStyle</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">t._stroke</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">t._fill</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">t.options</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">t._container</span><span class="PUNC">;</span><span class="NAME">s.stroked</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="PUNC">!</span><span class="NAME">n.stroke</span><span class="PUNC">,</span><span class="NAME">s.filled</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="PUNC">!</span><span class="NAME">n.fill</span><span class="PUNC">,</span><span class="NAME">n.stroke</span><span class="PUNC">?</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">t._stroke</span><span class="PUNC">=</span><span class="NAME">o.SVG.create</span><span class="PUNC">(</span><span class="STRN">"stroke"</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s.appendChild</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e.weight</span><span class="PUNC">=</span><span class="NAME">n.weight</span><span class="PUNC">+</span><span class="STRN">"px"</span><span class="PUNC">,</span><span class="NAME">e.color</span><span class="PUNC">=</span><span class="NAME">n.color</span><span class="PUNC">,</span><span class="NAME">e.opacity</span><span class="PUNC">=</span><span class="NAME">n.opacity</span><span class="PUNC">,</span><span class="NAME">n.dashArray</span><span class="PUNC">?</span><span class="NAME">e.dashStyle</span><span class="PUNC">=</span><span class="NAME">o.Util.isArray</span><span class="PUNC">(</span><span class="NAME">n.dashArray</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="NAME">n.dashArray.join</span><span class="PUNC">(</span><span class="STRN">" "</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">n.dashArray.replace</span><span class="PUNC">(</span><span class="REGX">/( *, *)/g</span><span class="PUNC">,</span><span class="STRN">" "</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">e.dashStyle</span><span class="PUNC">=</span><span class="STRN">""</span><span class="PUNC">,</span><span class="NAME">e.endcap</span><span class="PUNC">=</span><span class="NAME">n.lineCap.replace</span><span class="PUNC">(</span><span class="STRN">"butt"</span><span class="PUNC">,</span><span class="STRN">"flat"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e.joinstyle</span><span class="PUNC">=</span><span class="NAME">n.lineJoin</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">e</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">s.removeChild</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t._stroke</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n.fill</span><span class="PUNC">?</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">t._fill</span><span class="PUNC">=</span><span class="NAME">o.SVG.create</span><span class="PUNC">(</span><span class="STRN">"fill"</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s.appendChild</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i.color</span><span class="PUNC">=</span><span class="NAME">n.fillColor</span><span class="PUNC">||</span><span class="NAME">n.color</span><span class="PUNC">,</span><span class="NAME">i.opacity</span><span class="PUNC">=</span><span class="NAME">n.fillOpacity</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">i</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">s.removeChild</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t._fill</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_updateCircle</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">t._point.round</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">Math.round</span><span class="PUNC">(</span><span class="NAME">t._radius</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">Math.round</span><span class="PUNC">(</span><span class="NAME">t._radiusY</span><span class="PUNC">||</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this._setPath</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">t._empty</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="STRN">"M0 0"</span><span class="PUNC">:</span><span class="STRN">"AL "</span><span class="PUNC">+</span><span class="NAME">e.x</span><span class="PUNC">+</span><span class="STRN">","</span><span class="PUNC">+</span><span class="NAME">e.y</span><span class="PUNC">+</span><span class="STRN">" "</span><span class="PUNC">+</span><span class="NAME">i</span><span class="PUNC">+</span><span class="STRN">","</span><span class="PUNC">+</span><span class="NAME">n</span><span class="PUNC">+</span><span class="STRN">" 0,23592600"</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_setPath</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">t._path.v</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_bringToFront</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.DomUtil.toFront</span><span class="PUNC">(</span><span class="NAME">t._container</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_bringToBack</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.DomUtil.toBack</span><span class="PUNC">(</span><span class="NAME">t._container</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Browser.vml</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">o.SVG.create</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">try</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">e.namespaces.add</span><span class="PUNC">(</span><span class="STRN">"lvml"</span><span class="PUNC">,</span><span class="STRN">"urn:schemas-microsoft-com:vml"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">e.createElement</span><span class="PUNC">(</span><span class="STRN">"&lt;lvml:"</span><span class="PUNC">+</span><span class="NAME">t</span><span class="PUNC">+</span><span class="STRN">' class="lvml">'</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">catch</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">e.createElement</span><span class="PUNC">(</span><span class="STRN">"&lt;"</span><span class="PUNC">+</span><span class="NAME">t</span><span class="PUNC">+</span><span class="STRN">' xmlns="urn:schemas-microsoft.com:vml" class="lvml">'</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Canvas</span><span class="PUNC">=</span><span class="NAME">o.Renderer.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">onAdd</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.Renderer.prototype.onAdd.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._layers</span><span class="PUNC">=</span><span class="NAME">this._layers</span><span class="PUNC">||</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">this._draw</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_initContainer</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">this._container</span><span class="PUNC">=</span><span class="NAME">e.createElement</span><span class="PUNC">(</span><span class="STRN">"canvas"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">o.DomEvent.on</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="STRN">"mousemove"</span><span class="PUNC">,</span><span class="NAME">o.Util.throttle</span><span class="PUNC">(</span><span class="NAME">this._onMouseMove</span><span class="PUNC">,</span><span class="NUMB">32</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">on</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="STRN">"click dblclick mousedown mouseup contextmenu"</span><span class="PUNC">,</span><span class="NAME">this._onClick</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">on</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="STRN">"mouseout"</span><span class="PUNC">,</span><span class="NAME">this._handleMouseOut</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._ctx</span><span class="PUNC">=</span><span class="NAME">t.getContext</span><span class="PUNC">(</span><span class="STRN">"2d"</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_update</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this._map._animatingZoom</span><span class="PUNC">||</span><span class="PUNC">!</span><span class="NAME">this._bounds</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._drawnLayers</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.Renderer.prototype._update.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">this._bounds</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this._container</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">t.getSize</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">o.Browser.retina</span><span class="PUNC">?</span><span class="NUMB">2</span><span class="PUNC">:</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="NAME">o.DomUtil.setPosition</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">t.min</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e.width</span><span class="PUNC">=</span><span class="NAME">n</span><span class="PUNC">*</span><span class="NAME">i.x</span><span class="PUNC">,</span><span class="NAME">e.height</span><span class="PUNC">=</span><span class="NAME">n</span><span class="PUNC">*</span><span class="NAME">i.y</span><span class="PUNC">,</span><span class="NAME">e.style.width</span><span class="PUNC">=</span><span class="NAME">i.x</span><span class="PUNC">+</span><span class="STRN">"px"</span><span class="PUNC">,</span><span class="NAME">e.style.height</span><span class="PUNC">=</span><span class="NAME">i.y</span><span class="PUNC">+</span><span class="STRN">"px"</span><span class="PUNC">,</span><span class="NAME">o.Browser.retina</span><span class="PUNC">&&</span><span class="NAME">this._ctx.scale</span><span class="PUNC">(</span><span class="NUMB">2</span><span class="PUNC">,</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._ctx.translate</span><span class="PUNC">(</span><span class="PUNC">-</span><span class="NAME">t.min.x</span><span class="PUNC">,</span><span class="PUNC">-</span><span class="NAME">t.min.y</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_initPath</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._updateDashArray</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._layers</span><span class="PUNC">[</span><span class="NAME">o.stamp</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_addPath</span><span class="PUNC">:</span><span class="NAME">o.Util.falseFn</span><span class="PUNC">,</span><span class="NAME">_removePath</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">t._removed</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">this._requestRedraw</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_updatePath</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._redrawBounds</span><span class="PUNC">=</span><span class="NAME">t._pxBounds</span><span class="PUNC">,</span><span class="NAME">this._draw</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t._project</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t._update</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._draw</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._redrawBounds</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_updateStyle</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._updateDashArray</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._requestRedraw</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_updateDashArray</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">t.options.dashArray</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">t.options.dashArray.split</span><span class="PUNC">(</span><span class="STRN">","</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">e</span><span class="PUNC">&lt;</span><span class="NAME">i.length</span><span class="PUNC">;</span><span class="NAME">e</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="NAME">n.push</span><span class="PUNC">(</span><span class="NAME">Number</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">t.options._dashArray</span><span class="PUNC">=</span><span class="NAME">n</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_requestRedraw</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this._map</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">t.options.weight</span><span class="PUNC">||</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="NAME">this._redrawBounds</span><span class="PUNC">=</span><span class="NAME">this._redrawBounds</span><span class="PUNC">||</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Bounds</span><span class="PUNC">,</span><span class="NAME">this._redrawBounds.extend</span><span class="PUNC">(</span><span class="NAME">t._pxBounds.min.subtract</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._redrawBounds.extend</span><span class="PUNC">(</span><span class="NAME">t._pxBounds.max.add</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._redrawRequest</span><span class="PUNC">=</span><span class="NAME">this._redrawRequest</span><span class="PUNC">||</span><span class="NAME">o.Util.requestAnimFrame</span><span class="PUNC">(</span><span class="NAME">this._redraw</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_redraw</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._redrawRequest</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">this._draw</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._draw</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._redrawBounds</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_draw</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._clear</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this._redrawBounds</span><span class="PUNC">;</span><span class="NAME">this._ctx.save</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">this._ctx.beginPath</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._ctx.rect</span><span class="PUNC">(</span><span class="NAME">i.min.x</span><span class="PUNC">,</span><span class="NAME">i.min.y</span><span class="PUNC">,</span><span class="NAME">i.max.x</span><span class="PUNC">-</span><span class="NAME">i.min.x</span><span class="PUNC">,</span><span class="NAME">i.max.y</span><span class="PUNC">-</span><span class="NAME">i.min.y</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._ctx.clip</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">this._layers</span><span class="PUNC">)</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this._layers</span><span class="PUNC">[</span><span class="NAME">n</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">e._pxBounds.intersects</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="NAME">e._updatePath</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">&&</span><span class="NAME">e._removed</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">e._removed</span><span class="PUNC">,</span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">this._layers</span><span class="PUNC">[</span><span class="NAME">n</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this._ctx.restore</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_updatePoly</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">t._parts</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">r.length</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">=</span><span class="NAME">this._ctx</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">this._drawnLayers</span><span class="PUNC">[</span><span class="NAME">t._leaflet_id</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">h.beginPath</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">h.setLineDash</span><span class="PUNC">&&</span><span class="NAME">h.setLineDash</span><span class="PUNC">(</span><span class="NAME">t.options</span><span class="PUNC">&&</span><span class="NAME">t.options._dashArray</span><span class="PUNC">||</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">a</span><span class="PUNC">></span><span class="NAME">i</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">=</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">length</span><span class="PUNC">;</span><span class="NAME">o</span><span class="PUNC">></span><span class="NAME">n</span><span class="PUNC">;</span><span class="NAME">n</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">n</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">[</span><span class="NAME">n</span><span class="PUNC">?</span><span class="STRN">"lineTo"</span><span class="PUNC">:</span><span class="STRN">"moveTo"</span><span class="PUNC">]</span><span class="PUNC">(</span><span class="NAME">s.x</span><span class="PUNC">,</span><span class="NAME">s.y</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">e</span><span class="PUNC">&&</span><span class="NAME">h.closePath</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">this._fillStroke</span><span class="PUNC">(</span><span class="NAME">h</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_updateCircle</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">t._empty</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">t._point</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this._ctx</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">t._radius</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">t._radiusY</span><span class="PUNC">||</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NAME">n</span><span class="PUNC">;</span><span class="NAME">this._drawnLayers</span><span class="PUNC">[</span><span class="NAME">t._leaflet_id</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">!==</span><span class="NAME">o</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">i.save</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i.scale</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i.beginPath</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i.arc</span><span class="PUNC">(</span><span class="NAME">e.x</span><span class="PUNC">,</span><span class="NAME">e.y</span><span class="PUNC">/</span><span class="NAME">o</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">2</span><span class="PUNC">*</span><span class="NAME">Math.PI</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">!==</span><span class="NAME">o</span><span class="PUNC">&&</span><span class="NAME">i.restore</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._fillStroke</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_fillStroke</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this._clear</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">e.options</span><span class="PUNC">;</span><span class="NAME">t.globalCompositeOperation</span><span class="PUNC">=</span><span class="NAME">i</span><span class="PUNC">?</span><span class="STRN">"destination-out"</span><span class="PUNC">:</span><span class="STRN">"source-over"</span><span class="PUNC">,</span><span class="NAME">n.fill</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">t.globalAlpha</span><span class="PUNC">=</span><span class="NAME">i</span><span class="PUNC">?</span><span class="NUMB">1</span><span class="PUNC">:</span><span class="NAME">n.fillOpacity</span><span class="PUNC">,</span><span class="NAME">t.fillStyle</span><span class="PUNC">=</span><span class="NAME">n.fillColor</span><span class="PUNC">||</span><span class="NAME">n.color</span><span class="PUNC">,</span><span class="NAME">t.fill</span><span class="PUNC">(</span><span class="NAME">n.fillRule</span><span class="PUNC">||</span><span class="STRN">"evenodd"</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n.stroke</span><span class="PUNC">&&</span><span class="NUMB">0</span><span class="PUNC">!==</span><span class="NAME">n.weight</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">t.globalAlpha</span><span class="PUNC">=</span><span class="NAME">i</span><span class="PUNC">?</span><span class="NUMB">1</span><span class="PUNC">:</span><span class="NAME">n.opacity</span><span class="PUNC">,</span><span class="NAME">e._prevWeight</span><span class="PUNC">=</span><span class="NAME">t.lineWidth</span><span class="PUNC">=</span><span class="NAME">i</span><span class="PUNC">?</span><span class="NAME">e._prevWeight</span><span class="PUNC">+</span><span class="NUMB">1</span><span class="PUNC">:</span><span class="NAME">n.weight</span><span class="PUNC">,</span><span class="NAME">t.strokeStyle</span><span class="PUNC">=</span><span class="NAME">n.color</span><span class="PUNC">,</span><span class="NAME">t.lineCap</span><span class="PUNC">=</span><span class="NAME">n.lineCap</span><span class="PUNC">,</span><span class="NAME">t.lineJoin</span><span class="PUNC">=</span><span class="NAME">n.lineJoin</span><span class="PUNC">,</span><span class="NAME">t.stroke</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_onClick</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this._map.mouseEventToLayerPoint</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">s</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">this._layers</span><span class="PUNC">)</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this._layers</span><span class="PUNC">[</span><span class="NAME">s</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">e.options.interactive</span><span class="PUNC">&&</span><span class="NAME">e._containsPoint</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">o.DomEvent._fakeStop</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n.push</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">n.length</span><span class="PUNC">&&</span><span class="NAME">this._fireEvent</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_onMouseMove</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this._map</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">this._map.dragging.moving</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">this._map._animatingZoom</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this._map.mouseEventToLayerPoint</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this._handleMouseOut</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._handleMouseHover</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_handleMouseOut</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this._hoveredLayer</span><span class="PUNC">;</span><span class="PUNC">!</span><span class="NAME">i</span><span class="PUNC">||</span><span class="STRN">"mouseout"</span><span class="PUNC">!==</span><span class="NAME">t.type</span><span class="PUNC">&&</span><span class="NAME">i._containsPoint</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">o.DomUtil.removeClass</span><span class="PUNC">(</span><span class="NAME">this._container</span><span class="PUNC">,</span><span class="STRN">"leaflet-interactive"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._fireEvent</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">,</span><span class="STRN">"mouseout"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._hoveredLayer</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_handleMouseHover</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">i</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">this._drawnLayers</span><span class="PUNC">)</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">this._drawnLayers</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">n.options.interactive</span><span class="PUNC">&&</span><span class="NAME">n._containsPoint</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">o.DomUtil.addClass</span><span class="PUNC">(</span><span class="NAME">this._container</span><span class="PUNC">,</span><span class="STRN">"leaflet-interactive"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._fireEvent</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="NAME">n</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">,</span><span class="STRN">"mouseover"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._hoveredLayer</span><span class="PUNC">=</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this._hoveredLayer</span><span class="PUNC">&&</span><span class="NAME">this._fireEvent</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="NAME">this._hoveredLayer</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_fireEvent</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._map._fireDOMEvent</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">||</span><span class="NAME">e.type</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_bringToFront</span><span class="PUNC">:</span><span class="NAME">o.Util.falseFn</span><span class="PUNC">,</span><span class="NAME">_bringToBack</span><span class="PUNC">:</span><span class="NAME">o.Util.falseFn</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Browser.canvas</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">!</span><span class="PUNC">!</span><span class="NAME">e.createElement</span><span class="PUNC">(</span><span class="STRN">"canvas"</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getContext</span><span class="PUNC">}</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.canvas</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">o.Browser.canvas</span><span class="PUNC">?</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Canvas</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="KEYW">null</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.Polyline.prototype._containsPoint</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">=</span><span class="NAME">this._clickTolerance</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this._pxBounds.contains</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">this._parts.length</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">></span><span class="NAME">i</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">h</span><span class="PUNC">=</span><span class="NAME">this._parts</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">h.length</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">a</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="NAME">a</span><span class="PUNC">></span><span class="NAME">n</span><span class="PUNC">;</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">n</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">||</span><span class="NUMB">0</span><span class="PUNC">!==</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="NAME">o.LineUtil.pointToSegmentDistance</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">[</span><span class="NAME">s</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">[</span><span class="NAME">n</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">&lt;=</span><span class="NAME">l</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.Polygon.prototype._containsPoint</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this._pxBounds.contains</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">=</span><span class="NAME">this._parts.length</span><span class="PUNC">;</span><span class="NAME">h</span><span class="PUNC">></span><span class="NAME">s</span><span class="PUNC">;</span><span class="NAME">s</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this._parts</span><span class="PUNC">[</span><span class="NAME">s</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">=</span><span class="NAME">e.length</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">l</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="NAME">l</span><span class="PUNC">></span><span class="NAME">r</span><span class="PUNC">;</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">r</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NAME">r</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NAME">a</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">i.y</span><span class="PUNC">></span><span class="NAME">t.y</span><span class="PUNC">!=</span><span class="NAME">n.y</span><span class="PUNC">></span><span class="NAME">t.y</span><span class="PUNC">&&</span><span class="NAME">t.x</span><span class="PUNC">&lt;</span><span class="PUNC">(</span><span class="NAME">n.x</span><span class="PUNC">-</span><span class="NAME">i.x</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="PUNC">(</span><span class="NAME">t.y</span><span class="PUNC">-</span><span class="NAME">i.y</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="PUNC">(</span><span class="NAME">n.y</span><span class="PUNC">-</span><span class="NAME">i.y</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="NAME">i.x</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">u</span><span class="PUNC">||</span><span class="NAME">o.Polyline.prototype._containsPoint.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.CircleMarker.prototype._containsPoint</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t.distanceTo</span><span class="PUNC">(</span><span class="NAME">this._point</span><span class="PUNC">)</span><span class="PUNC">&lt;=</span><span class="NAME">this._radius</span><span class="PUNC">+</span><span class="NAME">this._clickTolerance</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.GeoJSON</span><span class="PUNC">=</span><span class="NAME">o.FeatureGroup.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">initialize</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.setOptions</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._layers</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">&&</span><span class="NAME">this.addData</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">addData</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">o.Util.isArray</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="NAME">t</span><span class="PUNC">:</span><span class="NAME">t.features</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">s.length</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">></span><span class="NAME">e</span><span class="PUNC">;</span><span class="NAME">e</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">s</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">(</span><span class="NAME">n.geometries</span><span class="PUNC">||</span><span class="NAME">n.geometry</span><span class="PUNC">||</span><span class="NAME">n.features</span><span class="PUNC">||</span><span class="NAME">n.coordinates</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="NAME">this.addData</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">this.options</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">r.filter</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">r.filter</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">o.GeoJSON.geometryToLayer</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">a</span><span class="PUNC">?</span><span class="PUNC">(</span><span class="NAME">a.feature</span><span class="PUNC">=</span><span class="NAME">o.GeoJSON.asFeature</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">a.defaultOptions</span><span class="PUNC">=</span><span class="NAME">a.options</span><span class="PUNC">,</span><span class="NAME">this.resetStyle</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">r.onEachFeature</span><span class="PUNC">&&</span><span class="NAME">r.onEachFeature</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.addLayer</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">resetStyle</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t.options</span><span class="PUNC">=</span><span class="NAME">o.Util.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">t.defaultOptions</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._setLayerStyle</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">this.options.style</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">setStyle</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.eachLayer</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._setLayerStyle</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_setLayerStyle</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="STRN">"function"</span><span class="PUNC">==</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">(</span><span class="NAME">t.feature</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t.setStyle</span><span class="PUNC">&&</span><span class="NAME">t.setStyle</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.extend</span><span class="PUNC">(</span><span class="NAME">o.GeoJSON</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">geometryToLayer</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">=</span><span class="STRN">"Feature"</span><span class="PUNC">===</span><span class="NAME">t.type</span><span class="PUNC">?</span><span class="NAME">t.geometry</span><span class="PUNC">:</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">=</span><span class="NAME">a</span><span class="PUNC">?</span><span class="NAME">a.coordinates</span><span class="PUNC">:</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">&&</span><span class="NAME">e.pointToLayer</span><span class="PUNC">,</span><span class="NAME">c</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">&&</span><span class="NAME">e.coordsToLatLng</span><span class="PUNC">||</span><span class="NAME">this.coordsToLatLng</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">h</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">a</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="KEYW">switch</span><span class="PUNC">(</span><span class="NAME">a.type</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">case</span><span class="STRN">"Point"</span><span class="PUNC">:</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">c</span><span class="PUNC">(</span><span class="NAME">h</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">?</span><span class="NAME">u</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Marker</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">case</span><span class="STRN">"MultiPoint"</span><span class="PUNC">:</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">h.length</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">></span><span class="NAME">s</span><span class="PUNC">;</span><span class="NAME">s</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">c</span><span class="PUNC">(</span><span class="NAME">h</span><span class="PUNC">[</span><span class="NAME">s</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">l.push</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">?</span><span class="NAME">u</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Marker</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.FeatureGroup</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">case</span><span class="STRN">"LineString"</span><span class="PUNC">:</span><span class="KEYW">case</span><span class="STRN">"MultiLineString"</span><span class="PUNC">:</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">this.coordsToLatLngs</span><span class="PUNC">(</span><span class="NAME">h</span><span class="PUNC">,</span><span class="STRN">"LineString"</span><span class="PUNC">===</span><span class="NAME">a.type</span><span class="PUNC">?</span><span class="NUMB">0</span><span class="PUNC">:</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">c</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Polyline</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">case</span><span class="STRN">"Polygon"</span><span class="PUNC">:</span><span class="KEYW">case</span><span class="STRN">"MultiPolygon"</span><span class="PUNC">:</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">this.coordsToLatLngs</span><span class="PUNC">(</span><span class="NAME">h</span><span class="PUNC">,</span><span class="STRN">"Polygon"</span><span class="PUNC">===</span><span class="NAME">a.type</span><span class="PUNC">?</span><span class="NUMB">1</span><span class="PUNC">:</span><span class="NUMB">2</span><span class="PUNC">,</span><span class="NAME">c</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Polygon</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">case</span><span class="STRN">"GeometryCollection"</span><span class="PUNC">:</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">a.geometries.length</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">></span><span class="NAME">s</span><span class="PUNC">;</span><span class="NAME">s</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">d</span><span class="PUNC">=</span><span class="NAME">this.geometryToLayer</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">geometry</span><span class="PUNC">:</span><span class="NAME">a.geometries</span><span class="PUNC">[</span><span class="NAME">s</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">type</span><span class="PUNC">:</span><span class="STRN">"Feature"</span><span class="PUNC">,</span><span class="NAME">properties</span><span class="PUNC">:</span><span class="NAME">t.properties</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">d</span><span class="PUNC">&&</span><span class="NAME">l.push</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.FeatureGroup</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">default</span><span class="PUNC">:</span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Error</span><span class="PUNC">(</span><span class="STRN">"Invalid GeoJSON object."</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">coordsToLatLng</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.LatLng</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">coordsToLatLngs</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">t.length</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">></span><span class="NAME">s</span><span class="PUNC">;</span><span class="NAME">s</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">?</span><span class="NAME">this.coordsToLatLngs</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NAME">s</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">||</span><span class="NAME">this.coordsToLatLng</span><span class="PUNC">)</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NAME">s</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.push</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">o</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">latLngToCoords</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t.alt</span><span class="PUNC">!==</span><span class="NAME">i</span><span class="PUNC">?</span><span class="PUNC">[</span><span class="NAME">t.lng</span><span class="PUNC">,</span><span class="NAME">t.lat</span><span class="PUNC">,</span><span class="NAME">t.alt</span><span class="PUNC">]</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="NAME">t.lng</span><span class="PUNC">,</span><span class="NAME">t.lat</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">latLngsToCoords</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">t.length</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">></span><span class="NAME">s</span><span class="PUNC">;</span><span class="NAME">s</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="NAME">n.push</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">?</span><span class="NAME">o.GeoJSON.latLngsToCoords</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NAME">s</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">o.GeoJSON.latLngToCoords</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NAME">s</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="PUNC">!</span><span class="NAME">e</span><span class="PUNC">&&</span><span class="NAME">i</span><span class="PUNC">&&</span><span class="NAME">n.push</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getFeature</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t.feature</span><span class="PUNC">?</span><span class="NAME">o.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">t.feature</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">geometry</span><span class="PUNC">:</span><span class="NAME">e</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">o.GeoJSON.asFeature</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">asFeature</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="STRN">"Feature"</span><span class="PUNC">===</span><span class="NAME">t.type</span><span class="PUNC">?</span><span class="NAME">t</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="NAME">type</span><span class="PUNC">:</span><span class="STRN">"Feature"</span><span class="PUNC">,</span><span class="NAME">properties</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">geometry</span><span class="PUNC">:</span><span class="NAME">t</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">r</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">toGeoJSON</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">o.GeoJSON.getFeature</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">type</span><span class="PUNC">:</span><span class="STRN">"Point"</span><span class="PUNC">,</span><span class="NAME">coordinates</span><span class="PUNC">:</span><span class="NAME">o.GeoJSON.latLngToCoords</span><span class="PUNC">(</span><span class="NAME">this.getLatLng</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">o.Marker.include</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Circle.include</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.CircleMarker.include</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Polyline.prototype.toGeoJSON</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NAME">o.Polyline._flat</span><span class="PUNC">(</span><span class="NAME">this._latlngs</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">o.GeoJSON.latLngsToCoords</span><span class="PUNC">(</span><span class="NAME">this._latlngs</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">?</span><span class="NUMB">1</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">o.GeoJSON.getFeature</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">type</span><span class="PUNC">:</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">?</span><span class="STRN">"Multi"</span><span class="PUNC">:</span><span class="STRN">""</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">"LineString"</span><span class="PUNC">,</span><span class="NAME">coordinates</span><span class="PUNC">:</span><span class="NAME">e</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.Polygon.prototype.toGeoJSON</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NAME">o.Polyline._flat</span><span class="PUNC">(</span><span class="NAME">this._latlngs</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">o.Polyline._flat</span><span class="PUNC">(</span><span class="NAME">this._latlngs</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">o.GeoJSON.latLngsToCoords</span><span class="PUNC">(</span><span class="NAME">this._latlngs</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">?</span><span class="NUMB">2</span><span class="PUNC">:</span><span class="NAME">t</span><span class="PUNC">?</span><span class="NUMB">1</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.GeoJSON.getFeature</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">type</span><span class="PUNC">:</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">?</span><span class="STRN">"Multi"</span><span class="PUNC">:</span><span class="STRN">""</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">"Polygon"</span><span class="PUNC">,</span><span class="NAME">coordinates</span><span class="PUNC">:</span><span class="NAME">i</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.LayerGroup.include</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">toMultiPoint</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.eachLayer</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">t.push</span><span class="PUNC">(</span><span class="NAME">e.toGeoJSON</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">geometry.coordinates</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.GeoJSON.getFeature</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">type</span><span class="PUNC">:</span><span class="STRN">"MultiPoint"</span><span class="PUNC">,</span><span class="NAME">coordinates</span><span class="PUNC">:</span><span class="NAME">t</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">toGeoJSON</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">this.feature</span><span class="PUNC">&&</span><span class="NAME">this.feature.geometry</span><span class="PUNC">&&</span><span class="NAME">this.feature.geometry.type</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="STRN">"MultiPoint"</span><span class="PUNC">===</span><span class="NAME">t</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.toMultiPoint</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="STRN">"GeometryCollection"</span><span class="PUNC">===</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.eachLayer</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">t.toGeoJSON</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">t.toGeoJSON</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">i.push</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">?</span><span class="NAME">n.geometry</span><span class="PUNC">:</span><span class="NAME">o.GeoJSON.asFeature</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">?</span><span class="NAME">o.GeoJSON.getFeature</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">geometries</span><span class="PUNC">:</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">type</span><span class="PUNC">:</span><span class="STRN">"GeometryCollection"</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="NAME">type</span><span class="PUNC">:</span><span class="STRN">"FeatureCollection"</span><span class="PUNC">,</span><span class="NAME">features</span><span class="PUNC">:</span><span class="NAME">i</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.geoJSON</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.GeoJSON</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.geoJson</span><span class="PUNC">=</span><span class="NAME">o.geoJSON</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">a</span><span class="PUNC">=</span><span class="STRN">"_leaflet_events"</span><span class="PUNC">;</span><span class="NAME">o.DomEvent</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">on</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="STRN">"object"</span><span class="PUNC">==</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">)</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">s</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">)</span><span class="NAME">this._on</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NAME">s</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">o.Util.splitWords</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">r</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">e.length</span><span class="PUNC">;</span><span class="NAME">a</span><span class="PUNC">></span><span class="NAME">r</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="NAME">this._on</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NAME">r</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">off</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="STRN">"object"</span><span class="PUNC">==</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">)</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">s</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">)</span><span class="NAME">this._off</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NAME">s</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">o.Util.splitWords</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">r</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">e.length</span><span class="PUNC">;</span><span class="NAME">a</span><span class="PUNC">></span><span class="NAME">r</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="NAME">this._off</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NAME">r</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_on</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">i</span><span class="PUNC">+</span><span class="NAME">o.stamp</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">?</span><span class="STRN">"_"</span><span class="PUNC">+</span><span class="NAME">o.stamp</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="STRN">""</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NAME">a</span><span class="PUNC">]</span><span class="PUNC">&&</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NAME">a</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">r</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">h</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">n.call</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">||</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">||</span><span class="NAME">t.event</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">=</span><span class="NAME">h</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">o.Browser.pointer</span><span class="PUNC">&&</span><span class="NUMB">0</span><span class="PUNC">===</span><span class="NAME">i.indexOf</span><span class="PUNC">(</span><span class="STRN">"touch"</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="NAME">this.addPointerListener</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">o.Browser.touch</span><span class="PUNC">&&</span><span class="STRN">"dblclick"</span><span class="PUNC">===</span><span class="NAME">i</span><span class="PUNC">&&</span><span class="NAME">this.addDoubleTapListener</span><span class="PUNC">?</span><span class="NAME">this.addDoubleTapListener</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="STRN">"addEventListener"</span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">?</span><span class="STRN">"mousewheel"</span><span class="PUNC">===</span><span class="NAME">i</span><span class="PUNC">?</span><span class="NAME">e.addEventListener</span><span class="PUNC">(</span><span class="STRN">"onwheel"</span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">?</span><span class="STRN">"wheel"</span><span class="PUNC">:</span><span class="STRN">"mousewheel"</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="STRN">"mouseenter"</span><span class="PUNC">===</span><span class="NAME">i</span><span class="PUNC">||</span><span class="STRN">"mouseleave"</span><span class="PUNC">===</span><span class="NAME">i</span><span class="PUNC">?</span><span class="PUNC">(</span><span class="NAME">h</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">i</span><span class="PUNC">||</span><span class="NAME">t.event</span><span class="PUNC">,</span><span class="NAME">o.DomEvent._isExternalTarget</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="NAME">l</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">e.addEventListener</span><span class="PUNC">(</span><span class="STRN">"mouseenter"</span><span class="PUNC">===</span><span class="NAME">i</span><span class="PUNC">?</span><span class="STRN">"mouseover"</span><span class="PUNC">:</span><span class="STRN">"mouseout"</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="PUNC">(</span><span class="STRN">"click"</span><span class="PUNC">===</span><span class="NAME">i</span><span class="PUNC">&&</span><span class="NAME">o.Browser.android</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">h</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">o.DomEvent._filterClick</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e.addEventListener</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="STRN">"attachEvent"</span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">&&</span><span class="NAME">e.attachEvent</span><span class="PUNC">(</span><span class="STRN">"on"</span><span class="PUNC">+</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NAME">a</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NAME">a</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NAME">a</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">r</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">h</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_off</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">+</span><span class="NAME">o.stamp</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">?</span><span class="STRN">"_"</span><span class="PUNC">+</span><span class="NAME">o.stamp</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="STRN">""</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NAME">a</span><span class="PUNC">]</span><span class="PUNC">&&</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NAME">a</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">s</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">r</span><span class="PUNC">?</span><span class="PUNC">(</span><span class="NAME">o.Browser.pointer</span><span class="PUNC">&&</span><span class="NUMB">0</span><span class="PUNC">===</span><span class="NAME">e.indexOf</span><span class="PUNC">(</span><span class="STRN">"touch"</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="NAME">this.removePointerListener</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">o.Browser.touch</span><span class="PUNC">&&</span><span class="STRN">"dblclick"</span><span class="PUNC">===</span><span class="NAME">e</span><span class="PUNC">&&</span><span class="NAME">this.removeDoubleTapListener</span><span class="PUNC">?</span><span class="NAME">this.removeDoubleTapListener</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="STRN">"removeEventListener"</span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">?</span><span class="STRN">"mousewheel"</span><span class="PUNC">===</span><span class="NAME">e</span><span class="PUNC">?</span><span class="NAME">t.removeEventListener</span><span class="PUNC">(</span><span class="STRN">"onwheel"</span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">?</span><span class="STRN">"wheel"</span><span class="PUNC">:</span><span class="STRN">"mousewheel"</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">t.removeEventListener</span><span class="PUNC">(</span><span class="STRN">"mouseenter"</span><span class="PUNC">===</span><span class="NAME">e</span><span class="PUNC">?</span><span class="STRN">"mouseover"</span><span class="PUNC">:</span><span class="STRN">"mouseleave"</span><span class="PUNC">===</span><span class="NAME">e</span><span class="PUNC">?</span><span class="STRN">"mouseout"</span><span class="PUNC">:</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="STRN">"detachEvent"</span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">&&</span><span class="NAME">t.detachEvent</span><span class="PUNC">(</span><span class="STRN">"on"</span><span class="PUNC">+</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NAME">a</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">s</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">stopPropagation</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t.stopPropagation</span><span class="PUNC">?</span><span class="NAME">t.stopPropagation</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">t.originalEvent</span><span class="PUNC">?</span><span class="NAME">t.originalEvent._stopped</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">:</span><span class="NAME">t.cancelBubble</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">o.DomEvent._skipped</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">disableScrollPropagation</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">o.DomEvent.on</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="STRN">"mousewheel"</span><span class="PUNC">,</span><span class="NAME">o.DomEvent.stopPropagation</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">disableClickPropagation</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">o.DomEvent.stopPropagation</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">o.DomEvent.on</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">o.Draggable.START.join</span><span class="PUNC">(</span><span class="STRN">" "</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.DomEvent.on</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">click</span><span class="PUNC">:</span><span class="NAME">o.DomEvent._fakeStop</span><span class="PUNC">,</span><span class="NAME">dblclick</span><span class="PUNC">:</span><span class="NAME">e</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">preventDefault</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t.preventDefault</span><span class="PUNC">?</span><span class="NAME">t.preventDefault</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">t.returnValue</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">stop</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">o.DomEvent.preventDefault</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">stopPropagation</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getMousePosition</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">e</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Point</span><span class="PUNC">(</span><span class="NAME">t.clientX</span><span class="PUNC">,</span><span class="NAME">t.clientY</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">e.getBoundingClientRect</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Point</span><span class="PUNC">(</span><span class="NAME">t.clientX</span><span class="PUNC">-</span><span class="NAME">i.left</span><span class="PUNC">-</span><span class="NAME">e.clientLeft</span><span class="PUNC">,</span><span class="NAME">t.clientY</span><span class="PUNC">-</span><span class="NAME">i.top</span><span class="PUNC">-</span><span class="NAME">e.clientTop</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getWheelDelta</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t.deltaY</span><span class="PUNC">&&</span><span class="NUMB">0</span><span class="PUNC">===</span><span class="NAME">t.deltaMode</span><span class="PUNC">?</span><span class="PUNC">-</span><span class="NAME">t.deltaY</span><span class="PUNC">:</span><span class="NAME">t.deltaY</span><span class="PUNC">&&</span><span class="NUMB">1</span><span class="PUNC">===</span><span class="NAME">t.deltaMode</span><span class="PUNC">?</span><span class="NUMB">18</span><span class="PUNC">*</span><span class="PUNC">-</span><span class="NAME">t.deltaY</span><span class="PUNC">:</span><span class="NAME">t.deltaY</span><span class="PUNC">&&</span><span class="NUMB">2</span><span class="PUNC">===</span><span class="NAME">t.deltaMode</span><span class="PUNC">?</span><span class="NUMB">52</span><span class="PUNC">*</span><span class="PUNC">-</span><span class="NAME">t.deltaY</span><span class="PUNC">:</span><span class="NAME">t.deltaX</span><span class="PUNC">||</span><span class="NAME">t.deltaZ</span><span class="PUNC">?</span><span class="NUMB">0</span><span class="PUNC">:</span><span class="NAME">t.wheelDelta</span><span class="PUNC">?</span><span class="PUNC">(</span><span class="NAME">t.wheelDeltaY</span><span class="PUNC">||</span><span class="NAME">t.wheelDelta</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">:</span><span class="NAME">t.detail</span><span class="PUNC">&&</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">t.detail</span><span class="PUNC">)</span><span class="PUNC">&lt;</span><span class="NUMB">32765</span><span class="PUNC">?</span><span class="NUMB">18</span><span class="PUNC">*</span><span class="PUNC">-</span><span class="NAME">t.detail</span><span class="PUNC">:</span><span class="NAME">t.detail</span><span class="PUNC">?</span><span class="NAME">t.detail</span><span class="PUNC">/</span><span class="PUNC">-</span><span class="NUMB">32765</span><span class="PUNC">*</span><span class="NUMB">52</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_skipEvents</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_fakeStop</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.DomEvent._skipEvents</span><span class="PUNC">[</span><span class="NAME">t.type</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_skipped</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this._skipEvents</span><span class="PUNC">[</span><span class="NAME">t.type</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._skipEvents</span><span class="PUNC">[</span><span class="NAME">t.type</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_isExternalTarget</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">e.relatedTarget</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">i</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="KEYW">try</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">&&</span><span class="NAME">i</span><span class="PUNC">!==</span><span class="NAME">t</span><span class="PUNC">;</span><span class="PUNC">)</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">i.parentNode</span><span class="PUNC">}</span><span class="KEYW">catch</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">!==</span><span class="NAME">t</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>  8</span> </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_filterClick</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">t.timeStamp</span><span class="PUNC">||</span><span class="NAME">t.originalEvent</span><span class="PUNC">&&</span><span class="NAME">t.originalEvent.timeStamp</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">o.DomEvent._lastClick</span><span class="PUNC">&&</span><span class="NAME">i</span><span class="PUNC">-</span><span class="NAME">o.DomEvent._lastClick</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">&&</span><span class="NAME">n</span><span class="PUNC">></span><span class="NUMB">100</span><span class="PUNC">&&</span><span class="NUMB">500</span><span class="PUNC">></span><span class="NAME">n</span><span class="PUNC">||</span><span class="NAME">t.target._simulatedClick</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">t._simulated</span><span class="PUNC">?</span><span class="KEYW">void</span><span class="WHIT"> </span><span class="NAME">o.DomEvent.stop</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="PUNC">(</span><span class="NAME">o.DomEvent._lastClick</span><span class="PUNC">=</span><span class="NAME">i</span><span class="PUNC">,</span><span class="KEYW">void</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.DomEvent.addListener</span><span class="PUNC">=</span><span class="NAME">o.DomEvent.on</span><span class="PUNC">,</span><span class="NAME">o.DomEvent.removeListener</span><span class="PUNC">=</span><span class="NAME">o.DomEvent.off</span><span class="PUNC">,</span><span class="NAME">o.Draggable</span><span class="PUNC">=</span><span class="NAME">o.Evented.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">options</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="NAME">clickTolerance</span><span class="PUNC">:</span><span class="NUMB">3</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">statics</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="NAME">START</span><span class="PUNC">:</span><span class="NAME">o.Browser.touch</span><span class="PUNC">?</span><span class="PUNC">[</span><span class="STRN">"touchstart"</span><span class="PUNC">,</span><span class="STRN">"mousedown"</span><span class="PUNC">]</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="STRN">"mousedown"</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">END</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="NAME">mousedown</span><span class="PUNC">:</span><span class="STRN">"mouseup"</span><span class="PUNC">,</span><span class="NAME">touchstart</span><span class="PUNC">:</span><span class="STRN">"touchend"</span><span class="PUNC">,</span><span class="NAME">pointerdown</span><span class="PUNC">:</span><span class="STRN">"touchend"</span><span class="PUNC">,</span><span class="NAME">MSPointerDown</span><span class="PUNC">:</span><span class="STRN">"touchend"</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">MOVE</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="NAME">mousedown</span><span class="PUNC">:</span><span class="STRN">"mousemove"</span><span class="PUNC">,</span><span class="NAME">touchstart</span><span class="PUNC">:</span><span class="STRN">"touchmove"</span><span class="PUNC">,</span><span class="NAME">pointerdown</span><span class="PUNC">:</span><span class="STRN">"touchmove"</span><span class="PUNC">,</span><span class="NAME">MSPointerDown</span><span class="PUNC">:</span><span class="STRN">"touchmove"</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">initialize</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._element</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">this._dragStartTarget</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">||</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">this._preventOutline</span><span class="PUNC">=</span><span class="NAME">i</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">enable</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._enabled</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">o.DomEvent.on</span><span class="PUNC">(</span><span class="NAME">this._dragStartTarget</span><span class="PUNC">,</span><span class="NAME">o.Draggable.START.join</span><span class="PUNC">(</span><span class="STRN">" "</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._onDown</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._enabled</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">disable</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._enabled</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">o.DomEvent.off</span><span class="PUNC">(</span><span class="NAME">this._dragStartTarget</span><span class="PUNC">,</span><span class="NAME">o.Draggable.START.join</span><span class="PUNC">(</span><span class="STRN">" "</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._onDown</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._enabled</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">this._moved</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_onDown</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">t._simulated</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">this._moved</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NAME">o.DomUtil.hasClass</span><span class="PUNC">(</span><span class="NAME">this._element</span><span class="PUNC">,</span><span class="STRN">"leaflet-zoom-anim"</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="PUNC">(</span><span class="NAME">o.Draggable._dragging</span><span class="PUNC">||</span><span class="NAME">t.shiftKey</span><span class="PUNC">||</span><span class="NUMB">1</span><span class="PUNC">!==</span><span class="NAME">t.which</span><span class="PUNC">&&</span><span class="NUMB">1</span><span class="PUNC">!==</span><span class="NAME">t.button</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">t.touches</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="NAME">this._enabled</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">o.Draggable._dragging</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">this._preventOutline</span><span class="PUNC">&&</span><span class="NAME">o.DomUtil.preventOutline</span><span class="PUNC">(</span><span class="NAME">this._element</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.DomUtil.disableImageDrag</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.DomUtil.disableTextSelection</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NAME">this._moving</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.fire</span><span class="PUNC">(</span><span class="STRN">"down"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">t.touches</span><span class="PUNC">?</span><span class="NAME">t.touches</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">:</span><span class="NAME">t</span><span class="PUNC">;</span><span class="NAME">this._startPoint</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Point</span><span class="PUNC">(</span><span class="NAME">i.clientX</span><span class="PUNC">,</span><span class="NAME">i.clientY</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._startPos</span><span class="PUNC">=</span><span class="NAME">this._newPos</span><span class="PUNC">=</span><span class="NAME">o.DomUtil.getPosition</span><span class="PUNC">(</span><span class="NAME">this._element</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.DomEvent.on</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">o.Draggable.MOVE</span><span class="PUNC">[</span><span class="NAME">t.type</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">this._onMove</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">on</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">o.Draggable.END</span><span class="PUNC">[</span><span class="NAME">t.type</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">this._onUp</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_onMove</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">i._simulated</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">i.touches</span><span class="PUNC">&&</span><span class="NAME">i.touches.length</span><span class="PUNC">></span><span class="NUMB">1</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">void</span><span class="PUNC">(</span><span class="NAME">this._moved</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">i.touches</span><span class="PUNC">&&</span><span class="NUMB">1</span><span class="PUNC">===</span><span class="NAME">i.touches.length</span><span class="PUNC">?</span><span class="NAME">i.touches</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">:</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Point</span><span class="PUNC">(</span><span class="NAME">n.clientX</span><span class="PUNC">,</span><span class="NAME">n.clientY</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">s.subtract</span><span class="PUNC">(</span><span class="NAME">this._startPoint</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">(</span><span class="NAME">r.x</span><span class="PUNC">||</span><span class="NAME">r.y</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">r.x</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">r.y</span><span class="PUNC">)</span><span class="PUNC">&lt;</span><span class="NAME">this.options.clickTolerance</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">o.DomEvent.preventDefault</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._moved</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">this.fire</span><span class="PUNC">(</span><span class="STRN">"dragstart"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._moved</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">this._startPos</span><span class="PUNC">=</span><span class="NAME">o.DomUtil.getPosition</span><span class="PUNC">(</span><span class="NAME">this._element</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">subtract</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.DomUtil.addClass</span><span class="PUNC">(</span><span class="NAME">e.body</span><span class="PUNC">,</span><span class="STRN">"leaflet-dragging"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._lastTarget</span><span class="PUNC">=</span><span class="NAME">i.target</span><span class="PUNC">||</span><span class="NAME">i.srcElement</span><span class="PUNC">,</span><span class="NAME">t.SVGElementInstance</span><span class="PUNC">&&</span><span class="NAME">this._lastTarget</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">SVGElementInstance</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">this._lastTarget</span><span class="PUNC">=</span><span class="NAME">this._lastTarget.correspondingUseElement</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.DomUtil.addClass</span><span class="PUNC">(</span><span class="NAME">this._lastTarget</span><span class="PUNC">,</span><span class="STRN">"leaflet-drag-target"</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._newPos</span><span class="PUNC">=</span><span class="NAME">this._startPos.add</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._moving</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">o.Util.cancelAnimFrame</span><span class="PUNC">(</span><span class="NAME">this._animRequest</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._lastEvent</span><span class="PUNC">=</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">this._animRequest</span><span class="PUNC">=</span><span class="NAME">o.Util.requestAnimFrame</span><span class="PUNC">(</span><span class="NAME">this._updatePosition</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_updatePosition</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">originalEvent</span><span class="PUNC">:</span><span class="NAME">this._lastEvent</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.fire</span><span class="PUNC">(</span><span class="STRN">"predrag"</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.DomUtil.setPosition</span><span class="PUNC">(</span><span class="NAME">this._element</span><span class="PUNC">,</span><span class="NAME">this._newPos</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.fire</span><span class="PUNC">(</span><span class="STRN">"drag"</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_onUp</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">t._simulated</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.DomUtil.removeClass</span><span class="PUNC">(</span><span class="NAME">e.body</span><span class="PUNC">,</span><span class="STRN">"leaflet-dragging"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._lastTarget</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">o.DomUtil.removeClass</span><span class="PUNC">(</span><span class="NAME">this._lastTarget</span><span class="PUNC">,</span><span class="STRN">"leaflet-drag-target"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._lastTarget</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">o.Draggable.MOVE</span><span class="PUNC">)</span><span class="NAME">o.DomEvent.off</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">o.Draggable.MOVE</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">this._onMove</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">off</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">o.Draggable.END</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">this._onUp</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">o.DomUtil.enableImageDrag</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.DomUtil.enableTextSelection</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._moved</span><span class="PUNC">&&</span><span class="NAME">this._moving</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">o.Util.cancelAnimFrame</span><span class="PUNC">(</span><span class="NAME">this._animRequest</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.fire</span><span class="PUNC">(</span><span class="STRN">"dragend"</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">distance</span><span class="PUNC">:</span><span class="NAME">this._newPos.distanceTo</span><span class="PUNC">(</span><span class="NAME">this._startPos</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._moving</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">o.Draggable._dragging</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Handler</span><span class="PUNC">=</span><span class="NAME">o.Class.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">initialize</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._map</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">enable</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._enabled</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">this._enabled</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">this.addHooks</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">disable</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._enabled</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">this._enabled</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">this.removeHooks</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">enabled</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">!</span><span class="PUNC">!</span><span class="NAME">this._enabled</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Map.mergeOptions</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">dragging</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">inertia</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NAME">o.Browser.android23</span><span class="PUNC">,</span><span class="NAME">inertiaDeceleration</span><span class="PUNC">:</span><span class="NUMB">3400</span><span class="PUNC">,</span><span class="NAME">inertiaMaxSpeed</span><span class="PUNC">:</span><span class="NUMB">1</span><span class="PUNC">/</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">easeLinearity</span><span class="PUNC">:</span><span class="PUNC">.</span><span class="NUMB">2</span><span class="PUNC">,</span><span class="NAME">worldCopyJump</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">maxBoundsViscosity</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Map.Drag</span><span class="PUNC">=</span><span class="NAME">o.Handler.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">addHooks</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this._draggable</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">this._map</span><span class="PUNC">;</span><span class="NAME">this._draggable</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Draggable</span><span class="PUNC">(</span><span class="NAME">t._mapPane</span><span class="PUNC">,</span><span class="NAME">t._container</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._draggable.on</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">down</span><span class="PUNC">:</span><span class="NAME">this._onDown</span><span class="PUNC">,</span><span class="NAME">dragstart</span><span class="PUNC">:</span><span class="NAME">this._onDragStart</span><span class="PUNC">,</span><span class="NAME">drag</span><span class="PUNC">:</span><span class="NAME">this._onDrag</span><span class="PUNC">,</span><span class="NAME">dragend</span><span class="PUNC">:</span><span class="NAME">this._onDragEnd</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._draggable.on</span><span class="PUNC">(</span><span class="STRN">"predrag"</span><span class="PUNC">,</span><span class="NAME">this._onPreDragLimit</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t.options.worldCopyJump</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">this._draggable.on</span><span class="PUNC">(</span><span class="STRN">"predrag"</span><span class="PUNC">,</span><span class="NAME">this._onPreDragWrap</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t.on</span><span class="PUNC">(</span><span class="STRN">"zoomend"</span><span class="PUNC">,</span><span class="NAME">this._onZoomEnd</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t.whenReady</span><span class="PUNC">(</span><span class="NAME">this._onZoomEnd</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">o.DomUtil.addClass</span><span class="PUNC">(</span><span class="NAME">this._map._container</span><span class="PUNC">,</span><span class="STRN">"leaflet-grab"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._draggable.enable</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._positions</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">this._times</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">removeHooks</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.DomUtil.removeClass</span><span class="PUNC">(</span><span class="NAME">this._map._container</span><span class="PUNC">,</span><span class="STRN">"leaflet-grab"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._draggable.disable</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">moved</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._draggable</span><span class="PUNC">&&</span><span class="NAME">this._draggable._moved</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">moving</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._draggable</span><span class="PUNC">&&</span><span class="NAME">this._draggable._moving</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_onDown</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._map._stop</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_onDragStart</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">this._map</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this._map.options.maxBounds</span><span class="PUNC">&&</span><span class="NAME">this._map.options.maxBoundsViscosity</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">o.latLngBounds</span><span class="PUNC">(</span><span class="NAME">this._map.options.maxBounds</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this._offsetLimit</span><span class="PUNC">=</span><span class="NAME">o.bounds</span><span class="PUNC">(</span><span class="NAME">this._map.latLngToContainerPoint</span><span class="PUNC">(</span><span class="NAME">e.getNorthWest</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">multiplyBy</span><span class="PUNC">(</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._map.latLngToContainerPoint</span><span class="PUNC">(</span><span class="NAME">e.getSouthEast</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">multiplyBy</span><span class="PUNC">(</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">add</span><span class="PUNC">(</span><span class="NAME">this._map.getSize</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._viscosity</span><span class="PUNC">=</span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">this._map.options.maxBoundsViscosity</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="WHIT"> </span><span class="NAME">this._offsetLimit</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="NAME">t.fire</span><span class="PUNC">(</span><span class="STRN">"movestart"</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">fire</span><span class="PUNC">(</span><span class="STRN">"dragstart"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t.options.inertia</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">this._positions</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">this._times</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_onDrag</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this._map.options.inertia</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this._lastTime</span><span class="PUNC">=</span><span class="PUNC">+</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Date</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this._lastPos</span><span class="PUNC">=</span><span class="NAME">this._draggable._absPos</span><span class="PUNC">||</span><span class="NAME">this._draggable._newPos</span><span class="PUNC">;</span><span class="NAME">this._positions.push</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._times.push</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">-</span><span class="NAME">this._times</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">></span><span class="NUMB">50</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">this._positions.shift</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._times.shift</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">this._map.fire</span><span class="PUNC">(</span><span class="STRN">"move"</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">fire</span><span class="PUNC">(</span><span class="STRN">"drag"</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_onZoomEnd</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">this._map.getSize</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">divideBy</span><span class="PUNC">(</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this._map.latLngToLayerPoint</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this._initialWorldOffset</span><span class="PUNC">=</span><span class="NAME">e.subtract</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">x</span><span class="PUNC">,</span><span class="NAME">this._worldWidth</span><span class="PUNC">=</span><span class="NAME">this._map.getPixelWorldBounds</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getSize</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">x</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_viscousLimit</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">-</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">-</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NAME">this._viscosity</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_onPreDragLimit</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this._viscosity</span><span class="PUNC">&&</span><span class="NAME">this._offsetLimit</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">this._draggable._newPos.subtract</span><span class="PUNC">(</span><span class="NAME">this._draggable._startPos</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this._offsetLimit</span><span class="PUNC">;</span><span class="NAME">t.x</span><span class="PUNC">&lt;</span><span class="NAME">e.min.x</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">t.x</span><span class="PUNC">=</span><span class="NAME">this._viscousLimit</span><span class="PUNC">(</span><span class="NAME">t.x</span><span class="PUNC">,</span><span class="NAME">e.min.x</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t.y</span><span class="PUNC">&lt;</span><span class="NAME">e.min.y</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">t.y</span><span class="PUNC">=</span><span class="NAME">this._viscousLimit</span><span class="PUNC">(</span><span class="NAME">t.y</span><span class="PUNC">,</span><span class="NAME">e.min.y</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t.x</span><span class="PUNC">></span><span class="NAME">e.max.x</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">t.x</span><span class="PUNC">=</span><span class="NAME">this._viscousLimit</span><span class="PUNC">(</span><span class="NAME">t.x</span><span class="PUNC">,</span><span class="NAME">e.max.x</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t.y</span><span class="PUNC">></span><span class="NAME">e.max.y</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">t.y</span><span class="PUNC">=</span><span class="NAME">this._viscousLimit</span><span class="PUNC">(</span><span class="NAME">t.y</span><span class="PUNC">,</span><span class="NAME">e.max.y</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._draggable._newPos</span><span class="PUNC">=</span><span class="NAME">this._draggable._startPos.add</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_onPreDragWrap</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">this._worldWidth</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">Math.round</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this._initialWorldOffset</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">this._draggable._newPos.x</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">-</span><span class="NAME">e</span><span class="PUNC">+</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">%</span><span class="NAME">t</span><span class="PUNC">+</span><span class="NAME">e</span><span class="PUNC">-</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">+</span><span class="NAME">e</span><span class="PUNC">+</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">%</span><span class="NAME">t</span><span class="PUNC">-</span><span class="NAME">e</span><span class="PUNC">-</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">o</span><span class="PUNC">+</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">&lt;</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">+</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="NAME">o</span><span class="PUNC">:</span><span class="NAME">s</span><span class="PUNC">;</span><span class="NAME">this._draggable._absPos</span><span class="PUNC">=</span><span class="NAME">this._draggable._newPos.clone</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._draggable._newPos.x</span><span class="PUNC">=</span><span class="NAME">r</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_onDragEnd</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this._map</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">e.options</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NAME">i.inertia</span><span class="PUNC">||</span><span class="NAME">this._times.length</span><span class="PUNC">&lt;</span><span class="NUMB">2</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">e.fire</span><span class="PUNC">(</span><span class="STRN">"dragend"</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="NAME">e.fire</span><span class="PUNC">(</span><span class="STRN">"moveend"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">this._lastPos.subtract</span><span class="PUNC">(</span><span class="NAME">this._positions</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">this._lastTime</span><span class="PUNC">-</span><span class="NAME">this._times</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NUMB">1</span><span class="NAME">e3</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">i.easeLinearity</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">=</span><span class="NAME">s.multiplyBy</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">/</span><span class="NAME">r</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">=</span><span class="NAME">h.distanceTo</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">=</span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NAME">i.inertiaMaxSpeed</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">c</span><span class="PUNC">=</span><span class="NAME">h.multiplyBy</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">/</span><span class="NAME">l</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">d</span><span class="PUNC">=</span><span class="NAME">u</span><span class="PUNC">/</span><span class="PUNC">(</span><span class="NAME">i.inertiaDeceleration</span><span class="PUNC">*</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">_</span><span class="PUNC">=</span><span class="NAME">c.multiplyBy</span><span class="PUNC">(</span><span class="PUNC">-</span><span class="NAME">d</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">round</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">_.x</span><span class="PUNC">||</span><span class="NAME">_.y</span><span class="PUNC">?</span><span class="PUNC">(</span><span class="NAME">_</span><span class="PUNC">=</span><span class="NAME">e._limitOffset</span><span class="PUNC">(</span><span class="NAME">_</span><span class="PUNC">,</span><span class="NAME">e.options.maxBounds</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Util.requestAnimFrame</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">e.panBy</span><span class="PUNC">(</span><span class="NAME">_</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">duration</span><span class="PUNC">:</span><span class="NAME">d</span><span class="PUNC">,</span><span class="NAME">easeLinearity</span><span class="PUNC">:</span><span class="NAME">a</span><span class="PUNC">,</span><span class="NAME">noMoveStart</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">animate</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">e.fire</span><span class="PUNC">(</span><span class="STRN">"moveend"</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Map.addInitHook</span><span class="PUNC">(</span><span class="STRN">"addHandler"</span><span class="PUNC">,</span><span class="STRN">"dragging"</span><span class="PUNC">,</span><span class="NAME">o.Map.Drag</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Map.mergeOptions</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">doubleClickZoom</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Map.DoubleClickZoom</span><span class="PUNC">=</span><span class="NAME">o.Handler.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">addHooks</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._map.on</span><span class="PUNC">(</span><span class="STRN">"dblclick"</span><span class="PUNC">,</span><span class="NAME">this._onDoubleClick</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">removeHooks</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._map.off</span><span class="PUNC">(</span><span class="STRN">"dblclick"</span><span class="PUNC">,</span><span class="NAME">this._onDoubleClick</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_onDoubleClick</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this._map</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">e.getZoom</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">e.options.zoomDelta</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">=</span><span class="NAME">t.originalEvent.shiftKey</span><span class="PUNC">?</span><span class="NAME">i</span><span class="PUNC">-</span><span class="NAME">n</span><span class="PUNC">:</span><span class="NAME">i</span><span class="PUNC">+</span><span class="NAME">n</span><span class="PUNC">;</span><span class="STRN">"center"</span><span class="PUNC">===</span><span class="NAME">e.options.doubleClickZoom</span><span class="PUNC">?</span><span class="NAME">e.setZoom</span><span class="PUNC">(</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">e.setZoomAround</span><span class="PUNC">(</span><span class="NAME">t.containerPoint</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Map.addInitHook</span><span class="PUNC">(</span><span class="STRN">"addHandler"</span><span class="PUNC">,</span><span class="STRN">"doubleClickZoom"</span><span class="PUNC">,</span><span class="NAME">o.Map.DoubleClickZoom</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Map.mergeOptions</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">scrollWheelZoom</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">wheelDebounceTime</span><span class="PUNC">:</span><span class="NUMB">40</span><span class="PUNC">,</span><span class="NAME">wheelPxPerZoomLevel</span><span class="PUNC">:</span><span class="NUMB">50</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Map.ScrollWheelZoom</span><span class="PUNC">=</span><span class="NAME">o.Handler.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">addHooks</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.DomEvent.on</span><span class="PUNC">(</span><span class="NAME">this._map._container</span><span class="PUNC">,</span><span class="STRN">"mousewheel"</span><span class="PUNC">,</span><span class="NAME">this._onWheelScroll</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._delta</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">removeHooks</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.DomEvent.off</span><span class="PUNC">(</span><span class="NAME">this._map._container</span><span class="PUNC">,</span><span class="STRN">"mousewheel"</span><span class="PUNC">,</span><span class="NAME">this._onWheelScroll</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_onWheelScroll</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">o.DomEvent.getWheelDelta</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this._map.options.wheelDebounceTime</span><span class="PUNC">;</span><span class="NAME">this._delta</span><span class="PUNC">+</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">this._lastMousePos</span><span class="PUNC">=</span><span class="NAME">this._map.mouseEventToContainerPoint</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._startTime</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">this._startTime</span><span class="PUNC">=</span><span class="PUNC">+</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Date</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">-</span><span class="PUNC">(</span><span class="PUNC">+</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Date</span><span class="PUNC">-</span><span class="NAME">this._startTime</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">clearTimeout</span><span class="PUNC">(</span><span class="NAME">this._timer</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._timer</span><span class="PUNC">=</span><span class="NAME">setTimeout</span><span class="PUNC">(</span><span class="NAME">o.bind</span><span class="PUNC">(</span><span class="NAME">this._performZoom</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.DomEvent.stop</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_performZoom</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">this._map</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">t.getZoom</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this._map.options.zoomSnap</span><span class="PUNC">||</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">t._stop</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">this._delta</span><span class="PUNC">/</span><span class="PUNC">(</span><span class="NUMB">4</span><span class="PUNC">*</span><span class="NAME">this._map.options.wheelPxPerZoomLevel</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">=</span><span class="NUMB">4</span><span class="PUNC">*</span><span class="NAME">Math.log</span><span class="PUNC">(</span><span class="NUMB">2</span><span class="PUNC">/</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">+</span><span class="NAME">Math.exp</span><span class="PUNC">(</span><span class="PUNC">-</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NAME">Math.LN2</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">i</span><span class="PUNC">?</span><span class="NAME">Math.ceil</span><span class="PUNC">(</span><span class="NAME">o</span><span class="PUNC">/</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NAME">i</span><span class="PUNC">:</span><span class="NAME">o</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">t._limitZoom</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">this._delta</span><span class="PUNC">></span><span class="NUMB">0</span><span class="PUNC">?</span><span class="NAME">s</span><span class="PUNC">:</span><span class="PUNC">-</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">-</span><span class="NAME">e</span><span class="PUNC">;</span><span class="NAME">this._delta</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">this._startTime</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="STRN">"center"</span><span class="PUNC">===</span><span class="NAME">t.options.scrollWheelZoom</span><span class="PUNC">?</span><span class="NAME">t.setZoom</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">+</span><span class="NAME">r</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">t.setZoomAround</span><span class="PUNC">(</span><span class="NAME">this._lastMousePos</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">+</span><span class="NAME">r</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Map.addInitHook</span><span class="PUNC">(</span><span class="STRN">"addHandler"</span><span class="PUNC">,</span><span class="STRN">"scrollWheelZoom"</span><span class="PUNC">,</span><span class="NAME">o.Map.ScrollWheelZoom</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.extend</span><span class="PUNC">(</span><span class="NAME">o.DomEvent</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">_touchstart</span><span class="PUNC">:</span><span class="NAME">o.Browser.msPointer</span><span class="PUNC">?</span><span class="STRN">"MSPointerDown"</span><span class="PUNC">:</span><span class="NAME">o.Browser.pointer</span><span class="PUNC">?</span><span class="STRN">"pointerdown"</span><span class="PUNC">:</span><span class="STRN">"touchstart"</span><span class="PUNC">,</span><span class="NAME">_touchend</span><span class="PUNC">:</span><span class="NAME">o.Browser.msPointer</span><span class="PUNC">?</span><span class="STRN">"MSPointerUp"</span><span class="PUNC">:</span><span class="NAME">o.Browser.pointer</span><span class="PUNC">?</span><span class="STRN">"pointerup"</span><span class="PUNC">:</span><span class="STRN">"touchend"</span><span class="PUNC">,</span><span class="NAME">addDoubleTapListener</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">function</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">o.Browser.pointer</span><span class="PUNC">?</span><span class="NAME">o.DomEvent._pointersCount</span><span class="PUNC">:</span><span class="NAME">t.touches.length</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">></span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">Date.now</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">i</span><span class="PUNC">-</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">||</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">t.touches</span><span class="PUNC">?</span><span class="NAME">t.touches</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">:</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">=</span><span class="NAME">n</span><span class="PUNC">></span><span class="NUMB">0</span><span class="PUNC">&&</span><span class="NAME">l</span><span class="PUNC">>=</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">i</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">function</span><span class="WHIT"> </span><span class="NAME">s</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">h</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">a.cancelBubble</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">o.Browser.pointer</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">i</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">a</span><span class="PUNC">)</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">a</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">&&</span><span class="NAME">t.bind</span><span class="PUNC">?</span><span class="NAME">t.bind</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">t</span><span class="PUNC">;</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">n</span><span class="PUNC">}</span><span class="NAME">a.type</span><span class="PUNC">=</span><span class="STRN">"dblclick"</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">r</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">=</span><span class="NUMB">250</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">=</span><span class="STRN">"_leaflet_"</span><span class="PUNC">,</span><span class="NAME">c</span><span class="PUNC">=</span><span class="NAME">this._touchstart</span><span class="PUNC">,</span><span class="NAME">d</span><span class="PUNC">=</span><span class="NAME">this._touchend</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">[</span><span class="NAME">u</span><span class="PUNC">+</span><span class="NAME">c</span><span class="PUNC">+</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NAME">u</span><span class="PUNC">+</span><span class="NAME">d</span><span class="PUNC">+</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NAME">u</span><span class="PUNC">+</span><span class="STRN">"dblclick"</span><span class="PUNC">+</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">t.addEventListener</span><span class="PUNC">(</span><span class="NAME">c</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t.addEventListener</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Browser.edge</span><span class="PUNC">||</span><span class="NAME">t.addEventListener</span><span class="PUNC">(</span><span class="STRN">"dblclick"</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">removeDoubleTapListener</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="STRN">"_leaflet_"</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">+</span><span class="NAME">this._touchstart</span><span class="PUNC">+</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">+</span><span class="NAME">this._touchend</span><span class="PUNC">+</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">+</span><span class="STRN">"dblclick"</span><span class="PUNC">+</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t.removeEventListener</span><span class="PUNC">(</span><span class="NAME">this._touchstart</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t.removeEventListener</span><span class="PUNC">(</span><span class="NAME">this._touchend</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Browser.edge</span><span class="PUNC">||</span><span class="NAME">t.removeEventListener</span><span class="PUNC">(</span><span class="STRN">"dblclick"</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.extend</span><span class="PUNC">(</span><span class="NAME">o.DomEvent</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">POINTER_DOWN</span><span class="PUNC">:</span><span class="NAME">o.Browser.msPointer</span><span class="PUNC">?</span><span class="STRN">"MSPointerDown"</span><span class="PUNC">:</span><span class="STRN">"pointerdown"</span><span class="PUNC">,</span><span class="NAME">POINTER_MOVE</span><span class="PUNC">:</span><span class="NAME">o.Browser.msPointer</span><span class="PUNC">?</span><span class="STRN">"MSPointerMove"</span><span class="PUNC">:</span><span class="STRN">"pointermove"</span><span class="PUNC">,</span><span class="NAME">POINTER_UP</span><span class="PUNC">:</span><span class="NAME">o.Browser.msPointer</span><span class="PUNC">?</span><span class="STRN">"MSPointerUp"</span><span class="PUNC">:</span><span class="STRN">"pointerup"</span><span class="PUNC">,</span><span class="NAME">POINTER_CANCEL</span><span class="PUNC">:</span><span class="NAME">o.Browser.msPointer</span><span class="PUNC">?</span><span class="STRN">"MSPointerCancel"</span><span class="PUNC">:</span><span class="STRN">"pointercancel"</span><span class="PUNC">,</span><span class="NAME">TAG_WHITE_LIST</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="STRN">"INPUT"</span><span class="PUNC">,</span><span class="STRN">"SELECT"</span><span class="PUNC">,</span><span class="STRN">"OPTION"</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">_pointers</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_pointersCount</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">addPointerListener</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="STRN">"touchstart"</span><span class="PUNC">===</span><span class="NAME">e</span><span class="PUNC">?</span><span class="NAME">this._addPointerStart</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="STRN">"touchmove"</span><span class="PUNC">===</span><span class="NAME">e</span><span class="PUNC">?</span><span class="NAME">this._addPointerMove</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="STRN">"touchend"</span><span class="PUNC">===</span><span class="NAME">e</span><span class="PUNC">&&</span><span class="NAME">this._addPointerEnd</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">removePointerListener</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">[</span><span class="STRN">"_leaflet_"</span><span class="PUNC">+</span><span class="NAME">e</span><span class="PUNC">+</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="STRN">"touchstart"</span><span class="PUNC">===</span><span class="NAME">e</span><span class="PUNC">?</span><span class="NAME">t.removeEventListener</span><span class="PUNC">(</span><span class="NAME">this.POINTER_DOWN</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="STRN">"touchmove"</span><span class="PUNC">===</span><span class="NAME">e</span><span class="PUNC">?</span><span class="NAME">t.removeEventListener</span><span class="PUNC">(</span><span class="NAME">this.POINTER_MOVE</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="STRN">"touchend"</span><span class="PUNC">===</span><span class="NAME">e</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">t.removeEventListener</span><span class="PUNC">(</span><span class="NAME">this.POINTER_UP</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t.removeEventListener</span><span class="PUNC">(</span><span class="NAME">this.POINTER_CANCEL</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_addPointerStart</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">o.bind</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="STRN">"mouse"</span><span class="PUNC">!==</span><span class="NAME">t.pointerType</span><span class="PUNC">&&</span><span class="NAME">t.pointerType</span><span class="PUNC">!==</span><span class="NAME">t.MSPOINTER_TYPE_MOUSE</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="PUNC">(</span><span class="NAME">this.TAG_WHITE_LIST.indexOf</span><span class="PUNC">(</span><span class="NAME">t.target.tagName</span><span class="PUNC">)</span><span class="PUNC">&lt;</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="PUNC">;</span><span class="NAME">o.DomEvent.preventDefault</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">this._handlePointer</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">[</span><span class="STRN">"_leaflet_touchstart"</span><span class="PUNC">+</span><span class="NAME">n</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">t.addEventListener</span><span class="PUNC">(</span><span class="NAME">this.POINTER_DOWN</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NAME">this._pointerDocListener</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">o.bind</span><span class="PUNC">(</span><span class="NAME">this._globalPointerUp</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">e.documentElement.addEventListener</span><span class="PUNC">(</span><span class="NAME">this.POINTER_DOWN</span><span class="PUNC">,</span><span class="NAME">o.bind</span><span class="PUNC">(</span><span class="NAME">this._globalPointerDown</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e.documentElement.addEventListener</span><span class="PUNC">(</span><span class="NAME">this.POINTER_MOVE</span><span class="PUNC">,</span><span class="NAME">o.bind</span><span class="PUNC">(</span><span class="NAME">this._globalPointerMove</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e.documentElement.addEventListener</span><span class="PUNC">(</span><span class="NAME">this.POINTER_UP</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e.documentElement.addEventListener</span><span class="PUNC">(</span><span class="NAME">this.POINTER_CANCEL</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._pointerDocListener</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_globalPointerDown</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._pointers</span><span class="PUNC">[</span><span class="NAME">t.pointerId</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">this._pointersCount</span><span class="PUNC">++</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_globalPointerMove</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._pointers</span><span class="PUNC">[</span><span class="NAME">t.pointerId</span><span class="PUNC">]</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">this._pointers</span><span class="PUNC">[</span><span class="NAME">t.pointerId</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_globalPointerUp</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">this._pointers</span><span class="PUNC">[</span><span class="NAME">t.pointerId</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">this._pointersCount</span><span class="PUNC">--</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_handlePointer</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">t.touches</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">this._pointers</span><span class="PUNC">)</span><span class="NAME">t.touches.push</span><span class="PUNC">(</span><span class="NAME">this._pointers</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">t.changedTouches</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_addPointerMove</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">o.bind</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="PUNC">(</span><span class="NAME">t.pointerType</span><span class="PUNC">!==</span><span class="NAME">t.MSPOINTER_TYPE_MOUSE</span><span class="PUNC">&&</span><span class="STRN">"mouse"</span><span class="PUNC">!==</span><span class="NAME">t.pointerType</span><span class="PUNC">||</span><span class="NUMB">0</span><span class="PUNC">!==</span><span class="NAME">t.buttons</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="NAME">this._handlePointer</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">t</span><span class="PUNC">[</span><span class="STRN">"_leaflet_touchmove"</span><span class="PUNC">+</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">t.addEventListener</span><span class="PUNC">(</span><span class="NAME">this.POINTER_MOVE</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_addPointerEnd</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">o.bind</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._handlePointer</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">t</span><span class="PUNC">[</span><span class="STRN">"_leaflet_touchend"</span><span class="PUNC">+</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">t.addEventListener</span><span class="PUNC">(</span><span class="NAME">this.POINTER_UP</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t.addEventListener</span><span class="PUNC">(</span><span class="NAME">this.POINTER_CANCEL</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Map.mergeOptions</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">touchZoom</span><span class="PUNC">:</span><span class="NAME">o.Browser.touch</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">o.Browser.android23</span><span class="PUNC">,</span><span class="NAME">bounceAtZoomLimits</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Map.TouchZoom</span><span class="PUNC">=</span><span class="NAME">o.Handler.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">addHooks</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.DomEvent.on</span><span class="PUNC">(</span><span class="NAME">this._map._container</span><span class="PUNC">,</span><span class="STRN">"touchstart"</span><span class="PUNC">,</span><span class="NAME">this._onTouchStart</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">removeHooks</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.DomEvent.off</span><span class="PUNC">(</span><span class="NAME">this._map._container</span><span class="PUNC">,</span><span class="STRN">"touchstart"</span><span class="PUNC">,</span><span class="NAME">this._onTouchStart</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_onTouchStart</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this._map</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">t.touches</span><span class="PUNC">&&</span><span class="NUMB">2</span><span class="PUNC">===</span><span class="NAME">t.touches.length</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">i._animatingZoom</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">this._zooming</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">i.mouseEventToContainerPoint</span><span class="PUNC">(</span><span class="NAME">t.touches</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">i.mouseEventToContainerPoint</span><span class="PUNC">(</span><span class="NAME">t.touches</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this._centerPoint</span><span class="PUNC">=</span><span class="NAME">i.getSize</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">_divideBy</span><span class="PUNC">(</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._startLatLng</span><span class="PUNC">=</span><span class="NAME">i.containerPointToLatLng</span><span class="PUNC">(</span><span class="NAME">this._centerPoint</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="STRN">"center"</span><span class="PUNC">!==</span><span class="NAME">i.options.touchZoom</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">this._pinchStartLatLng</span><span class="PUNC">=</span><span class="NAME">i.containerPointToLatLng</span><span class="PUNC">(</span><span class="NAME">n.add</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">_divideBy</span><span class="PUNC">(</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._startDist</span><span class="PUNC">=</span><span class="NAME">n.distanceTo</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._startZoom</span><span class="PUNC">=</span><span class="NAME">i.getZoom</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._moved</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">this._zooming</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">i._stop</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.DomEvent.on</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="STRN">"touchmove"</span><span class="PUNC">,</span><span class="NAME">this._onTouchMove</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">on</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="STRN">"touchend"</span><span class="PUNC">,</span><span class="NAME">this._onTouchEnd</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.DomEvent.preventDefault</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_onTouchMove</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">t.touches</span><span class="PUNC">&&</span><span class="NUMB">2</span><span class="PUNC">===</span><span class="NAME">t.touches.length</span><span class="PUNC">&&</span><span class="NAME">this._zooming</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this._map</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">e.mouseEventToContainerPoint</span><span class="PUNC">(</span><span class="NAME">t.touches</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">e.mouseEventToContainerPoint</span><span class="PUNC">(</span><span class="NAME">t.touches</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">i.distanceTo</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NAME">this._startDist</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this._zoom</span><span class="PUNC">=</span><span class="NAME">e.getScaleZoom</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">this._startZoom</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NAME">e.options.bounceAtZoomLimits</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">this._zoom</span><span class="PUNC">&lt;</span><span class="NAME">e.getMinZoom</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="NUMB">1</span><span class="PUNC">></span><span class="NAME">s</span><span class="PUNC">||</span><span class="NAME">this._zoom</span><span class="PUNC">></span><span class="NAME">e.getMaxZoom</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="NAME">s</span><span class="PUNC">></span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">this._zoom</span><span class="PUNC">=</span><span class="NAME">e._limitZoom</span><span class="PUNC">(</span><span class="NAME">this._zoom</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="STRN">"center"</span><span class="PUNC">===</span><span class="NAME">e.options.touchZoom</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this._center</span><span class="PUNC">=</span><span class="NAME">this._startLatLng</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">===</span><span class="NAME">s</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">i._add</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">_divideBy</span><span class="PUNC">(</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">_subtract</span><span class="PUNC">(</span><span class="NAME">this._centerPoint</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">===</span><span class="NAME">s</span><span class="PUNC">&&</span><span class="NUMB">0</span><span class="PUNC">===</span><span class="NAME">r.x</span><span class="PUNC">&&</span><span class="NUMB">0</span><span class="PUNC">===</span><span class="NAME">r.y</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="PUNC">;</span><span class="NAME">this._center</span><span class="PUNC">=</span><span class="NAME">e.unproject</span><span class="PUNC">(</span><span class="NAME">e.project</span><span class="PUNC">(</span><span class="NAME">this._pinchStartLatLng</span><span class="PUNC">,</span><span class="NAME">this._zoom</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">subtract</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._zoom</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">this._moved</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">e._moveStart</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._moved</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Util.cancelAnimFrame</span><span class="PUNC">(</span><span class="NAME">this._animRequest</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">o.bind</span><span class="PUNC">(</span><span class="NAME">e._move</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">this._center</span><span class="PUNC">,</span><span class="NAME">this._zoom</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">pinch</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">round</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this._animRequest</span><span class="PUNC">=</span><span class="NAME">o.Util.requestAnimFrame</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.DomEvent.preventDefault</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_onTouchEnd</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._moved</span><span class="PUNC">&&</span><span class="NAME">this._zooming</span><span class="PUNC">?</span><span class="PUNC">(</span><span class="NAME">this._zooming</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">o.Util.cancelAnimFrame</span><span class="PUNC">(</span><span class="NAME">this._animRequest</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.DomEvent.off</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="STRN">"touchmove"</span><span class="PUNC">,</span><span class="NAME">this._onTouchMove</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">off</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="STRN">"touchend"</span><span class="PUNC">,</span><span class="NAME">this._onTouchEnd</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">void</span><span class="PUNC">(</span><span class="NAME">this._map.options.zoomAnimation</span><span class="PUNC">?</span><span class="NAME">this._map._animateZoom</span><span class="PUNC">(</span><span class="NAME">this._center</span><span class="PUNC">,</span><span class="NAME">this._map._limitZoom</span><span class="PUNC">(</span><span class="NAME">this._zoom</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">this._map.options.snapZoom</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">this._map._resetView</span><span class="PUNC">(</span><span class="NAME">this._center</span><span class="PUNC">,</span><span class="NAME">this._map._limitZoom</span><span class="PUNC">(</span><span class="NAME">this._zoom</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="KEYW">void</span><span class="PUNC">(</span><span class="NAME">this._zooming</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Map.addInitHook</span><span class="PUNC">(</span><span class="STRN">"addHandler"</span><span class="PUNC">,</span><span class="STRN">"touchZoom"</span><span class="PUNC">,</span><span class="NAME">o.Map.TouchZoom</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Map.mergeOptions</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">tap</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">tapTolerance</span><span class="PUNC">:</span><span class="NUMB">15</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Map.Tap</span><span class="PUNC">=</span><span class="NAME">o.Handler.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">addHooks</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.DomEvent.on</span><span class="PUNC">(</span><span class="NAME">this._map._container</span><span class="PUNC">,</span><span class="STRN">"touchstart"</span><span class="PUNC">,</span><span class="NAME">this._onDown</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">removeHooks</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.DomEvent.off</span><span class="PUNC">(</span><span class="NAME">this._map._container</span><span class="PUNC">,</span><span class="STRN">"touchstart"</span><span class="PUNC">,</span><span class="NAME">this._onDown</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_onDown</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">t.touches</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">o.DomEvent.preventDefault</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._fireClick</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">t.touches.length</span><span class="PUNC">></span><span class="NUMB">1</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._fireClick</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="KEYW">void</span><span class="WHIT"> </span><span class="NAME">clearTimeout</span><span class="PUNC">(</span><span class="NAME">this._holdTimeout</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">t.touches</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">i.target</span><span class="PUNC">;</span><span class="NAME">this._startPos</span><span class="PUNC">=</span><span class="NAME">this._newPos</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Point</span><span class="PUNC">(</span><span class="NAME">i.clientX</span><span class="PUNC">,</span><span class="NAME">i.clientY</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n.tagName</span><span class="PUNC">&&</span><span class="STRN">"a"</span><span class="PUNC">===</span><span class="NAME">n.tagName.toLowerCase</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="NAME">o.DomUtil.addClass</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">,</span><span class="STRN">"leaflet-active"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._holdTimeout</span><span class="PUNC">=</span><span class="NAME">setTimeout</span><span class="PUNC">(</span><span class="NAME">o.bind</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._isTapValid</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">this._fireClick</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">this._onUp</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._simulateEvent</span><span class="PUNC">(</span><span class="STRN">"contextmenu"</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="NAME">e3</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._simulateEvent</span><span class="PUNC">(</span><span class="STRN">"mousedown"</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.DomEvent.on</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">touchmove</span><span class="PUNC">:</span><span class="NAME">this._onMove</span><span class="PUNC">,</span><span class="NAME">touchend</span><span class="PUNC">:</span><span class="NAME">this._onUp</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_onUp</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">clearTimeout</span><span class="PUNC">(</span><span class="NAME">this._holdTimeout</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.DomEvent.off</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">touchmove</span><span class="PUNC">:</span><span class="NAME">this._onMove</span><span class="PUNC">,</span><span class="NAME">touchend</span><span class="PUNC">:</span><span class="NAME">this._onUp</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._fireClick</span><span class="PUNC">&&</span><span class="NAME">t</span><span class="PUNC">&&</span><span class="NAME">t.changedTouches</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">t.changedTouches</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">i.target</span><span class="PUNC">;</span><span class="NAME">n</span><span class="PUNC">&&</span><span class="NAME">n.tagName</span><span class="PUNC">&&</span><span class="STRN">"a"</span><span class="PUNC">===</span><span class="NAME">n.tagName.toLowerCase</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="NAME">o.DomUtil.removeClass</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">,</span><span class="STRN">"leaflet-active"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._simulateEvent</span><span class="PUNC">(</span><span class="STRN">"mouseup"</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._isTapValid</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="NAME">this._simulateEvent</span><span class="PUNC">(</span><span class="STRN">"click"</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_isTapValid</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._newPos.distanceTo</span><span class="PUNC">(</span><span class="NAME">this._startPos</span><span class="PUNC">)</span><span class="PUNC">&lt;=</span><span class="NAME">this._map.options.tapTolerance</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_onMove</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">t.touches</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">this._newPos</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Point</span><span class="PUNC">(</span><span class="NAME">e.clientX</span><span class="PUNC">,</span><span class="NAME">e.clientY</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._simulateEvent</span><span class="PUNC">(</span><span class="STRN">"mousemove"</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_simulateEvent</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">o</span><span class="PUNC">=</span><span class="NAME">e.createEvent</span><span class="PUNC">(</span><span class="STRN">"MouseEvents"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">o._simulated</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">n.target._simulatedClick</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">o.initMouseEvent</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">n.screenX</span><span class="PUNC">,</span><span class="NAME">n.screenY</span><span class="PUNC">,</span><span class="NAME">n.clientX</span><span class="PUNC">,</span><span class="NAME">n.clientY</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n.target.dispatchEvent</span><span class="PUNC">(</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Browser.touch</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">o.Browser.pointer</span><span class="PUNC">&&</span><span class="NAME">o.Map.addInitHook</span><span class="PUNC">(</span><span class="STRN">"addHandler"</span><span class="PUNC">,</span><span class="STRN">"tap"</span><span class="PUNC">,</span><span class="NAME">o.Map.Tap</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Map.mergeOptions</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">boxZoom</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Map.BoxZoom</span><span class="PUNC">=</span><span class="NAME">o.Handler.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">initialize</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._map</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">this._container</span><span class="PUNC">=</span><span class="NAME">t._container</span><span class="PUNC">,</span><span class="NAME">this._pane</span><span class="PUNC">=</span><span class="NAME">t._panes.overlayPane</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">addHooks</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.DomEvent.on</span><span class="PUNC">(</span><span class="NAME">this._container</span><span class="PUNC">,</span><span class="STRN">"mousedown"</span><span class="PUNC">,</span><span class="NAME">this._onMouseDown</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">removeHooks</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.DomEvent.off</span><span class="PUNC">(</span><span class="NAME">this._container</span><span class="PUNC">,</span><span class="STRN">"mousedown"</span><span class="PUNC">,</span><span class="NAME">this._onMouseDown</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">moved</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._moved</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_resetState</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._moved</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_onMouseDown</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">!</span><span class="NAME">t.shiftKey</span><span class="PUNC">||</span><span class="NUMB">1</span><span class="PUNC">!==</span><span class="NAME">t.which</span><span class="PUNC">&&</span><span class="NUMB">1</span><span class="PUNC">!==</span><span class="NAME">t.button</span><span class="PUNC">?</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">:</span><span class="PUNC">(</span><span class="NAME">this._resetState</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.DomUtil.disableTextSelection</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.DomUtil.disableImageDrag</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._startPoint</span><span class="PUNC">=</span><span class="NAME">this._map.mouseEventToContainerPoint</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">void</span><span class="WHIT"> </span><span class="NAME">o.DomEvent.on</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">contextmenu</span><span class="PUNC">:</span><span class="NAME">o.DomEvent.stop</span><span class="PUNC">,</span><span class="NAME">mousemove</span><span class="PUNC">:</span><span class="NAME">this._onMouseMove</span><span class="PUNC">,</span><span class="NAME">mouseup</span><span class="PUNC">:</span><span class="NAME">this._onMouseUp</span><span class="PUNC">,</span><span class="NAME">keydown</span><span class="PUNC">:</span><span class="NAME">this._onKeyDown</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_onMouseMove</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._moved</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">this._moved</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">this._box</span><span class="PUNC">=</span><span class="NAME">o.DomUtil.create</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">,</span><span class="STRN">"leaflet-zoom-box"</span><span class="PUNC">,</span><span class="NAME">this._container</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.DomUtil.addClass</span><span class="PUNC">(</span><span class="NAME">this._container</span><span class="PUNC">,</span><span class="STRN">"leaflet-crosshair"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._map.fire</span><span class="PUNC">(</span><span class="STRN">"boxzoomstart"</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._point</span><span class="PUNC">=</span><span class="NAME">this._map.mouseEventToContainerPoint</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Bounds</span><span class="PUNC">(</span><span class="NAME">this._point</span><span class="PUNC">,</span><span class="NAME">this._startPoint</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">e.getSize</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">o.DomUtil.setPosition</span><span class="PUNC">(</span><span class="NAME">this._box</span><span class="PUNC">,</span><span class="NAME">e.min</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._box.style.width</span><span class="PUNC">=</span><span class="NAME">i.x</span><span class="PUNC">+</span><span class="STRN">"px"</span><span class="PUNC">,</span><span class="NAME">this._box.style.height</span><span class="PUNC">=</span><span class="NAME">i.y</span><span class="PUNC">+</span><span class="STRN">"px"</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_finish</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._moved</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">o.DomUtil.remove</span><span class="PUNC">(</span><span class="NAME">this._box</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.DomUtil.removeClass</span><span class="PUNC">(</span><span class="NAME">this._container</span><span class="PUNC">,</span><span class="STRN">"leaflet-crosshair"</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.DomUtil.enableTextSelection</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.DomUtil.enableImageDrag</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.DomEvent.off</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">contextmenu</span><span class="PUNC">:</span><span class="NAME">o.DomEvent.stop</span><span class="PUNC">,</span><span class="NAME">mousemove</span><span class="PUNC">:</span><span class="NAME">this._onMouseMove</span><span class="PUNC">,</span><span class="NAME">mouseup</span><span class="PUNC">:</span><span class="NAME">this._onMouseUp</span><span class="PUNC">,</span><span class="NAME">keydown</span><span class="PUNC">:</span><span class="NAME">this._onKeyDown</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_onMouseUp</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">===</span><span class="NAME">t.which</span><span class="PUNC">||</span><span class="NUMB">1</span><span class="PUNC">===</span><span class="NAME">t.button</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">this._finish</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._moved</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">setTimeout</span><span class="PUNC">(</span><span class="NAME">o.bind</span><span class="PUNC">(</span><span class="NAME">this._resetState</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.LatLngBounds</span><span class="PUNC">(</span><span class="NAME">this._map.containerPointToLatLng</span><span class="PUNC">(</span><span class="NAME">this._startPoint</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._map.containerPointToLatLng</span><span class="PUNC">(</span><span class="NAME">this._point</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this._map.fitBounds</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">fire</span><span class="PUNC">(</span><span class="STRN">"boxzoomend"</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">boxZoomBounds</span><span class="PUNC">:</span><span class="NAME">e</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_onKeyDown</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NUMB">27</span><span class="PUNC">===</span><span class="NAME">t.keyCode</span><span class="PUNC">&&</span><span class="NAME">this._finish</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Map.addInitHook</span><span class="PUNC">(</span><span class="STRN">"addHandler"</span><span class="PUNC">,</span><span class="STRN">"boxZoom"</span><span class="PUNC">,</span><span class="NAME">o.Map.BoxZoom</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Map.mergeOptions</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">keyboard</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">keyboardPanDelta</span><span class="PUNC">:</span><span class="NUMB">80</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Map.Keyboard</span><span class="PUNC">=</span><span class="NAME">o.Handler.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">keyCodes</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="NAME">left</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="NUMB">37</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">right</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="NUMB">39</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">down</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="NUMB">40</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">up</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="NUMB">38</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">zoomIn</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="NUMB">187</span><span class="PUNC">,</span><span class="NUMB">107</span><span class="PUNC">,</span><span class="NUMB">61</span><span class="PUNC">,</span><span class="NUMB">171</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">zoomOut</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="NUMB">189</span><span class="PUNC">,</span><span class="NUMB">109</span><span class="PUNC">,</span><span class="NUMB">54</span><span class="PUNC">,</span><span class="NUMB">173</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">initialize</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._map</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">this._setPanDelta</span><span class="PUNC">(</span><span class="NAME">t.options.keyboardPanDelta</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._setZoomDelta</span><span class="PUNC">(</span><span class="NAME">t.options.zoomDelta</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">addHooks</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">this._map._container</span><span class="PUNC">;</span><span class="NAME">t.tabIndex</span><span class="PUNC">&lt;=</span><span class="NUMB">0</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">t.tabIndex</span><span class="PUNC">=</span><span class="STRN">"0"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.DomEvent.on</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">focus</span><span class="PUNC">:</span><span class="NAME">this._onFocus</span><span class="PUNC">,</span><span class="NAME">blur</span><span class="PUNC">:</span><span class="NAME">this._onBlur</span><span class="PUNC">,</span><span class="NAME">mousedown</span><span class="PUNC">:</span><span class="NAME">this._onMouseDown</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._map.on</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">focus</span><span class="PUNC">:</span><span class="NAME">this._addHooks</span><span class="PUNC">,</span><span class="NAME">blur</span><span class="PUNC">:</span><span class="NAME">this._removeHooks</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">removeHooks</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._removeHooks</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.DomEvent.off</span><span class="PUNC">(</span><span class="NAME">this._map._container</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">focus</span><span class="PUNC">:</span><span class="NAME">this._onFocus</span><span class="PUNC">,</span><span class="NAME">blur</span><span class="PUNC">:</span><span class="NAME">this._onBlur</span><span class="PUNC">,</span><span class="NAME">mousedown</span><span class="PUNC">:</span><span class="NAME">this._onMouseDown</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._map.off</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">focus</span><span class="PUNC">:</span><span class="NAME">this._addHooks</span><span class="PUNC">,</span><span class="NAME">blur</span><span class="PUNC">:</span><span class="NAME">this._removeHooks</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_onMouseDown</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this._focused</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">e.body</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">e.documentElement</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">=</span><span class="NAME">i.scrollTop</span><span class="PUNC">||</span><span class="NAME">n.scrollTop</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">i.scrollLeft</span><span class="PUNC">||</span><span class="NAME">n.scrollLeft</span><span class="PUNC">;</span><span class="NAME">this._map._container.focus</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t.scrollTo</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_onFocus</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._focused</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">this._map.fire</span><span class="PUNC">(</span><span class="STRN">"focus"</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_onBlur</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._focused</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">this._map.fire</span><span class="PUNC">(</span><span class="STRN">"blur"</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_setPanDelta</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">this._panKeys</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">=</span><span class="NAME">this.keyCodes</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">o.left.length</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">></span><span class="NAME">e</span><span class="PUNC">;</span><span class="NAME">e</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="NAME">n</span><span class="PUNC">[</span><span class="NAME">o.left</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">*</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">o.right.length</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">></span><span class="NAME">e</span><span class="PUNC">;</span><span class="NAME">e</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="NAME">n</span><span class="PUNC">[</span><span class="NAME">o.right</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">o.down.length</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">></span><span class="NAME">e</span><span class="PUNC">;</span><span class="NAME">e</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="NAME">n</span><span class="PUNC">[</span><span class="NAME">o.down</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">o.up.length</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">></span><span class="NAME">e</span><span class="PUNC">;</span><span class="NAME">e</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="NAME">n</span><span class="PUNC">[</span><span class="NAME">o.up</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">*</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_setZoomDelta</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">this._zoomKeys</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">=</span><span class="NAME">this.keyCodes</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">o.zoomIn.length</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">></span><span class="NAME">e</span><span class="PUNC">;</span><span class="NAME">e</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="NAME">n</span><span class="PUNC">[</span><span class="NAME">o.zoomIn</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">o.zoomOut.length</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">></span><span class="NAME">e</span><span class="PUNC">;</span><span class="NAME">e</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="NAME">n</span><span class="PUNC">[</span><span class="NAME">o.zoomOut</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="PUNC">-</span><span class="NAME">t</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_addHooks</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.DomEvent.on</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="STRN">"keydown"</span><span class="PUNC">,</span><span class="NAME">this._onKeyDown</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_removeHooks</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.DomEvent.off</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="STRN">"keydown"</span><span class="PUNC">,</span><span class="NAME">this._onKeyDown</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_onKeyDown</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="PUNC">(</span><span class="NAME">t.altKey</span><span class="PUNC">||</span><span class="NAME">t.ctrlKey</span><span class="PUNC">||</span><span class="NAME">t.metaKey</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">t.keyCode</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">this._map</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">i</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">this._panKeys</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">n._panAnim</span><span class="PUNC">&&</span><span class="NAME">n._panAnim._inProgress</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="PUNC">;</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this._panKeys</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">t.shiftKey</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">o.point</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">multiplyBy</span><span class="PUNC">(</span><span class="NUMB">3</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n.panBy</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n.options.maxBounds</span><span class="PUNC">&&</span><span class="NAME">n.panInsideBounds</span><span class="PUNC">(</span><span class="NAME">n.options.maxBounds</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">i</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">this._zoomKeys</span><span class="PUNC">)</span><span class="NAME">n.setZoom</span><span class="PUNC">(</span><span class="NAME">n.getZoom</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">t.shiftKey</span><span class="PUNC">?</span><span class="NUMB">3</span><span class="PUNC">:</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NAME">this._zoomKeys</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NUMB">27</span><span class="PUNC">!==</span><span class="NAME">i</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="PUNC">;</span><span class="NAME">n.closePopup</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">o.DomEvent.stop</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Map.addInitHook</span><span class="PUNC">(</span><span class="STRN">"addHandler"</span><span class="PUNC">,</span><span class="STRN">"keyboard"</span><span class="PUNC">,</span><span class="NAME">o.Map.Keyboard</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Handler.MarkerDrag</span><span class="PUNC">=</span><span class="NAME">o.Handler.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">initialize</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._marker</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">addHooks</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">this._marker._icon</span><span class="PUNC">;</span><span class="NAME">this._draggable</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">this._draggable</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Draggable</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._draggable.on</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">dragstart</span><span class="PUNC">:</span><span class="NAME">this._onDragStart</span><span class="PUNC">,</span><span class="NAME">drag</span><span class="PUNC">:</span><span class="NAME">this._onDrag</span><span class="PUNC">,</span><span class="NAME">dragend</span><span class="PUNC">:</span><span class="NAME">this._onDragEnd</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">enable</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.DomUtil.addClass</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="STRN">"leaflet-marker-draggable"</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">removeHooks</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._draggable.off</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">dragstart</span><span class="PUNC">:</span><span class="NAME">this._onDragStart</span><span class="PUNC">,</span><span class="NAME">drag</span><span class="PUNC">:</span><span class="NAME">this._onDrag</span><span class="PUNC">,</span><span class="NAME">dragend</span><span class="PUNC">:</span><span class="NAME">this._onDragEnd</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">disable</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._marker._icon</span><span class="PUNC">&&</span><span class="NAME">o.DomUtil.removeClass</span><span class="PUNC">(</span><span class="NAME">this._marker._icon</span><span class="PUNC">,</span><span class="STRN">"leaflet-marker-draggable"</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">moved</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._draggable</span><span class="PUNC">&&</span><span class="NAME">this._draggable._moved</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_onDragStart</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._marker.closePopup</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">fire</span><span class="PUNC">(</span><span class="STRN">"movestart"</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">fire</span><span class="PUNC">(</span><span class="STRN">"dragstart"</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_onDrag</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this._marker</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">e._shadow</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">o.DomUtil.getPosition</span><span class="PUNC">(</span><span class="NAME">e._icon</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">e._map.layerPointToLatLng</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">&&</span><span class="NAME">o.DomUtil.setPosition</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e._latlng</span><span class="PUNC">=</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">t.latlng</span><span class="PUNC">=</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">e.fire</span><span class="PUNC">(</span><span class="STRN">"move"</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">fire</span><span class="PUNC">(</span><span class="STRN">"drag"</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_onDragEnd</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._marker.fire</span><span class="PUNC">(</span><span class="STRN">"moveend"</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">fire</span><span class="PUNC">(</span><span class="STRN">"dragend"</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Control</span><span class="PUNC">=</span><span class="NAME">o.Class.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">options</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="NAME">position</span><span class="PUNC">:</span><span class="STRN">"topright"</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">initialize</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.setOptions</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getPosition</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.options.position</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">setPosition</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this._map</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">&&</span><span class="NAME">e.removeControl</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.options.position</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">&&</span><span class="NAME">e.addControl</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getContainer</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._container</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">addTo</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.remove</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._map</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this._container</span><span class="PUNC">=</span><span class="NAME">this.onAdd</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this.getPosition</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">t._controlCorners</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">o.DomUtil.addClass</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="STRN">"leaflet-control"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">!==</span><span class="NAME">i.indexOf</span><span class="PUNC">(</span><span class="STRN">"bottom"</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="NAME">n.insertBefore</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">n.firstChild</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">n.appendChild</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">remove</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._map</span><span class="PUNC">?</span><span class="PUNC">(</span><span class="NAME">o.DomUtil.remove</span><span class="PUNC">(</span><span class="NAME">this._container</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.onRemove</span><span class="PUNC">&&</span><span class="NAME">this.onRemove</span><span class="PUNC">(</span><span class="NAME">this._map</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._map</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_refocusOnMap</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._map</span><span class="PUNC">&&</span><span class="NAME">t</span><span class="PUNC">&&</span><span class="NAME">t.screenX</span><span class="PUNC">></span><span class="NUMB">0</span><span class="PUNC">&&</span><span class="NAME">t.screenY</span><span class="PUNC">></span><span class="NUMB">0</span><span class="PUNC">&&</span><span class="NAME">this._map.getContainer</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">focus</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.control</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Control</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.Map.include</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">addControl</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t.addTo</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">removeControl</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t.remove</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_initControlPos</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">function</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">i</span><span class="PUNC">+</span><span class="NAME">t</span><span class="PUNC">+</span><span class="STRN">" "</span><span class="PUNC">+</span><span class="NAME">i</span><span class="PUNC">+</span><span class="NAME">s</span><span class="PUNC">;</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">+</span><span class="NAME">s</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">o.DomUtil.create</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this._controlCorners</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="STRN">"leaflet-"</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">this._controlContainer</span><span class="PUNC">=</span><span class="NAME">o.DomUtil.create</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">+</span><span class="STRN">"control-container"</span><span class="PUNC">,</span><span class="NAME">this._container</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">t</span><span class="PUNC">(</span><span class="STRN">"top"</span><span class="PUNC">,</span><span class="STRN">"left"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">(</span><span class="STRN">"top"</span><span class="PUNC">,</span><span class="STRN">"right"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">(</span><span class="STRN">"bottom"</span><span class="PUNC">,</span><span class="STRN">"left"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">(</span><span class="STRN">"bottom"</span><span class="PUNC">,</span><span class="STRN">"right"</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_clearControlPos</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.DomUtil.remove</span><span class="PUNC">(</span><span class="NAME">this._controlContainer</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Control.Zoom</span><span class="PUNC">=</span><span class="NAME">o.Control.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">options</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="NAME">position</span><span class="PUNC">:</span><span class="STRN">"topleft"</span><span class="PUNC">,</span><span class="NAME">zoomInText</span><span class="PUNC">:</span><span class="STRN">"+"</span><span class="PUNC">,</span><span class="NAME">zoomInTitle</span><span class="PUNC">:</span><span class="STRN">"Zoom in"</span><span class="PUNC">,</span><span class="NAME">zoomOutText</span><span class="PUNC">:</span><span class="STRN">"-"</span><span class="PUNC">,</span><span class="NAME">zoomOutTitle</span><span class="PUNC">:</span><span class="STRN">"Zoom out"</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">onAdd</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="STRN">"leaflet-control-zoom"</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">o.DomUtil.create</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">+</span><span class="STRN">" leaflet-bar"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">this.options</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._zoomInButton</span><span class="PUNC">=</span><span class="NAME">this._createButton</span><span class="PUNC">(</span><span class="NAME">n.zoomInText</span><span class="PUNC">,</span><span class="NAME">n.zoomInTitle</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">+</span><span class="STRN">"-in"</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">this._zoomIn</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._zoomOutButton</span><span class="PUNC">=</span><span class="NAME">this._createButton</span><span class="PUNC">(</span><span class="NAME">n.zoomOutText</span><span class="PUNC">,</span><span class="NAME">n.zoomOutTitle</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">+</span><span class="STRN">"-out"</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">this._zoomOut</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._updateDisabled</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t.on</span><span class="PUNC">(</span><span class="STRN">"zoomend zoomlevelschange"</span><span class="PUNC">,</span><span class="NAME">this._updateDisabled</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">onRemove</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">t.off</span><span class="PUNC">(</span><span class="STRN">"zoomend zoomlevelschange"</span><span class="PUNC">,</span><span class="NAME">this._updateDisabled</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">disable</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._disabled</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">this._updateDisabled</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">enable</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._disabled</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">this._updateDisabled</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_zoomIn</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._disabled</span><span class="PUNC">||</span><span class="NAME">this._map.zoomIn</span><span class="PUNC">(</span><span class="NAME">this._map.options.zoomDelta</span><span class="PUNC">*</span><span class="PUNC">(</span><span class="NAME">t.shiftKey</span><span class="PUNC">?</span><span class="NUMB">3</span><span class="PUNC">:</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_zoomOut</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._disabled</span><span class="PUNC">||</span><span class="NAME">this._map.zoomOut</span><span class="PUNC">(</span><span class="NAME">this._map.options.zoomDelta</span><span class="PUNC">*</span><span class="PUNC">(</span><span class="NAME">t.shiftKey</span><span class="PUNC">?</span><span class="NUMB">3</span><span class="PUNC">:</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_createButton</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">o.DomUtil.create</span><span class="PUNC">(</span><span class="STRN">"a"</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">r.innerHTML</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">r.href</span><span class="PUNC">=</span><span class="STRN">"#"</span><span class="PUNC">,</span><span class="NAME">r.title</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">o.DomEvent.on</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">,</span><span class="STRN">"mousedown dblclick"</span><span class="PUNC">,</span><span class="NAME">o.DomEvent.stopPropagation</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">on</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">,</span><span class="STRN">"click"</span><span class="PUNC">,</span><span class="NAME">o.DomEvent.stop</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">on</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">,</span><span class="STRN">"click"</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">on</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">,</span><span class="STRN">"click"</span><span class="PUNC">,</span><span class="NAME">this._refocusOnMap</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_updateDisabled</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">this._map</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="STRN">"leaflet-disabled"</span><span class="PUNC">;</span><span class="NAME">o.DomUtil.removeClass</span><span class="PUNC">(</span><span class="NAME">this._zoomInButton</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.DomUtil.removeClass</span><span class="PUNC">(</span><span class="NAME">this._zoomOutButton</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="PUNC">(</span><span class="NAME">this._disabled</span><span class="PUNC">||</span><span class="NAME">t._zoom</span><span class="PUNC">===</span><span class="NAME">t.getMinZoom</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="NAME">o.DomUtil.addClass</span><span class="PUNC">(</span><span class="NAME">this._zoomOutButton</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="PUNC">(</span><span class="NAME">this._disabled</span><span class="PUNC">||</span><span class="NAME">t._zoom</span><span class="PUNC">===</span><span class="NAME">t.getMaxZoom</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="NAME">o.DomUtil.addClass</span><span class="PUNC">(</span><span class="NAME">this._zoomInButton</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Map.mergeOptions</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">zoomControl</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Map.addInitHook</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.options.zoomControl</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">this.zoomControl</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Control.Zoom</span><span class="PUNC">,</span><span class="NAME">this.addControl</span><span class="PUNC">(</span><span class="NAME">this.zoomControl</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.control.zoom</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Control.Zoom</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.Control.Attribution</span><span class="PUNC">=</span><span class="NAME">o.Control.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">options</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="NAME">position</span><span class="PUNC">:</span><span class="STRN">"bottomright"</span><span class="PUNC">,</span><span class="NAME">prefix</span><span class="PUNC">:</span><span class="STRN">'&lt;a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet&lt;/a>'</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">initialize</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.setOptions</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._attributions</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">onAdd</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">t.attributionControl</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">this._container</span><span class="PUNC">=</span><span class="NAME">o.DomUtil.create</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">,</span><span class="STRN">"leaflet-control-attribution"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.DomEvent</span><span class="PUNC">&&</span><span class="NAME">o.DomEvent.disableClickPropagation</span><span class="PUNC">(</span><span class="NAME">this._container</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">t._layers</span><span class="PUNC">)</span><span class="NAME">t._layers</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">getAttribution</span><span class="PUNC">&&</span><span class="NAME">this.addAttribution</span><span class="PUNC">(</span><span class="NAME">t._layers</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">getAttribution</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._update</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._container</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">setPrefix</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.options.prefix</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">this._update</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">addAttribution</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">?</span><span class="PUNC">(</span><span class="NAME">this._attributions</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">this._attributions</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._attributions</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">++</span><span class="PUNC">,</span><span class="NAME">this._update</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">removeAttribution</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">?</span><span class="PUNC">(</span><span class="NAME">this._attributions</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">this._attributions</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">--</span><span class="PUNC">,</span><span class="NAME">this._update</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_update</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this._map</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">this._attributions</span><span class="PUNC">)</span><span class="NAME">this._attributions</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">&&</span><span class="NAME">t.push</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">this.options.prefix</span><span class="PUNC">&&</span><span class="NAME">i.push</span><span class="PUNC">(</span><span class="NAME">this.options.prefix</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t.length</span><span class="PUNC">&&</span><span class="NAME">i.push</span><span class="PUNC">(</span><span class="NAME">t.join</span><span class="PUNC">(</span><span class="STRN">", "</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._container.innerHTML</span><span class="PUNC">=</span><span class="NAME">i.join</span><span class="PUNC">(</span><span class="STRN">" | "</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Map.mergeOptions</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">attributionControl</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Map.addInitHook</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.options.attributionControl</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Control.Attribution</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">addTo</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.control.attribution</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Control.Attribution</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.Control.Scale</span><span class="PUNC">=</span><span class="NAME">o.Control.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">options</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="NAME">position</span><span class="PUNC">:</span><span class="STRN">"bottomleft"</span><span class="PUNC">,</span><span class="NAME">maxWidth</span><span class="PUNC">:</span><span class="NUMB">100</span><span class="PUNC">,</span><span class="NAME">metric</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">imperial</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">onAdd</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="STRN">"leaflet-control-scale"</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">o.DomUtil.create</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">this.options</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._addScales</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">+</span><span class="STRN">"-line"</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t.on</span><span class="PUNC">(</span><span class="NAME">n.updateWhenIdle</span><span class="PUNC">?</span><span class="STRN">"moveend"</span><span class="PUNC">:</span><span class="STRN">"move"</span><span class="PUNC">,</span><span class="NAME">this._update</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t.whenReady</span><span class="PUNC">(</span><span class="NAME">this._update</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">onRemove</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">t.off</span><span class="PUNC">(</span><span class="NAME">this.options.updateWhenIdle</span><span class="PUNC">?</span><span class="STRN">"moveend"</span><span class="PUNC">:</span><span class="STRN">"move"</span><span class="PUNC">,</span><span class="NAME">this._update</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_addScales</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">t.metric</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">this._mScale</span><span class="PUNC">=</span><span class="NAME">o.DomUtil.create</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t.imperial</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">this._iScale</span><span class="PUNC">=</span><span class="NAME">o.DomUtil.create</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_update</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">this._map</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">t.getSize</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">y</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">t.distance</span><span class="PUNC">(</span><span class="NAME">t.containerPointToLatLng</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t.containerPointToLatLng</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="NAME">this.options.maxWidth</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this._updateScales</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_updateScales</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.options.metric</span><span class="PUNC">&&</span><span class="NAME">t</span><span class="PUNC">&&</span><span class="NAME">this._updateMetric</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.options.imperial</span><span class="PUNC">&&</span><span class="NAME">t</span><span class="PUNC">&&</span><span class="NAME">this._updateImperial</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_updateMetric</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this._getRoundNum</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NUMB">1</span><span class="NAME">e3</span><span class="PUNC">></span><span class="NAME">e</span><span class="PUNC">?</span><span class="NAME">e</span><span class="PUNC">+</span><span class="STRN">" m"</span><span class="PUNC">:</span><span class="NAME">e</span><span class="PUNC">/</span><span class="NUMB">1</span><span class="NAME">e3</span><span class="PUNC">+</span><span class="STRN">" km"</span><span class="PUNC">;</span><span class="NAME">this._updateScale</span><span class="PUNC">(</span><span class="NAME">this._mScale</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">/</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_updateImperial</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">=</span><span class="NUMB">3.2808399</span><span class="PUNC">*</span><span class="NAME">t</span><span class="PUNC">;</span><span class="NAME">o</span><span class="PUNC">></span><span class="NUMB">5280</span><span class="PUNC">?</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">o</span><span class="PUNC">/</span><span class="NUMB">5280</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this._getRoundNum</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._updateScale</span><span class="PUNC">(</span><span class="NAME">this._iScale</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">+</span><span class="STRN">" mi"</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">/</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">this._getRoundNum</span><span class="PUNC">(</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._updateScale</span><span class="PUNC">(</span><span class="NAME">this._iScale</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">+</span><span class="STRN">" ft"</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">/</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_updateScale</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">t.style.width</span><span class="PUNC">=</span><span class="NAME">Math.round</span><span class="PUNC">(</span><span class="NAME">this.options.maxWidth</span><span class="PUNC">*</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">"px"</span><span class="PUNC">,</span><span class="NAME">t.innerHTML</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_getRoundNum</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">Math.pow</span><span class="PUNC">(</span><span class="NUMB">10</span><span class="PUNC">,</span><span class="PUNC">(</span><span class="NAME">Math.floor</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">""</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">length</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">/</span><span class="NAME">e</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">i</span><span class="PUNC">>=</span><span class="NUMB">10</span><span class="PUNC">?</span><span class="NUMB">10</span><span class="PUNC">:</span><span class="NAME">i</span><span class="PUNC">>=</span><span class="NUMB">5</span><span class="PUNC">?</span><span class="NUMB">5</span><span class="PUNC">:</span><span class="NAME">i</span><span class="PUNC">>=</span><span class="NUMB">3</span><span class="PUNC">?</span><span class="NUMB">3</span><span class="PUNC">:</span><span class="NAME">i</span><span class="PUNC">>=</span><span class="NUMB">2</span><span class="PUNC">?</span><span class="NUMB">2</span><span class="PUNC">:</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">*</span><span class="NAME">i</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.control.scale</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Control.Scale</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.Control.Layers</span><span class="PUNC">=</span><span class="NAME">o.Control.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">options</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="NAME">collapsed</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">position</span><span class="PUNC">:</span><span class="STRN">"topright"</span><span class="PUNC">,</span><span class="NAME">autoZIndex</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">hideSingleBase</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">initialize</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.setOptions</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._layers</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">this._lastZIndex</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">this._handlingClick</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">)</span><span class="NAME">this._addLayer</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NAME">n</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">n</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">)</span><span class="NAME">this._addLayer</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NAME">n</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">onAdd</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._initLayout</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._update</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._map</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">t.on</span><span class="PUNC">(</span><span class="STRN">"zoomend"</span><span class="PUNC">,</span><span class="NAME">this._checkDisabledLayers</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._container</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">onRemove</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._map.off</span><span class="PUNC">(</span><span class="STRN">"zoomend"</span><span class="PUNC">,</span><span class="NAME">this._checkDisabledLayers</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">this._layers</span><span class="PUNC">)</span><span class="NAME">this._layers</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">layer.off</span><span class="PUNC">(</span><span class="STRN">"add remove"</span><span class="PUNC">,</span><span class="NAME">this._onLayerChange</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">addBaseLayer</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._addLayer</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._map</span><span class="PUNC">?</span><span class="NAME">this._update</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">addOverlay</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._addLayer</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._map</span><span class="PUNC">?</span><span class="NAME">this._update</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">removeLayer</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">t.off</span><span class="PUNC">(</span><span class="STRN">"add remove"</span><span class="PUNC">,</span><span class="NAME">this._onLayerChange</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this._getLayer</span><span class="PUNC">(</span><span class="NAME">o.stamp</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._layers.splice</span><span class="PUNC">(</span><span class="NAME">this._layers.indexOf</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._map</span><span class="PUNC">?</span><span class="NAME">this._update</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">expand</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.DomUtil.addClass</span><span class="PUNC">(</span><span class="NAME">this._container</span><span class="PUNC">,</span><span class="STRN">"leaflet-control-layers-expanded"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._form.style.height</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">this._map.getSize</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">y</span><span class="PUNC">-</span><span class="PUNC">(</span><span class="NAME">this._container.offsetTop</span><span class="PUNC">+</span><span class="NUMB">50</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">&lt;</span><span class="NAME">this._form.clientHeight</span><span class="PUNC">?</span><span class="PUNC">(</span><span class="NAME">o.DomUtil.addClass</span><span class="PUNC">(</span><span class="NAME">this._form</span><span class="PUNC">,</span><span class="STRN">"leaflet-control-layers-scrollbar"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._form.style.height</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">+</span><span class="STRN">"px"</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">o.DomUtil.removeClass</span><span class="PUNC">(</span><span class="NAME">this._form</span><span class="PUNC">,</span><span class="STRN">"leaflet-control-layers-scrollbar"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._checkDisabledLayers</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">collapse</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">o.DomUtil.removeClass</span><span class="PUNC">(</span><span class="NAME">this._container</span><span class="PUNC">,</span><span class="STRN">"leaflet-control-layers-expanded"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_initLayout</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="STRN">"leaflet-control-layers"</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this._container</span><span class="PUNC">=</span><span class="NAME">o.DomUtil.create</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">e.setAttribute</span><span class="PUNC">(</span><span class="STRN">"aria-haspopup"</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.DomEvent.disableClickPropagation</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Browser.touch</span><span class="PUNC">||</span><span class="NAME">o.DomEvent.disableScrollPropagation</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this._form</span><span class="PUNC">=</span><span class="NAME">o.DomUtil.create</span><span class="PUNC">(</span><span class="STRN">"form"</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">+</span><span class="STRN">"-list"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.collapsed</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.Browser.android</span><span class="PUNC">||</span><span class="NAME">o.DomEvent.on</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">mouseenter</span><span class="PUNC">:</span><span class="NAME">this.expand</span><span class="PUNC">,</span><span class="NAME">mouseleave</span><span class="PUNC">:</span><span class="NAME">this.collapse</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">this._layersLink</span><span class="PUNC">=</span><span class="NAME">o.DomUtil.create</span><span class="PUNC">(</span><span class="STRN">"a"</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">+</span><span class="STRN">"-toggle"</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">n.href</span><span class="PUNC">=</span><span class="STRN">"#"</span><span class="PUNC">,</span><span class="NAME">n.title</span><span class="PUNC">=</span><span class="STRN">"Layers"</span><span class="PUNC">,</span><span class="NAME">o.Browser.touch</span><span class="PUNC">?</span><span class="NAME">o.DomEvent.on</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">,</span><span class="STRN">"click"</span><span class="PUNC">,</span><span class="NAME">o.DomEvent.stop</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">on</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">,</span><span class="STRN">"click"</span><span class="PUNC">,</span><span class="NAME">this.expand</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">o.DomEvent.on</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">,</span><span class="STRN">"focus"</span><span class="PUNC">,</span><span class="NAME">this.expand</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.DomEvent.on</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">,</span><span class="STRN">"click"</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">setTimeout</span><span class="PUNC">(</span><span class="NAME">o.bind</span><span class="PUNC">(</span><span class="NAME">this._onInputClick</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._map.on</span><span class="PUNC">(</span><span class="STRN">"click"</span><span class="PUNC">,</span><span class="NAME">this.collapse</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="WHIT"> </span><span class="NAME">this.expand</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this._baseLayersList</span><span class="PUNC">=</span><span class="NAME">o.DomUtil.create</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">+</span><span class="STRN">"-base"</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._separator</span><span class="PUNC">=</span><span class="NAME">o.DomUtil.create</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">+</span><span class="STRN">"-separator"</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._overlaysList</span><span class="PUNC">=</span><span class="NAME">o.DomUtil.create</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">+</span><span class="STRN">"-overlays"</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e.appendChild</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_getLayer</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">e</span><span class="PUNC">&lt;=</span><span class="NAME">this._layers.length</span><span class="PUNC">;</span><span class="NAME">e</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">o.stamp</span><span class="PUNC">(</span><span class="NAME">this._layers</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">layer</span><span class="PUNC">)</span><span class="PUNC">===</span><span class="NAME">t</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._layers</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_addLayer</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">t.on</span><span class="PUNC">(</span><span class="STRN">"add remove"</span><span class="PUNC">,</span><span class="NAME">this._onLayerChange</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._layers.push</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">layer</span><span class="PUNC">:</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">name</span><span class="PUNC">:</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">overlay</span><span class="PUNC">:</span><span class="NAME">i</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.options.autoZIndex</span><span class="PUNC">&&</span><span class="NAME">t.setZIndex</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">this._lastZIndex</span><span class="PUNC">++</span><span class="PUNC">,</span><span class="NAME">t.setZIndex</span><span class="PUNC">(</span><span class="NAME">this._lastZIndex</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_update</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this._container</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">;</span><span class="NAME">o.DomUtil.empty</span><span class="PUNC">(</span><span class="NAME">this._baseLayersList</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.DomUtil.empty</span><span class="PUNC">(</span><span class="NAME">this._overlaysList</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">i</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">this._layers</span><span class="PUNC">)</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">this._layers</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">this._addItem</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">||</span><span class="NAME">n.overlay</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">||</span><span class="PUNC">!</span><span class="NAME">n.overlay</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">+</span><span class="PUNC">=</span><span class="NAME">n.overlay</span><span class="PUNC">?</span><span class="NUMB">0</span><span class="PUNC">:</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.options.hideSingleBase</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">&&</span><span class="NAME">s</span><span class="PUNC">></span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">this._baseLayersList.style.display</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">?</span><span class="STRN">""</span><span class="PUNC">:</span><span class="STRN">"none"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._separator.style.display</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">&&</span><span class="NAME">t</span><span class="PUNC">?</span><span class="STRN">""</span><span class="PUNC">:</span><span class="STRN">"none"</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_onLayerChange</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._handlingClick</span><span class="PUNC">||</span><span class="NAME">this._update</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this._getLayer</span><span class="PUNC">(</span><span class="NAME">o.stamp</span><span class="PUNC">(</span><span class="NAME">t.target</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">e.overlay</span><span class="PUNC">?</span><span class="STRN">"add"</span><span class="PUNC">===</span><span class="NAME">t.type</span><span class="PUNC">?</span><span class="STRN">"overlayadd"</span><span class="PUNC">:</span><span class="STRN">"overlayremove"</span><span class="PUNC">:</span><span class="STRN">"add"</span><span class="PUNC">===</span><span class="NAME">t.type</span><span class="PUNC">?</span><span class="STRN">"baselayerchange"</span><span class="PUNC">:</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">&&</span><span class="NAME">this._map.fire</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_createRadioElement</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="STRN">'&lt;input type="radio" class="leaflet-control-layers-selector" name="'</span><span class="PUNC">+</span><span class="NAME">t</span><span class="PUNC">+</span><span class="STRN">'"'</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">?</span><span class="STRN">' checked="checked"'</span><span class="PUNC">:</span><span class="STRN">""</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">"/>"</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">=</span><span class="NAME">e.createElement</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">o.innerHTML</span><span class="PUNC">=</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">o.firstChild</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_addItem</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">e.createElement</span><span class="PUNC">(</span><span class="STRN">"label"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">this._map.hasLayer</span><span class="PUNC">(</span><span class="NAME">t.layer</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">t.overlay</span><span class="PUNC">?</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">e.createElement</span><span class="PUNC">(</span><span class="STRN">"input"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i.type</span><span class="PUNC">=</span><span class="STRN">"checkbox"</span><span class="PUNC">,</span><span class="NAME">i.className</span><span class="PUNC">=</span><span class="STRN">"leaflet-control-layers-selector"</span><span class="PUNC">,</span><span class="NAME">i.defaultChecked</span><span class="PUNC">=</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this._createRadioElement</span><span class="PUNC">(</span><span class="STRN">"leaflet-base-layers"</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i.layerId</span><span class="PUNC">=</span><span class="NAME">o.stamp</span><span class="PUNC">(</span><span class="NAME">t.layer</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.DomEvent.on</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">,</span><span class="STRN">"click"</span><span class="PUNC">,</span><span class="NAME">this._onInputClick</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">e.createElement</span><span class="PUNC">(</span><span class="STRN">"span"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">r.innerHTML</span><span class="PUNC">=</span><span class="STRN">" "</span><span class="PUNC">+</span><span class="NAME">t.name</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">e.createElement</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">n.appendChild</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">a.appendChild</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">a.appendChild</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">h</span><span class="PUNC">=</span><span class="NAME">t.overlay</span><span class="PUNC">?</span><span class="NAME">this._overlaysList</span><span class="PUNC">:</span><span class="NAME">this._baseLayersList</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">h.appendChild</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._checkDisabledLayers</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_onInputClick</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">this._form.getElementsByTagName</span><span class="PUNC">(</span><span class="STRN">"input"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">this._handlingClick</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">n.length</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">>=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">--</span><span class="PUNC">)</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">n</span><span class="PUNC">[</span><span class="NAME">r</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this._getLayer</span><span class="PUNC">(</span><span class="NAME">t.layerId</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">layer</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this._map.hasLayer</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t.checked</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">i</span><span class="PUNC">?</span><span class="NAME">o.push</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NAME">t.checked</span><span class="PUNC">&&</span><span class="NAME">i</span><span class="PUNC">&&</span><span class="NAME">s.push</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">&lt;</span><span class="NAME">s.length</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="NAME">this._map.removeLayer</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">[</span><span class="NAME">r</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">&lt;</span><span class="NAME">o.length</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="NAME">this._map.addLayer</span><span class="PUNC">(</span><span class="NAME">o</span><span class="PUNC">[</span><span class="NAME">r</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this._handlingClick</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">this._refocusOnMap</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_checkDisabledLayers</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">this._form.getElementsByTagName</span><span class="PUNC">(</span><span class="STRN">"input"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">=</span><span class="NAME">this._map.getZoom</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">n.length</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="NAME">s</span><span class="PUNC">>=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">s</span><span class="PUNC">--</span><span class="PUNC">)</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">n</span><span class="PUNC">[</span><span class="NAME">s</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this._getLayer</span><span class="PUNC">(</span><span class="NAME">t.layerId</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">layer</span><span class="PUNC">,</span><span class="NAME">t.disabled</span><span class="PUNC">=</span><span class="NAME">e.options.minZoom</span><span class="PUNC">!==</span><span class="NAME">i</span><span class="PUNC">&&</span><span class="NAME">o</span><span class="PUNC">&lt;</span><span class="NAME">e.options.minZoom</span><span class="PUNC">||</span><span class="NAME">e.options.maxZoom</span><span class="PUNC">!==</span><span class="NAME">i</span><span class="PUNC">&&</span><span class="NAME">o</span><span class="PUNC">></span><span class="NAME">e.options.maxZoom</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>  9</span> </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_expand</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.expand</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_collapse</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.collapse</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.control.layers</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.Control.Layers</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o.PosAnimation</span><span class="PUNC">=</span><span class="NAME">o.Evented.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">run</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.stop</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._el</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">this._inProgress</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">this._duration</span><span class="PUNC">=</span><span class="NAME">i</span><span class="PUNC">||</span><span class="PUNC">.</span><span class="NUMB">25</span><span class="PUNC">,</span><span class="NAME">this._easeOutPower</span><span class="PUNC">=</span><span class="NUMB">1</span><span class="PUNC">/</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">||</span><span class="PUNC">.</span><span class="NUMB">5</span><span class="PUNC">,</span><span class="PUNC">.</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._startPos</span><span class="PUNC">=</span><span class="NAME">o.DomUtil.getPosition</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._offset</span><span class="PUNC">=</span><span class="NAME">e.subtract</span><span class="PUNC">(</span><span class="NAME">this._startPos</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._startTime</span><span class="PUNC">=</span><span class="PUNC">+</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Date</span><span class="PUNC">,</span><span class="NAME">this.fire</span><span class="PUNC">(</span><span class="STRN">"start"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._animate</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">stop</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._inProgress</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">this._step</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._complete</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_animate</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._animId</span><span class="PUNC">=</span><span class="NAME">o.Util.requestAnimFrame</span><span class="PUNC">(</span><span class="NAME">this._animate</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._step</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_step</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="PUNC">+</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Date</span><span class="PUNC">-</span><span class="NAME">this._startTime</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NUMB">1</span><span class="NAME">e3</span><span class="PUNC">*</span><span class="NAME">this._duration</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">></span><span class="NAME">e</span><span class="PUNC">?</span><span class="NAME">this._runFrame</span><span class="PUNC">(</span><span class="NAME">this._easeOut</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">/</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="PUNC">(</span><span class="NAME">this._runFrame</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._complete</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_runFrame</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this._startPos.add</span><span class="PUNC">(</span><span class="NAME">this._offset.multiplyBy</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">e</span><span class="PUNC">&&</span><span class="NAME">i._round</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.DomUtil.setPosition</span><span class="PUNC">(</span><span class="NAME">this._el</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.fire</span><span class="PUNC">(</span><span class="STRN">"step"</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_complete</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.Util.cancelAnimFrame</span><span class="PUNC">(</span><span class="NAME">this._animId</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._inProgress</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">this.fire</span><span class="PUNC">(</span><span class="STRN">"end"</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_easeOut</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">-</span><span class="NAME">Math.pow</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">-</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">this._easeOutPower</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Map.include</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">setView</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">===</span><span class="NAME">i</span><span class="PUNC">?</span><span class="NAME">this._zoom</span><span class="PUNC">:</span><span class="NAME">this._limitZoom</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">this._limitCenter</span><span class="PUNC">(</span><span class="NAME">o.latLng</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">this.options.maxBounds</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">n</span><span class="PUNC">||</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">this._stop</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._loaded</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">n.reset</span><span class="PUNC">&&</span><span class="NAME">n</span><span class="PUNC">!==</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">n.animate</span><span class="PUNC">!==</span><span class="NAME">i</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">n.zoom</span><span class="PUNC">=</span><span class="NAME">o.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">animate</span><span class="PUNC">:</span><span class="NAME">n.animate</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">n.zoom</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n.pan</span><span class="PUNC">=</span><span class="NAME">o.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">animate</span><span class="PUNC">:</span><span class="NAME">n.animate</span><span class="PUNC">,</span><span class="NAME">duration</span><span class="PUNC">:</span><span class="NAME">n.duration</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">n.pan</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">this._zoom</span><span class="PUNC">!==</span><span class="NAME">e</span><span class="PUNC">?</span><span class="NAME">this._tryAnimatedZoom</span><span class="PUNC">&&</span><span class="NAME">this._tryAnimatedZoom</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">n.zoom</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">this._tryAnimatedPan</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">n.pan</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">clearTimeout</span><span class="PUNC">(</span><span class="NAME">this._sizeTimer</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._resetView</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">panBy</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">o.point</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">round</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">||</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NAME">t.x</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">t.y</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.fire</span><span class="PUNC">(</span><span class="STRN">"moveend"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">e.animate</span><span class="PUNC">!==</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">this.getSize</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">contains</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._resetView</span><span class="PUNC">(</span><span class="NAME">this.unproject</span><span class="PUNC">(</span><span class="NAME">this.project</span><span class="PUNC">(</span><span class="NAME">this.getCenter</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">add</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.getZoom</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this._panAnim</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">this._panAnim</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.PosAnimation</span><span class="PUNC">,</span><span class="NAME">this._panAnim.on</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">step</span><span class="PUNC">:</span><span class="NAME">this._onPanTransitionStep</span><span class="PUNC">,</span><span class="NAME">end</span><span class="PUNC">:</span><span class="NAME">this._onPanTransitionEnd</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e.noMoveStart</span><span class="PUNC">||</span><span class="NAME">this.fire</span><span class="PUNC">(</span><span class="STRN">"movestart"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e.animate</span><span class="PUNC">!==</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.DomUtil.addClass</span><span class="PUNC">(</span><span class="NAME">this._mapPane</span><span class="PUNC">,</span><span class="STRN">"leaflet-pan-anim"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this._getMapPanePos</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">subtract</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">round</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this._panAnim.run</span><span class="PUNC">(</span><span class="NAME">this._mapPane</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">e.duration</span><span class="PUNC">||</span><span class="PUNC">.</span><span class="NUMB">25</span><span class="PUNC">,</span><span class="NAME">e.easeLinearity</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="WHIT"> </span><span class="NAME">this._rawPanBy</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.fire</span><span class="PUNC">(</span><span class="STRN">"move"</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">fire</span><span class="PUNC">(</span><span class="STRN">"moveend"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_onPanTransitionStep</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.fire</span><span class="PUNC">(</span><span class="STRN">"move"</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_onPanTransitionEnd</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.DomUtil.removeClass</span><span class="PUNC">(</span><span class="NAME">this._mapPane</span><span class="PUNC">,</span><span class="STRN">"leaflet-pan-anim"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.fire</span><span class="PUNC">(</span><span class="STRN">"moveend"</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_tryAnimatedPan</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this._getCenterOffset</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">_floor</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">&&</span><span class="NAME">e.animate</span><span class="PUNC">)</span><span class="PUNC">===</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">||</span><span class="NAME">this.getSize</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">contains</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="PUNC">(</span><span class="NAME">this.panBy</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Map.mergeOptions</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">zoomAnimation</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">zoomAnimationThreshold</span><span class="PUNC">:</span><span class="NUMB">4</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">h</span><span class="PUNC">=</span><span class="NAME">o.DomUtil.TRANSITION</span><span class="PUNC">&&</span><span class="NAME">o.Browser.any3d</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">o.Browser.mobileOpera</span><span class="PUNC">;</span><span class="NAME">h</span><span class="PUNC">&&</span><span class="NAME">o.Map.addInitHook</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._zoomAnimated</span><span class="PUNC">=</span><span class="NAME">this.options.zoomAnimation</span><span class="PUNC">,</span><span class="NAME">this._zoomAnimated</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">this._createAnimProxy</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.DomEvent.on</span><span class="PUNC">(</span><span class="NAME">this._proxy</span><span class="PUNC">,</span><span class="NAME">o.DomUtil.TRANSITION_END</span><span class="PUNC">,</span><span class="NAME">this._catchTransitionEnd</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Map.include</span><span class="PUNC">(</span><span class="NAME">h</span><span class="PUNC">?</span><span class="PUNC">{</span><span class="NAME">_createAnimProxy</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">this._proxy</span><span class="PUNC">=</span><span class="NAME">o.DomUtil.create</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">,</span><span class="STRN">"leaflet-proxy leaflet-zoom-animated"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this._panes.mapPane.appendChild</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.on</span><span class="PUNC">(</span><span class="STRN">"zoomanim"</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">o.DomUtil.TRANSFORM</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">t.style</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">o.DomUtil.setTransform</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">this.project</span><span class="PUNC">(</span><span class="NAME">e.center</span><span class="PUNC">,</span><span class="NAME">e.zoom</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.getZoomScale</span><span class="PUNC">(</span><span class="NAME">e.zoom</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">===</span><span class="NAME">t.style</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">&&</span><span class="NAME">this._animatingZoom</span><span class="PUNC">&&</span><span class="NAME">this._onZoomTransitionEnd</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.on</span><span class="PUNC">(</span><span class="STRN">"load moveend"</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this.getCenter</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this.getZoom</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">o.DomUtil.setTransform</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">this.project</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.getZoomScale</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_catchTransitionEnd</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._animatingZoom</span><span class="PUNC">&&</span><span class="NAME">t.propertyName.indexOf</span><span class="PUNC">(</span><span class="STRN">"transform"</span><span class="PUNC">)</span><span class="PUNC">>=</span><span class="NUMB">0</span><span class="PUNC">&&</span><span class="NAME">this._onZoomTransitionEnd</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_nothingToAnimate</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">!</span><span class="NAME">this._container.getElementsByClassName</span><span class="PUNC">(</span><span class="STRN">"leaflet-zoom-animated"</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">length</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_tryAnimatedZoom</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this._animatingZoom</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">i</span><span class="PUNC">||</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NAME">this._zoomAnimated</span><span class="PUNC">||</span><span class="NAME">i.animate</span><span class="PUNC">===</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">||</span><span class="NAME">this._nothingToAnimate</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">-</span><span class="NAME">this._zoom</span><span class="PUNC">)</span><span class="PUNC">></span><span class="NAME">this.options.zoomAnimationThreshold</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">this.getZoomScale</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">this._getCenterOffset</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">_divideBy</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">/</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">i.animate</span><span class="PUNC">===</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">||</span><span class="NAME">this.getSize</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">contains</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="PUNC">(</span><span class="NAME">o.Util.requestAnimFrame</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._moveStart</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">_animateZoom</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_animateZoom</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">i</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">this._animatingZoom</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">this._animateToCenter</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">this._animateToZoom</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">o.DomUtil.addClass</span><span class="PUNC">(</span><span class="NAME">this._mapPane</span><span class="PUNC">,</span><span class="STRN">"leaflet-zoom-anim"</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.fire</span><span class="PUNC">(</span><span class="STRN">"zoomanim"</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">center</span><span class="PUNC">:</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">zoom</span><span class="PUNC">:</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">noUpdate</span><span class="PUNC">:</span><span class="NAME">n</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">setTimeout</span><span class="PUNC">(</span><span class="NAME">o.bind</span><span class="PUNC">(</span><span class="NAME">this._onZoomTransitionEnd</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NUMB">250</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_onZoomTransitionEnd</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._animatingZoom</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">o.DomUtil.removeClass</span><span class="PUNC">(</span><span class="NAME">this._mapPane</span><span class="PUNC">,</span><span class="STRN">"leaflet-zoom-anim"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._animatingZoom</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">this._move</span><span class="PUNC">(</span><span class="NAME">this._animateToCenter</span><span class="PUNC">,</span><span class="NAME">this._animateToZoom</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Util.requestAnimFrame</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._moveEnd</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Map.include</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">flyTo</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">function</span><span class="WHIT"> </span><span class="NAME">s</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">?</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">:</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">?</span><span class="NAME">v</span><span class="PUNC">:</span><span class="NAME">g</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">v</span><span class="PUNC">*</span><span class="NAME">v</span><span class="PUNC">-</span><span class="NAME">g</span><span class="PUNC">*</span><span class="NAME">g</span><span class="PUNC">+</span><span class="NAME">e</span><span class="PUNC">*</span><span class="NAME">L</span><span class="PUNC">*</span><span class="NAME">L</span><span class="PUNC">*</span><span class="NAME">y</span><span class="PUNC">*</span><span class="NAME">y</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">=</span><span class="NUMB">2</span><span class="PUNC">*</span><span class="NAME">i</span><span class="PUNC">*</span><span class="NAME">L</span><span class="PUNC">*</span><span class="NAME">y</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">n</span><span class="PUNC">/</span><span class="NAME">o</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">Math.sqrt</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">*</span><span class="NAME">s</span><span class="PUNC">+</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">-</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NUMB">1</span><span class="NAME">e</span><span class="PUNC">-</span><span class="NUMB">9</span><span class="PUNC">></span><span class="NAME">r</span><span class="PUNC">?</span><span class="PUNC">-</span><span class="NUMB">18</span><span class="PUNC">:</span><span class="NAME">Math.log</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">a</span><span class="PUNC">}</span><span class="KEYW">function</span><span class="WHIT"> </span><span class="NAME">r</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">(</span><span class="NAME">Math.exp</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">-</span><span class="NAME">Math.exp</span><span class="PUNC">(</span><span class="PUNC">-</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">}</span><span class="KEYW">function</span><span class="WHIT"> </span><span class="NAME">a</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">(</span><span class="NAME">Math.exp</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="NAME">Math.exp</span><span class="PUNC">(</span><span class="PUNC">-</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">}</span><span class="KEYW">function</span><span class="WHIT"> </span><span class="NAME">h</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">r</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NAME">a</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">function</span><span class="WHIT"> </span><span class="NAME">l</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">g</span><span class="PUNC">*</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NAME">a</span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">+</span><span class="NAME">P</span><span class="PUNC">*</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">function</span><span class="WHIT"> </span><span class="NAME">u</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">g</span><span class="PUNC">*</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NAME">h</span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">+</span><span class="NAME">P</span><span class="PUNC">*</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">-</span><span class="NAME">r</span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NAME">L</span><span class="PUNC">}</span><span class="KEYW">function</span><span class="WHIT"> </span><span class="NAME">c</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">-</span><span class="NAME">Math.pow</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">-</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NUMB">1.5</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">function</span><span class="WHIT"> </span><span class="NAME">d</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">Date.now</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">-</span><span class="NAME">b</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NAME">T</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">c</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NAME">w</span><span class="PUNC">;</span><span class="NUMB">1</span><span class="PUNC">>=</span><span class="NAME">i</span><span class="PUNC">?</span><span class="PUNC">(</span><span class="NAME">this._flyToFrame</span><span class="PUNC">=</span><span class="NAME">o.Util.requestAnimFrame</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._move</span><span class="PUNC">(</span><span class="NAME">this.unproject</span><span class="PUNC">(</span><span class="NAME">_.add</span><span class="PUNC">(</span><span class="NAME">m.subtract</span><span class="PUNC">(</span><span class="NAME">_</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">multiplyBy</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NAME">y</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">f</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.getScaleZoom</span><span class="PUNC">(</span><span class="NAME">g</span><span class="PUNC">/</span><span class="NAME">l</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">f</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">flyTo</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">this._move</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">_moveEnd</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">n</span><span class="PUNC">||</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">n.animate</span><span class="PUNC">===</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">||</span><span class="PUNC">!</span><span class="NAME">o.Browser.any3d</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.setView</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this._stop</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">_</span><span class="PUNC">=</span><span class="NAME">this.project</span><span class="PUNC">(</span><span class="NAME">this.getCenter</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">m</span><span class="PUNC">=</span><span class="NAME">this.project</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">p</span><span class="PUNC">=</span><span class="NAME">this.getSize</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">f</span><span class="PUNC">=</span><span class="NAME">this._zoom</span><span class="PUNC">;</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">o.latLng</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">===</span><span class="NAME">i</span><span class="PUNC">?</span><span class="NAME">f</span><span class="PUNC">:</span><span class="NAME">e</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">g</span><span class="PUNC">=</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">p.x</span><span class="PUNC">,</span><span class="NAME">p.y</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">v</span><span class="PUNC">=</span><span class="NAME">g</span><span class="PUNC">*</span><span class="NAME">this.getZoomScale</span><span class="PUNC">(</span><span class="NAME">f</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">=</span><span class="NAME">m.distanceTo</span><span class="PUNC">(</span><span class="NAME">_</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">P</span><span class="PUNC">=</span><span class="NUMB">1.42</span><span class="PUNC">,</span><span class="NAME">L</span><span class="PUNC">=</span><span class="NAME">P</span><span class="PUNC">*</span><span class="NAME">P</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">=</span><span class="NAME">s</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">b</span><span class="PUNC">=</span><span class="NAME">Date.now</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">w</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">-</span><span class="NAME">x</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NAME">P</span><span class="PUNC">,</span><span class="NAME">T</span><span class="PUNC">=</span><span class="NAME">n.duration</span><span class="PUNC">?</span><span class="NUMB">1</span><span class="NAME">e3</span><span class="PUNC">*</span><span class="NAME">n.duration</span><span class="PUNC">:</span><span class="NUMB">1</span><span class="NAME">e3</span><span class="PUNC">*</span><span class="NAME">w</span><span class="PUNC">*</span><span class="PUNC">.</span><span class="NUMB">8</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._moveStart</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">d.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">flyToBounds</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this._getBoundsCenterZoom</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.flyTo</span><span class="PUNC">(</span><span class="NAME">i.center</span><span class="PUNC">,</span><span class="NAME">i.zoom</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o.Map.include</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">_defaultLocateOptions</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="NAME">timeout</span><span class="PUNC">:</span><span class="NUMB">1</span><span class="NAME">e4</span><span class="PUNC">,</span><span class="NAME">watch</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">locate</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">this._locateOptions</span><span class="PUNC">=</span><span class="NAME">o.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">this._defaultLocateOptions</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="PUNC">(</span><span class="STRN">"geolocation"</span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">navigator</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._handleGeolocationError</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">code</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">message</span><span class="PUNC">:</span><span class="STRN">"Geolocation not supported."</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">o.bind</span><span class="PUNC">(</span><span class="NAME">this._handleGeolocationResponse</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">o.bind</span><span class="PUNC">(</span><span class="NAME">this._handleGeolocationError</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t.watch</span><span class="PUNC">?</span><span class="NAME">this._locationWatchId</span><span class="PUNC">=</span><span class="NAME">navigator.geolocation.watchPosition</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">navigator.geolocation.getCurrentPosition</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">stopLocate</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">navigator.geolocation</span><span class="PUNC">&&</span><span class="NAME">navigator.geolocation.clearWatch</span><span class="PUNC">&&</span><span class="NAME">navigator.geolocation.clearWatch</span><span class="PUNC">(</span><span class="NAME">this._locationWatchId</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this._locateOptions</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">this._locateOptions.setView</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_handleGeolocationError</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">t.code</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">t.message</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">===</span><span class="NAME">e</span><span class="PUNC">?</span><span class="STRN">"permission denied"</span><span class="PUNC">:</span><span class="NUMB">2</span><span class="PUNC">===</span><span class="NAME">e</span><span class="PUNC">?</span><span class="STRN">"position unavailable"</span><span class="PUNC">:</span><span class="STRN">"timeout"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this._locateOptions.setView</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">this._loaded</span><span class="PUNC">&&</span><span class="NAME">this.fitWorld</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.fire</span><span class="PUNC">(</span><span class="STRN">"locationerror"</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">code</span><span class="PUNC">:</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">message</span><span class="PUNC">:</span><span class="STRN">"Geolocation error: "</span><span class="PUNC">+</span><span class="NAME">i</span><span class="PUNC">+</span><span class="STRN">"."</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_handleGeolocationResponse</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">t.coords.latitude</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">t.coords.longitude</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o.LatLng</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">n.toBounds</span><span class="PUNC">(</span><span class="NAME">t.coords.accuracy</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">this._locateOptions</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">r.setView</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">this.getBoundsZoom</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.setView</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">r.maxZoom</span><span class="PUNC">?</span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">,</span><span class="NAME">r.maxZoom</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">h</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">latlng</span><span class="PUNC">:</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">bounds</span><span class="PUNC">:</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">timestamp</span><span class="PUNC">:</span><span class="NAME">t.timestamp</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">l</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">t.coords</span><span class="PUNC">)</span><span class="STRN">"number"</span><span class="PUNC">==</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">t.coords</span><span class="PUNC">[</span><span class="NAME">l</span><span class="PUNC">]</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">h</span><span class="PUNC">[</span><span class="NAME">l</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">t.coords</span><span class="PUNC">[</span><span class="NAME">l</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.fire</span><span class="PUNC">(</span><span class="STRN">"locationfound"</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">(</span><span class="NAME">window</span><span class="PUNC">,</span><span class="NAME">document</span><span class="PUNC">)</span><span class="PUNC">;</span></pre></body></html>